(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"011f":function(t,e,n){n("f22d"),n("08d4"),n("c8b8"),n("6619"),t.exports=n("02eb").Symbol},"01f9":function(t,e,n){"use strict";var i=n("2d00"),r=n("5ca1"),o=n("2aba"),s=n("32e9"),a=n("84f2"),u=n("41a0"),c=n("7f20"),h=n("38fd"),l=n("2b4c")("iterator"),d=!([].keys&&"next"in[].keys()),f="@@iterator",p="keys",v="values",m=function(){return this};t.exports=function(t,e,n,y,g,b,_){u(n,e,y);var w,E,C,T=function(t){if(!d&&t in D)return D[t];switch(t){case p:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",k=g==v,I=!1,D=t.prototype,A=D[l]||D[f]||g&&D[g],O=A||T(g),M=g?k?T("entries"):O:void 0,x="Array"==e&&D.entries||A;if(x&&(C=h(x.call(new t)),C!==Object.prototype&&C.next&&(c(C,S,!0),i||"function"==typeof C[l]||s(C,l,m))),k&&A&&A.name!==v&&(I=!0,O=function(){return A.call(this)}),i&&!_||!d&&!I&&D[l]||s(D,l,O),a[e]=O,a[S]=m,g)if(w={values:k?O:T(v),keys:b?O:T(p),entries:M},_)for(E in w)E in D||o(D,E,w[E]);else r(r.P+r.F*(d||I),e,w);return w}},"02eb":function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},"03ed":function(t,e,n){var i=n("cad0").f,r=n("8343"),o=n("8d98")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},"08d4":function(t,e,n){"use strict";var i=n("4045"),r={};r[n("8d98")("toStringTag")]="z",r+""!="[object z]"&&n("4c35")(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},"097d":function(t,e,n){"use strict";var i=n("5ca1"),r=n("8378"),o=n("7726"),s=n("ebd6"),a=n("bcaa");i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},"0d58":function(t,e,n){var i=n("ce10"),r=n("e11e");t.exports=Object.keys||function(t){return i(t,r)}},1495:function(t,e,n){var i=n("86cc"),r=n("cb7c"),o=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){r(t);var n,s=o(e),a=s.length,u=0;while(a>u)i.f(t,n=s[u++],e[n]);return t}},"153c":function(t,e,n){var i=n("235a");i(i.S+i.F,"Object",{assign:n("ef81")})},"18cc":function(t,e,n){var i=n("232e"),r=n("9129").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},1928:function(t,e,n){var i=n("f40b"),r=n("96ff"),o=n("50e6");t.exports=function(t){var e=i(t),n=r.f;if(n){var s,a=n(t),u=o.f,c=0;while(a.length>c)u.call(t,s=a[c++])&&e.push(s)}return e}},1982:function(t,e,n){var i=n("cad0"),r=n("c46b");t.exports=n("948a")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},1991:function(t,e,n){var i,r,o,s=n("9b43"),a=n("31f4"),u=n("fab2"),c=n("230e"),h=n("7726"),l=h.process,d=h.setImmediate,f=h.clearImmediate,p=h.MessageChannel,v=h.Dispatch,m=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},_=function(t){b.call(t.data)};d&&f||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return y[++m]=function(){a("function"==typeof t?t:Function(t),e)},i(m),m},f=function(t){delete y[t]},"process"==n("2d95")(l)?i=function(t){l.nextTick(s(b,t,1))}:v&&v.now?i=function(t){v.now(s(b,t,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=_,i=s(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(i=function(t){h.postMessage(t+"","*")},h.addEventListener("message",_,!1)):i=g in c("script")?function(t){u.appendChild(c("script"))[g]=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:d,clear:f}},"1f50":function(t,e,n){var i=n("8187");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"1fa8":function(t,e,n){var i=n("cb7c");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(s){var o=t["return"];throw void 0!==o&&i(o.call(t)),s}}},2223:function(t,e,n){var i=n("669d");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"230e":function(t,e,n){var i=n("d3f4"),r=n("7726").document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},"232e":function(t,e,n){var i=n("8343"),r=n("ad20"),o=n("6ff2")(!1),s=n("89fc")("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);while(e.length>u)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},"235a":function(t,e,n){var i=n("aad8"),r=n("02eb"),o=n("1982"),s=n("4c35"),a=n("e821"),u="prototype",c=function(t,e,n){var h,l,d,f,p=t&c.F,v=t&c.G,m=t&c.S,y=t&c.P,g=t&c.B,b=v?i:m?i[e]||(i[e]={}):(i[e]||{})[u],_=v?r:r[e]||(r[e]={}),w=_[u]||(_[u]={});for(h in v&&(n=e),n)l=!p&&b&&void 0!==b[h],d=(l?b:n)[h],f=g&&l?a(d,i):y&&"function"==typeof d?a(Function.call,d):d,b&&s(b,h,d,t&c.U),_[h]!=d&&o(_,h,f),y&&w[h]!=d&&(w[h]=d)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},"23c6":function(t,e,n){var i=n("2d95"),r=n("2b4c")("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},2622:function(t,e,n){"use strict";var i=n("c6b0"),r=n("c46b"),o=n("03ed"),s={};n("1982")(s,n("8d98")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},2629:function(t,e,n){n("2b10"),t.exports=n("02eb").String.repeat},"27ee":function(t,e,n){var i=n("23c6"),r=n("2b4c")("iterator"),o=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},2813:function(t,e,n){"use strict";var i=n("235a"),r=n("7346"),o=n("7e54"),s="startsWith",a=""[s];i(i.P+i.F*n("b4b7")(s),"String",{startsWith:function(t){var e=o(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},2877:function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=u):r&&(u=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),u)if(c.functional){c._injectStyles=u;var h=c.render;c.render=function(t,e){return u.call(e),h(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},"2aba":function(t,e,n){var i=n("7726"),r=n("32e9"),o=n("69a8"),s=n("ca5a")("src"),a=n("fa5b"),u="toString",c=(""+a).split(u);n("8378").inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||r(n,s,t[e]?""+t[e]:c.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[s]||a.call(this)})},"2aeb":function(t,e,n){var i=n("cb7c"),r=n("1495"),o=n("e11e"),s=n("613b")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,e=n("230e")("iframe"),i=o.length,r="<",s=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),c=t.F;while(i--)delete c[u][o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=i(t),n=new a,a[u]=null,n[s]=t):n=c(),void 0===e?n:r(n,e)}},"2b0e":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.3
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function i(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function o(t){return!0===t}function s(t){return!1===t}function a(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function u(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function h(t){return"[object Object]"===c.call(t)}function l(t){return"[object RegExp]"===c.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return r(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||h(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),i=t.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}m("slot,component",!0);var y=m("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function _(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){var i=e[n];return i||(e[n]=t(n))}}var E=/-(\w)/g,C=w(function(t){return t.replace(E,function(t,e){return e?e.toUpperCase():""})}),T=w(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),S=/\B([A-Z])/g,k=w(function(t){return t.replace(S,"-$1").toLowerCase()});function I(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function D(t,e){return t.bind(e)}var A=Function.prototype.bind?D:I;function O(t,e){e=e||0;var n=t.length-e,i=new Array(n);while(n--)i[n]=t[n+e];return i}function M(t,e){for(var n in e)t[n]=e[n];return t}function x(t){for(var e={},n=0;n<t.length;n++)t[n]&&M(e,t[n]);return e}function L(t,e,n){}var N=function(t,e,n){return!1},R=function(t){return t};function P(t,e){if(t===e)return!0;var n=u(t),i=u(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var r=Array.isArray(t),o=Array.isArray(e);if(r&&o)return t.length===e.length&&t.every(function(t,n){return P(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||o)return!1;var s=Object.keys(t),a=Object.keys(e);return s.length===a.length&&s.every(function(n){return P(t[n],e[n])})}catch(c){return!1}}function B(t,e){for(var n=0;n<t.length;n++)if(P(t[n],e))return n;return-1}function F(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var q="data-server-rendered",j=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:N,isReservedAttr:N,isUnknownElement:N,getTagNamespace:L,parsePlatformTagName:R,mustUseProp:N,async:!0,_lifecycleHooks:V},$="a-zA-Z·À-ÖØ-öø-ͽͿ-῿‌-‍‿-⁀⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�";function W(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var Q=new RegExp("[^"+$+".$_\\d]");function K(t){if(!Q.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var z,G="__proto__"in{},X="undefined"!==typeof window,Y="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Y&&WXEnvironment.platform.toLowerCase(),Z=X&&window.navigator.userAgent.toLowerCase(),tt=Z&&/msie|trident/.test(Z),et=Z&&Z.indexOf("msie 9.0")>0,nt=Z&&Z.indexOf("edge/")>0,it=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===J),rt=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ot={}.watch,st=!1;if(X)try{var at={};Object.defineProperty(at,"passive",{get:function(){st=!0}}),window.addEventListener("test-passive",null,at)}catch(Es){}var ut=function(){return void 0===z&&(z=!X&&!Y&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),z},ct=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ht(t){return"function"===typeof t&&/native code/.test(t.toString())}var lt,dt="undefined"!==typeof Symbol&&ht(Symbol)&&"undefined"!==typeof Reflect&&ht(Reflect.ownKeys);lt="undefined"!==typeof Set&&ht(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ft=L,pt=0,vt=function(){this.id=pt++,this.subs=[]};vt.prototype.addSub=function(t){this.subs.push(t)},vt.prototype.removeSub=function(t){g(this.subs,t)},vt.prototype.depend=function(){vt.target&&vt.target.addDep(this)},vt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},vt.target=null;var mt=[];function yt(t){mt.push(t),vt.target=t}function gt(){mt.pop(),vt.target=mt[mt.length-1]}var bt=function(t,e,n,i,r,o,s,a){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},_t={child:{configurable:!0}};_t.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,_t);var wt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function Et(t){return new bt(void 0,void 0,void 0,String(t))}function Ct(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Tt=Array.prototype,St=Object.create(Tt),kt=["push","pop","shift","unshift","splice","sort","reverse"];kt.forEach(function(t){var e=Tt[t];H(St,t,function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];var r,o=e.apply(this,n),s=this.__ob__;switch(t){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2);break}return r&&s.observeArray(r),s.dep.notify(),o})});var It=Object.getOwnPropertyNames(St),Dt=!0;function At(t){Dt=t}var Ot=function(t){this.value=t,this.dep=new vt,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t)?(G?Mt(t,St):xt(t,St,It),this.observeArray(t)):this.walk(t)};function Mt(t,e){t.__proto__=e}function xt(t,e,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];H(t,o,e[o])}}function Lt(t,e){var n;if(u(t)&&!(t instanceof bt))return _(t,"__ob__")&&t.__ob__ instanceof Ot?n=t.__ob__:Dt&&!ut()&&(Array.isArray(t)||h(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Ot(t)),e&&n&&n.vmCount++,n}function Nt(t,e,n,i,r){var o=new vt,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var a=s&&s.get,u=s&&s.set;a&&!u||2!==arguments.length||(n=t[e]);var c=!r&&Lt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):n;return vt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&Bt(e))),e},set:function(e){var i=a?a.call(t):n;e===i||e!==e&&i!==i||a&&!u||(u?u.call(t,e):n=e,c=!r&&Lt(e),o.notify())}})}}function Rt(t,e,n){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var i=t.__ob__;return t._isVue||i&&i.vmCount?n:i?(Nt(i.value,e,n),i.dep.notify(),n):(t[e]=n,n)}function Pt(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}function Bt(t){for(var e=void 0,n=0,i=t.length;n<i;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Bt(e)}Ot.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Nt(t,e[n])},Ot.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Lt(t[e])};var Ft=U.optionMergeStrategies;function qt(t,e){if(!e)return t;for(var n,i,r,o=dt?Reflect.ownKeys(e):Object.keys(e),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(i=t[n],r=e[n],_(t,n)?i!==r&&h(i)&&h(r)&&qt(i,r):Rt(t,n,r));return t}function jt(t,e,n){return n?function(){var i="function"===typeof e?e.call(n,n):e,r="function"===typeof t?t.call(n,n):t;return i?qt(i,r):r}:e?t?function(){return qt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Vt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Ut(n):n}function Ut(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function $t(t,e,n,i){var r=Object.create(t||null);return e?M(r,e):r}Ft.data=function(t,e,n){return n?jt(t,e,n):e&&"function"!==typeof e?t:jt(t,e)},V.forEach(function(t){Ft[t]=Vt}),j.forEach(function(t){Ft[t+"s"]=$t}),Ft.watch=function(t,e,n,i){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var o in M(r,t),e){var s=r[o],a=e[o];s&&!Array.isArray(s)&&(s=[s]),r[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return r},Ft.props=Ft.methods=Ft.inject=Ft.computed=function(t,e,n,i){if(!t)return e;var r=Object.create(null);return M(r,t),e&&M(r,e),r},Ft.provide=jt;var Wt=function(t,e){return void 0===e?t:e};function Ht(t,e){var n=t.props;if(n){var i,r,o,s={};if(Array.isArray(n)){i=n.length;while(i--)r=n[i],"string"===typeof r&&(o=C(r),s[o]={type:null})}else if(h(n))for(var a in n)r=n[a],o=C(a),s[o]=h(r)?r:{type:r};else 0;t.props=s}}function Qt(t,e){var n=t.inject;if(n){var i=t.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(h(n))for(var o in n){var s=n[o];i[o]=h(s)?M({from:o},s):{from:s}}else 0}}function Kt(t){var e=t.directives;if(e)for(var n in e){var i=e[n];"function"===typeof i&&(e[n]={bind:i,update:i})}}function zt(t,e,n){if("function"===typeof e&&(e=e.options),Ht(e,n),Qt(e,n),Kt(e),!e._base&&(e.extends&&(t=zt(t,e.extends,n)),e.mixins))for(var i=0,r=e.mixins.length;i<r;i++)t=zt(t,e.mixins[i],n);var o,s={};for(o in t)a(o);for(o in e)_(t,o)||a(o);function a(i){var r=Ft[i]||Wt;s[i]=r(t[i],e[i],n,i)}return s}function Gt(t,e,n,i){if("string"===typeof n){var r=t[e];if(_(r,n))return r[n];var o=C(n);if(_(r,o))return r[o];var s=T(o);if(_(r,s))return r[s];var a=r[n]||r[o]||r[s];return a}}function Xt(t,e,n,i){var r=e[t],o=!_(n,t),s=n[t],a=te(Boolean,r.type);if(a>-1)if(o&&!_(r,"default"))s=!1;else if(""===s||s===k(t)){var u=te(String,r.type);(u<0||a<u)&&(s=!0)}if(void 0===s){s=Yt(i,r,t);var c=Dt;At(!0),Lt(s),At(c)}return s}function Yt(t,e,n){if(_(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof i&&"Function"!==Jt(e.type)?i.call(t):i}}function Jt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Zt(t,e){return Jt(t)===Jt(e)}function te(t,e){if(!Array.isArray(e))return Zt(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(Zt(e[n],t))return n;return-1}function ee(t,e,n){if(e){var i=e;while(i=i.$parent){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{var s=!1===r[o].call(i,t,e,n);if(s)return}catch(Es){ie(Es,i,"errorCaptured hook")}}}ie(t,e,n)}function ne(t,e,n,i,r){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&f(o)&&o.catch(function(t){return ee(t,i,r+" (Promise/async)")})}catch(Es){ee(Es,i,r)}return o}function ie(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(Es){re(Es,null,"config.errorHandler")}re(t,e,n)}function re(t,e,n){if(!X&&!Y||"undefined"===typeof console)throw t;console.error(t)}var oe,se=!1,ae=[],ue=!1;function ce(){ue=!1;var t=ae.slice(0);ae.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ht(Promise)){var he=Promise.resolve();oe=function(){he.then(ce),it&&setTimeout(L)},se=!0}else if(tt||"undefined"===typeof MutationObserver||!ht(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())oe="undefined"!==typeof setImmediate&&ht(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var le=1,de=new MutationObserver(ce),fe=document.createTextNode(String(le));de.observe(fe,{characterData:!0}),oe=function(){le=(le+1)%2,fe.data=String(le)},se=!0}function pe(t,e){var n;if(ae.push(function(){if(t)try{t.call(e)}catch(Es){ee(Es,e,"nextTick")}else n&&n(e)}),ue||(ue=!0,oe()),!t&&"undefined"!==typeof Promise)return new Promise(function(t){n=t})}var ve=new lt;function me(t){ye(t,ve),ve.clear()}function ye(t,e){var n,i,r=Array.isArray(t);if(!(!r&&!u(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(r){n=t.length;while(n--)ye(t[n],e)}else{i=Object.keys(t),n=i.length;while(n--)ye(t[i[n]],e)}}}var ge=w(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var i="!"===t.charAt(0);return t=i?t.slice(1):t,{name:t,once:n,capture:i,passive:e}});function be(t,e){function n(){var t=arguments,i=n.fns;if(!Array.isArray(i))return ne(i,null,arguments,e,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)ne(r[o],null,t,e,"v-on handler")}return n.fns=t,n}function _e(t,e,n,r,s,a){var u,c,h,l;for(u in t)c=t[u],h=e[u],l=ge(u),i(c)||(i(h)?(i(c.fns)&&(c=t[u]=be(c,a)),o(l.once)&&(c=t[u]=s(l.name,c,l.capture)),n(l.name,c,l.capture,l.passive,l.params)):c!==h&&(h.fns=c,t[u]=h));for(u in e)i(t[u])&&(l=ge(u),r(l.name,e[u],l.capture))}function we(t,e,n){var s;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var a=t[e];function u(){n.apply(this,arguments),g(s.fns,u)}i(a)?s=be([u]):r(a.fns)&&o(a.merged)?(s=a,s.fns.push(u)):s=be([a,u]),s.merged=!0,t[e]=s}function Ee(t,e,n){var o=e.options.props;if(!i(o)){var s={},a=t.attrs,u=t.props;if(r(a)||r(u))for(var c in o){var h=k(c);Ce(s,u,c,h,!0)||Ce(s,a,c,h,!1)}return s}}function Ce(t,e,n,i,o){if(r(e)){if(_(e,n))return t[n]=e[n],o||delete e[n],!0;if(_(e,i))return t[n]=e[i],o||delete e[i],!0}return!1}function Te(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Se(t){return a(t)?[Et(t)]:Array.isArray(t)?Ie(t):void 0}function ke(t){return r(t)&&r(t.text)&&s(t.isComment)}function Ie(t,e){var n,s,u,c,h=[];for(n=0;n<t.length;n++)s=t[n],i(s)||"boolean"===typeof s||(u=h.length-1,c=h[u],Array.isArray(s)?s.length>0&&(s=Ie(s,(e||"")+"_"+n),ke(s[0])&&ke(c)&&(h[u]=Et(c.text+s[0].text),s.shift()),h.push.apply(h,s)):a(s)?ke(c)?h[u]=Et(c.text+s):""!==s&&h.push(Et(s)):ke(s)&&ke(c)?h[u]=Et(c.text+s.text):(o(t._isVList)&&r(s.tag)&&i(s.key)&&r(e)&&(s.key="__vlist"+e+"_"+n+"__"),h.push(s)));return h}function De(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Ae(t){var e=Oe(t.$options.inject,t);e&&(At(!1),Object.keys(e).forEach(function(n){Nt(t,n,e[n])}),At(!0))}function Oe(t,e){if(t){for(var n=Object.create(null),i=dt?Reflect.ownKeys(t):Object.keys(t),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){var s=t[o].from,a=e;while(a){if(a._provided&&_(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in t[o]){var u=t[o].default;n[o]="function"===typeof u?u.call(e):u}else 0}}return n}}function Me(t,e){if(!t||!t.length)return{};for(var n={},i=0,r=t.length;i<r;i++){var o=t[i],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==e&&o.fnContext!==e||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,u=n[a]||(n[a]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(xe)&&delete n[c];return n}function xe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Le(t,e){var n;if(t){if(t._normalized)return t;for(var i in n={},t)t[i]&&"$"!==i[0]&&(n[i]=Ne(t[i]))}else n={};for(var r in e)r in n||(n[r]=Re(e,r));return H(n,"_normalized",!0),H(n,"$stable",!t||!!t.$stable),n}function Ne(t){return function(e){var n=t(e);return n&&"object"===typeof n&&!Array.isArray(n)?[n]:Se(n)}}function Re(t,e){return function(){return t[e]}}function Pe(t,e){var n,i,o,s,a;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),i=0,o=t.length;i<o;i++)n[i]=e(t[i],i);else if("number"===typeof t)for(n=new Array(t),i=0;i<t;i++)n[i]=e(i+1,i);else if(u(t))if(dt&&t[Symbol.iterator]){n=[];var c=t[Symbol.iterator](),h=c.next();while(!h.done)n.push(e(h.value,n.length)),h=c.next()}else for(s=Object.keys(t),n=new Array(s.length),i=0,o=s.length;i<o;i++)a=s[i],n[i]=e(t[a],a,i);return r(n)||(n=[]),n._isVList=!0,n}function Be(t,e,n,i){var r,o=this.$scopedSlots[t];o?(n=n||{},i&&(n=M(M({},i),n)),r=o(n)||e):r=this.$slots[t]||e;var s=n&&n.slot;return s?this.$createElement("template",{slot:s},r):r}function Fe(t){return Gt(this.$options,"filters",t,!0)||R}function qe(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function je(t,e,n,i,r){var o=U.keyCodes[e]||n;return r&&i&&!U.keyCodes[e]?qe(r,i):o?qe(o,t):i?k(i)!==e:void 0}function Ve(t,e,n,i,r){if(n)if(u(n)){var o;Array.isArray(n)&&(n=x(n));var s=function(s){if("class"===s||"style"===s||y(s))o=t;else{var a=t.attrs&&t.attrs.type;o=i||U.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=C(s);if(!(s in o)&&!(u in o)&&(o[s]=n[s],r)){var c=t.on||(t.on={});c["update:"+u]=function(t){n[s]=t}}};for(var a in n)s(a)}else;return t}function Ue(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e?i:(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),We(i,"__static__"+t,!1),i)}function $e(t,e,n){return We(t,"__once__"+e+(n?"_"+n:""),!0),t}function We(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!==typeof t[i]&&He(t[i],e+"_"+i,n);else He(t,e,n)}function He(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Qe(t,e){if(e)if(h(e)){var n=t.on=t.on?M({},t.on):{};for(var i in e){var r=n[i],o=e[i];n[i]=r?[].concat(r,o):o}}else;return t}function Ke(t,e,n){n=n||{$stable:!e};for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?Ke(r,e,n):r&&(n[r.key]=r.fn)}return n}function ze(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"===typeof i&&i&&(t[e[n]]=e[n+1])}return t}function Ge(t,e){return"string"===typeof t?e+t:t}function Xe(t){t._o=$e,t._n=v,t._s=p,t._l=Pe,t._t=Be,t._q=P,t._i=B,t._m=Ue,t._f=Fe,t._k=je,t._b=Ve,t._v=Et,t._e=wt,t._u=Ke,t._g=Qe,t._d=ze,t._p=Ge}function Ye(t,e,i,r,s){var a,u=s.options;_(r,"_uid")?(a=Object.create(r),a._original=r):(a=r,r=r._original);var c=o(u._compiled),h=!c;this.data=t,this.props=e,this.children=i,this.parent=r,this.listeners=t.on||n,this.injections=Oe(u.inject,r),this.slots=function(){return Me(i,r)},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Le(t.scopedSlots,this.slots())}}),c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Le(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,i){var o=ln(a,t,e,n,i,h);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=r),o}:this._c=function(t,e,n,i){return ln(a,t,e,n,i,h)}}function Je(t,e,i,o,s){var a=t.options,u={},c=a.props;if(r(c))for(var h in c)u[h]=Xt(h,c,e||n);else r(i.attrs)&&tn(u,i.attrs),r(i.props)&&tn(u,i.props);var l=new Ye(i,u,s,o,t),d=a.render.call(null,l._c,l);if(d instanceof bt)return Ze(d,i,l.parent,a,l);if(Array.isArray(d)){for(var f=Se(d)||[],p=new Array(f.length),v=0;v<f.length;v++)p[v]=Ze(f[v],i,l.parent,a,l);return p}}function Ze(t,e,n,i,r){var o=Ct(t);return o.fnContext=n,o.fnOptions=i,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[C(n)]=e[n]}Xe(Ye.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var i=t.componentInstance=on(t,On);i.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,i=e.componentInstance=t.componentInstance;Rn(i,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,qn(n,"mounted")),t.data.keepAlive&&(e._isMounted?Yn(n):Bn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Fn(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,s,a){if(!i(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"===typeof t){var h;if(i(t.cid)&&(h=t,t=wn(h,c),void 0===t))return _n(h,e,n,s,a);e=e||{},_i(t),r(e.model)&&un(t.options,e);var l=Ee(e,t,a);if(o(t.options.functional))return Je(t,l,e,n,s);var d=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}sn(e);var p=t.options.name||a,v=new bt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:l,listeners:d,tag:a,children:s},h);return v}}}function on(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(n)}function sn(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var i=nn[n],r=e[i],o=en[i];r===o||r&&r._merged||(e[i]=r?an(o,r):o)}}function an(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}function un(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),s=o[i],a=e.model.callback;r(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[i]=[a].concat(s)):o[i]=a}var cn=1,hn=2;function ln(t,e,n,i,r,s){return(Array.isArray(n)||a(n))&&(r=i,i=n,n=void 0),o(s)&&(r=hn),dn(t,e,n,i,r)}function dn(t,e,n,i,o){if(r(n)&&r(n.__ob__))return wt();if(r(n)&&r(n.is)&&(e=n.is),!e)return wt();var s,a,u;(Array.isArray(i)&&"function"===typeof i[0]&&(n=n||{},n.scopedSlots={default:i[0]},i.length=0),o===hn?i=Se(i):o===cn&&(i=Te(i)),"string"===typeof e)?(a=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),s=U.isReservedTag(e)?new bt(U.parsePlatformTagName(e),n,i,void 0,void 0,t):n&&n.pre||!r(u=Gt(t.$options,"components",e))?new bt(e,n,i,void 0,void 0,t):rn(u,n,t,i,e)):s=rn(e,n,t,i);return Array.isArray(s)?s:r(s)?(r(a)&&fn(s,a),r(n)&&pn(n),s):wt()}function fn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),r(t.children))for(var s=0,a=t.children.length;s<a;s++){var u=t.children[s];r(u.tag)&&(i(u.ns)||o(n)&&"svg"!==u.tag)&&fn(u,e,n)}}function pn(t){u(t.style)&&me(t.style),u(t.class)&&me(t.class)}function vn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,r=i&&i.context;t.$slots=Me(e._renderChildren,r),t.$scopedSlots=n,t._c=function(e,n,i,r){return ln(t,e,n,i,r,!1)},t.$createElement=function(e,n,i,r){return ln(t,e,n,i,r,!0)};var o=i&&i.data;Nt(t,"$attrs",o&&o.attrs||n,null,!0),Nt(t,"$listeners",e._parentListeners||n,null,!0)}var mn,yn=null;function gn(t){Xe(t.prototype),t.prototype.$nextTick=function(t){return pe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,r=n._parentVnode;r&&(e.$scopedSlots=Le(r.data.scopedSlots,e.$slots)),e.$vnode=r;try{yn=e,t=i.call(e._renderProxy,e.$createElement)}catch(Es){ee(Es,e,"render"),t=e._vnode}finally{yn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=wt()),t.parent=r,t}}function bn(t,e){return(t.__esModule||dt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function _n(t,e,n,i,r){var o=wt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:i,tag:r},o}function wn(t,e){if(o(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;if(o(t.loading)&&r(t.loadingComp))return t.loadingComp;var n=yn;if(!r(t.owners)){var s=t.owners=[n],a=!0,c=function(t){for(var e=0,n=s.length;e<n;e++)s[e].$forceUpdate();t&&(s.length=0)},h=F(function(n){t.resolved=bn(n,e),a?s.length=0:c(!0)}),l=F(function(e){r(t.errorComp)&&(t.error=!0,c(!0))}),d=t(h,l);return u(d)&&(f(d)?i(t.resolved)&&d.then(h,l):f(d.component)&&(d.component.then(h,l),r(d.error)&&(t.errorComp=bn(d.error,e)),r(d.loading)&&(t.loadingComp=bn(d.loading,e),0===d.delay?t.loading=!0:setTimeout(function(){i(t.resolved)&&i(t.error)&&(t.loading=!0,c(!1))},d.delay||200)),r(d.timeout)&&setTimeout(function(){i(t.resolved)&&l(null)},d.timeout))),a=!1,t.loading?t.loadingComp:t.resolved}t.owners.push(n)}function En(t){return t.isComment&&t.asyncFactory}function Cn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||En(n)))return n}}function Tn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Dn(t,e)}function Sn(t,e){mn.$on(t,e)}function kn(t,e){mn.$off(t,e)}function In(t,e){var n=mn;return function i(){var r=e.apply(null,arguments);null!==r&&n.$off(t,i)}}function Dn(t,e,n){mn=t,_e(e,n||{},Sn,kn,In,t),mn=void 0}function An(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)i.$on(t[r],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)n.$off(t[i],e);return n}var o,s=n._events[t];if(!s)return n;if(!e)return n._events[t]=null,n;var a=s.length;while(a--)if(o=s[a],o===e||o.fn===e){s.splice(a,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?O(n):n;for(var i=O(arguments,1),r='event handler for "'+t+'"',o=0,s=n.length;o<s;o++)ne(n[o],e,i,e,r)}return e}}var On=null;function Mn(t){var e=On;return On=t,function(){On=e}}function xn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Ln(t){t.prototype._update=function(t,e){var n=this,i=n.$el,r=n._vnode,o=Mn(n);n._vnode=t,n.$el=r?n.__patch__(r,t):n.__patch__(n.$el,t,e,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){qn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),qn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Nn(t,e,n){var i;return t.$el=e,t.$options.render||(t.$options.render=wt),qn(t,"beforeMount"),i=function(){t._update(t._render(),n)},new ei(t,i,L,{before:function(){t._isMounted&&!t._isDestroyed&&qn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,qn(t,"mounted")),t}function Rn(t,e,i,r,o){var s=!!(r.data.scopedSlots&&!r.data.scopedSlots.$stable||t.$scopedSlots!==n&&!t.$scopedSlots.$stable),a=!!(o||t.$options._renderChildren||s);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=o,t.$attrs=r.data.attrs||n,t.$listeners=i||n,e&&t.$options.props){At(!1);for(var u=t._props,c=t.$options._propKeys||[],h=0;h<c.length;h++){var l=c[h],d=t.$options.props;u[l]=Xt(l,d,e,t)}At(!0),t.$options.propsData=e}i=i||n;var f=t.$options._parentListeners;t.$options._parentListeners=i,Dn(t,i,f),a&&(t.$slots=Me(o,r.context),t.$forceUpdate())}function Pn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Bn(t,e){if(e){if(t._directInactive=!1,Pn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Bn(t.$children[n]);qn(t,"activated")}}function Fn(t,e){if((!e||(t._directInactive=!0,!Pn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Fn(t.$children[n]);qn(t,"deactivated")}}function qn(t,e){yt();var n=t.$options[e],i=e+" hook";if(n)for(var r=0,o=n.length;r<o;r++)ne(n[r],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),gt()}var jn=[],Vn=[],Un={},$n=!1,Wn=!1,Hn=0;function Qn(){Hn=jn.length=Vn.length=0,Un={},$n=Wn=!1}var Kn=0,zn=Date.now;function Gn(){var t,e;for(Kn=zn(),Wn=!0,jn.sort(function(t,e){return t.id-e.id}),Hn=0;Hn<jn.length;Hn++)t=jn[Hn],t.before&&t.before(),e=t.id,Un[e]=null,t.run();var n=Vn.slice(),i=jn.slice();Qn(),Jn(n),Xn(i),ct&&U.devtools&&ct.emit("flush")}function Xn(t){var e=t.length;while(e--){var n=t[e],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&qn(i,"updated")}}function Yn(t){t._inactive=!1,Vn.push(t)}function Jn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Bn(t[e],!0)}function Zn(t){var e=t.id;if(null==Un[e]){if(Un[e]=!0,Wn){var n=jn.length-1;while(n>Hn&&jn[n].id>t.id)n--;jn.splice(n+1,0,t)}else jn.push(t);$n||($n=!0,pe(Gn))}}X&&zn()>document.createEvent("Event").timeStamp&&(zn=function(){return performance.now()});var ti=0,ei=function(t,e,n,i,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ti,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new lt,this.newDepIds=new lt,this.expression="","function"===typeof e?this.getter=e:(this.getter=K(e),this.getter||(this.getter=L)),this.value=this.lazy?void 0:this.get()};ei.prototype.get=function(){var t;yt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Es){if(!this.user)throw Es;ee(Es,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),gt(),this.cleanupDeps()}return t},ei.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},ei.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},ei.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Zn(this)},ei.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(Es){ee(Es,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},ei.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ei.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},ei.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var ni={enumerable:!0,configurable:!0,get:L,set:L};function ii(t,e,n){ni.get=function(){return this[e][n]},ni.set=function(t){this[e][n]=t},Object.defineProperty(t,n,ni)}function ri(t){t._watchers=[];var e=t.$options;e.props&&oi(t,e.props),e.methods&&fi(t,e.methods),e.data?si(t):Lt(t._data={},!0),e.computed&&ci(t,e.computed),e.watch&&e.watch!==ot&&pi(t,e.watch)}function oi(t,e){var n=t.$options.propsData||{},i=t._props={},r=t.$options._propKeys=[],o=!t.$parent;o||At(!1);var s=function(o){r.push(o);var s=Xt(o,e,n,t);Nt(i,o,s),o in t||ii(t,"_props",o)};for(var a in e)s(a);At(!0)}function si(t){var e=t.$options.data;e=t._data="function"===typeof e?ai(e,t):e||{},h(e)||(e={});var n=Object.keys(e),i=t.$options.props,r=(t.$options.methods,n.length);while(r--){var o=n[r];0,i&&_(i,o)||W(o)||ii(t,"_data",o)}Lt(e,!0)}function ai(t,e){yt();try{return t.call(e,e)}catch(Es){return ee(Es,e,"data()"),{}}finally{gt()}}var ui={lazy:!0};function ci(t,e){var n=t._computedWatchers=Object.create(null),i=ut();for(var r in e){var o=e[r],s="function"===typeof o?o:o.get;0,i||(n[r]=new ei(t,s||L,L,ui)),r in t||hi(t,r,o)}}function hi(t,e,n){var i=!ut();"function"===typeof n?(ni.get=i?li(e):di(n),ni.set=L):(ni.get=n.get?i&&!1!==n.cache?li(e):di(n.get):L,ni.set=n.set||L),Object.defineProperty(t,e,ni)}function li(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vt.target&&e.depend(),e.value}}function di(t){return function(){return t.call(this,this)}}function fi(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?L:A(e[n],t)}function pi(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)vi(t,n,i[r]);else vi(t,n,i)}}function vi(t,e,n,i){return h(n)&&(i=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,i)}function mi(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Rt,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,n){var i=this;if(h(e))return vi(i,t,e,n);n=n||{},n.user=!0;var r=new ei(i,t,e,n);if(n.immediate)try{e.call(i,r.value)}catch(o){ee(o,i,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}var yi=0;function gi(t){t.prototype._init=function(t){var e=this;e._uid=yi++,e._isVue=!0,t&&t._isComponent?bi(e,t):e.$options=zt(_i(e.constructor),t||{},e),e._renderProxy=e,e._self=e,xn(e),Tn(e),vn(e),qn(e,"beforeCreate"),Ae(e),ri(e),De(e),qn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function bi(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function _i(t){var e=t.options;if(t.super){var n=_i(t.super),i=t.superOptions;if(n!==i){t.superOptions=n;var r=wi(t);r&&M(t.extendOptions,r),e=t.options=zt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function wi(t){var e,n=t.options,i=t.sealedOptions;for(var r in n)n[r]!==i[r]&&(e||(e={}),e[r]=n[r]);return e}function Ei(t){this._init(t)}function Ci(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=O(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Ti(t){t.mixin=function(t){return this.options=zt(this.options,t),this}}function Si(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,r=t._Ctor||(t._Ctor={});if(r[i])return r[i];var o=t.name||n.options.name;var s=function(t){this._init(t)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=e++,s.options=zt(n.options,t),s["super"]=n,s.options.props&&ki(s),s.options.computed&&Ii(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,j.forEach(function(t){s[t]=n[t]}),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=t,s.sealedOptions=M({},s.options),r[i]=s,s}}function ki(t){var e=t.options.props;for(var n in e)ii(t.prototype,"_props",n)}function Ii(t){var e=t.options.computed;for(var n in e)hi(t.prototype,n,e[n])}function Di(t){j.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&h(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function Ai(t){return t&&(t.Ctor.options.name||t.tag)}function Oi(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function Mi(t,e){var n=t.cache,i=t.keys,r=t._vnode;for(var o in n){var s=n[o];if(s){var a=Ai(s.componentOptions);a&&!e(a)&&xi(n,o,i,r)}}}function xi(t,e,n,i){var r=t[e];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),t[e]=null,g(n,e)}gi(Ei),mi(Ei),An(Ei),Ln(Ei),gn(Ei);var Li=[String,RegExp,Array],Ni={name:"keep-alive",abstract:!0,props:{include:Li,exclude:Li,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)xi(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){Mi(t,function(t){return Oi(e,t)})}),this.$watch("exclude",function(e){Mi(t,function(t){return!Oi(e,t)})})},render:function(){var t=this.$slots.default,e=Cn(t),n=e&&e.componentOptions;if(n){var i=Ai(n),r=this,o=r.include,s=r.exclude;if(o&&(!i||!Oi(o,i))||s&&i&&Oi(s,i))return e;var a=this,u=a.cache,c=a.keys,h=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[h]?(e.componentInstance=u[h].componentInstance,g(c,h),c.push(h)):(u[h]=e,c.push(h),this.max&&c.length>parseInt(this.max)&&xi(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Ri={KeepAlive:Ni};function Pi(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:ft,extend:M,mergeOptions:zt,defineReactive:Nt},t.set=Rt,t.delete=Pt,t.nextTick=pe,t.observable=function(t){return Lt(t),t},t.options=Object.create(null),j.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,M(t.options.components,Ri),Ci(t),Ti(t),Si(t),Di(t)}Pi(Ei),Object.defineProperty(Ei.prototype,"$isServer",{get:ut}),Object.defineProperty(Ei.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ei,"FunctionalRenderContext",{value:Ye}),Ei.version="2.6.3";var Bi=m("style,class"),Fi=m("input,textarea,option,select,progress"),qi=function(t,e,n){return"value"===n&&Fi(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},ji=m("contenteditable,draggable,spellcheck"),Vi=m("events,caret,typing,plaintext-only"),Ui=function(t,e){return Ki(e)||"false"===e?"false":"contenteditable"===t&&Vi(e)?e:"true"},$i=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Wi="http://www.w3.org/1999/xlink",Hi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Qi=function(t){return Hi(t)?t.slice(6,t.length):""},Ki=function(t){return null==t||!1===t};function zi(t){var e=t.data,n=t,i=t;while(r(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(e=Gi(i.data,e));while(r(n=n.parent))n&&n.data&&(e=Gi(e,n.data));return Xi(e.staticClass,e.class)}function Gi(t,e){return{staticClass:Yi(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function Xi(t,e){return r(t)||r(e)?Yi(t,Ji(e)):""}function Yi(t,e){return t?e?t+" "+e:t:e||""}function Ji(t){return Array.isArray(t)?Zi(t):u(t)?tr(t):"string"===typeof t?t:""}function Zi(t){for(var e,n="",i=0,o=t.length;i<o;i++)r(e=Ji(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function tr(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var er={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},nr=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ir=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),rr=function(t){return nr(t)||ir(t)};function or(t){return ir(t)?"svg":"math"===t?"math":void 0}var sr=Object.create(null);function ar(t){if(!X)return!0;if(rr(t))return!1;if(t=t.toLowerCase(),null!=sr[t])return sr[t];var e=document.createElement(t);return t.indexOf("-")>-1?sr[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:sr[t]=/HTMLUnknownElement/.test(e.toString())}var ur=m("text,number,password,search,email,tel,url");function cr(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function hr(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function lr(t,e){return document.createElementNS(er[t],e)}function dr(t){return document.createTextNode(t)}function fr(t){return document.createComment(t)}function pr(t,e,n){t.insertBefore(e,n)}function vr(t,e){t.removeChild(e)}function mr(t,e){t.appendChild(e)}function yr(t){return t.parentNode}function gr(t){return t.nextSibling}function br(t){return t.tagName}function _r(t,e){t.textContent=e}function wr(t,e){t.setAttribute(e,"")}var Er=Object.freeze({createElement:hr,createElementNS:lr,createTextNode:dr,createComment:fr,insertBefore:pr,removeChild:vr,appendChild:mr,parentNode:yr,nextSibling:gr,tagName:br,setTextContent:_r,setStyleScope:wr}),Cr={create:function(t,e){Tr(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Tr(t,!0),Tr(e))},destroy:function(t){Tr(t,!0)}};function Tr(t,e){var n=t.data.ref;if(r(n)){var i=t.context,o=t.componentInstance||t.elm,s=i.$refs;e?Array.isArray(s[n])?g(s[n],o):s[n]===o&&(s[n]=void 0):t.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var Sr=new bt("",{},[]),kr=["create","activate","update","remove","destroy"];function Ir(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&Dr(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Dr(t,e){if("input"!==t.tag)return!0;var n,i=r(n=t.data)&&r(n=n.attrs)&&n.type,o=r(n=e.data)&&r(n=n.attrs)&&n.type;return i===o||ur(i)&&ur(o)}function Ar(t,e,n){var i,o,s={};for(i=e;i<=n;++i)o=t[i].key,r(o)&&(s[o]=i);return s}function Or(t){var e,n,s={},u=t.modules,c=t.nodeOps;for(e=0;e<kr.length;++e)for(s[kr[e]]=[],n=0;n<u.length;++n)r(u[n][kr[e]])&&s[kr[e]].push(u[n][kr[e]]);function h(t){return new bt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function l(t,e){function n(){0===--n.listeners&&d(t)}return n.listeners=e,n}function d(t){var e=c.parentNode(t);r(e)&&c.removeChild(e,t)}function f(t,e,n,i,s,a,u){if(r(t.elm)&&r(a)&&(t=a[u]=Ct(t)),t.isRootInsert=!s,!p(t,e,n,i)){var h=t.data,l=t.children,d=t.tag;r(d)?(t.elm=t.ns?c.createElementNS(t.ns,d):c.createElement(d,t),E(t),b(t,l,e),r(h)&&w(t,e),g(n,t.elm,i)):o(t.isComment)?(t.elm=c.createComment(t.text),g(n,t.elm,i)):(t.elm=c.createTextNode(t.text),g(n,t.elm,i))}}function p(t,e,n,i){var s=t.data;if(r(s)){var a=r(t.componentInstance)&&s.keepAlive;if(r(s=s.hook)&&r(s=s.init)&&s(t,!1),r(t.componentInstance))return v(t,e),g(n,t.elm,i),o(a)&&y(t,e,n,i),!0}}function v(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,_(t)?(w(t,e),E(t)):(Tr(t),e.push(t))}function y(t,e,n,i){var o,a=t;while(a.componentInstance)if(a=a.componentInstance._vnode,r(o=a.data)&&r(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Sr,a);e.push(a);break}g(n,t.elm,i)}function g(t,e,n){r(t)&&(r(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var i=0;i<e.length;++i)f(e[i],n,t.elm,null,!0,e,i)}else a(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function _(t){while(t.componentInstance)t=t.componentInstance._vnode;return r(t.tag)}function w(t,n){for(var i=0;i<s.create.length;++i)s.create[i](Sr,t);e=t.data.hook,r(e)&&(r(e.create)&&e.create(Sr,t),r(e.insert)&&n.push(t))}function E(t){var e;if(r(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var n=t;while(n)r(e=n.context)&&r(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent}r(e=On)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function C(t,e,n,i,r,o){for(;i<=r;++i)f(n[i],o,t,e,!1,n,i)}function T(t){var e,n,i=t.data;if(r(i))for(r(e=i.hook)&&r(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)T(t.children[n])}function S(t,e,n,i){for(;n<=i;++n){var o=e[n];r(o)&&(r(o.tag)?(k(o),T(o)):d(o.elm))}}function k(t,e){if(r(e)||r(t.data)){var n,i=s.remove.length+1;for(r(e)?e.listeners+=i:e=l(t.elm,i),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&k(n,e),n=0;n<s.remove.length;++n)s.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else d(t.elm)}function I(t,e,n,o,s){var a,u,h,l,d=0,p=0,v=e.length-1,m=e[0],y=e[v],g=n.length-1,b=n[0],_=n[g],w=!s;while(d<=v&&p<=g)i(m)?m=e[++d]:i(y)?y=e[--v]:Ir(m,b)?(A(m,b,o,n,p),m=e[++d],b=n[++p]):Ir(y,_)?(A(y,_,o,n,g),y=e[--v],_=n[--g]):Ir(m,_)?(A(m,_,o,n,g),w&&c.insertBefore(t,m.elm,c.nextSibling(y.elm)),m=e[++d],_=n[--g]):Ir(y,b)?(A(y,b,o,n,p),w&&c.insertBefore(t,y.elm,m.elm),y=e[--v],b=n[++p]):(i(a)&&(a=Ar(e,d,v)),u=r(b.key)?a[b.key]:D(b,e,d,v),i(u)?f(b,o,t,m.elm,!1,n,p):(h=e[u],Ir(h,b)?(A(h,b,o,n,p),e[u]=void 0,w&&c.insertBefore(t,h.elm,m.elm)):f(b,o,t,m.elm,!1,n,p)),b=n[++p]);d>v?(l=i(n[g+1])?null:n[g+1].elm,C(t,l,n,p,g,o)):p>g&&S(t,e,d,v)}function D(t,e,n,i){for(var o=n;o<i;o++){var s=e[o];if(r(s)&&Ir(t,s))return o}}function A(t,e,n,a,u,h){if(t!==e){r(e.elm)&&r(a)&&(e=a[u]=Ct(e));var l=e.elm=t.elm;if(o(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?x(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var d,f=e.data;r(f)&&r(d=f.hook)&&r(d=d.prepatch)&&d(t,e);var p=t.children,v=e.children;if(r(f)&&_(e)){for(d=0;d<s.update.length;++d)s.update[d](t,e);r(d=f.hook)&&r(d=d.update)&&d(t,e)}i(e.text)?r(p)&&r(v)?p!==v&&I(l,p,v,n,h):r(v)?(r(t.text)&&c.setTextContent(l,""),C(l,null,v,0,v.length-1,n)):r(p)?S(l,p,0,p.length-1):r(t.text)&&c.setTextContent(l,""):t.text!==e.text&&c.setTextContent(l,e.text),r(f)&&r(d=f.hook)&&r(d=d.postpatch)&&d(t,e)}}}function O(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var M=m("attrs,class,staticClass,staticStyle,key");function x(t,e,n,i){var s,a=e.tag,u=e.data,c=e.children;if(i=i||u&&u.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(u)&&(r(s=u.hook)&&r(s=s.init)&&s(e,!0),r(s=e.componentInstance)))return v(e,n),!0;if(r(a)){if(r(c))if(t.hasChildNodes())if(r(s=u)&&r(s=s.domProps)&&r(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var h=!0,l=t.firstChild,d=0;d<c.length;d++){if(!l||!x(l,c[d],n,i)){h=!1;break}l=l.nextSibling}if(!h||l)return!1}else b(e,c,n);if(r(u)){var f=!1;for(var p in u)if(!M(p)){f=!0,w(e,n);break}!f&&u["class"]&&me(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,a){if(!i(e)){var u=!1,l=[];if(i(t))u=!0,f(e,l);else{var d=r(t.nodeType);if(!d&&Ir(t,e))A(t,e,l,null,null,a);else{if(d){if(1===t.nodeType&&t.hasAttribute(q)&&(t.removeAttribute(q),n=!0),o(n)&&x(t,e,l))return O(e,l,!0),t;t=h(t)}var p=t.elm,v=c.parentNode(p);if(f(e,l,p._leaveCb?null:v,c.nextSibling(p)),r(e.parent)){var m=e.parent,y=_(e);while(m){for(var g=0;g<s.destroy.length;++g)s.destroy[g](m);if(m.elm=e.elm,y){for(var b=0;b<s.create.length;++b)s.create[b](Sr,m);var w=m.data.hook.insert;if(w.merged)for(var E=1;E<w.fns.length;E++)w.fns[E]()}else Tr(m);m=m.parent}}r(v)?S(v,[t],0,0):r(t.tag)&&T(t)}}return O(e,l,u),e.elm}r(t)&&T(t)}}var Mr={create:xr,update:xr,destroy:function(t){xr(t,Sr)}};function xr(t,e){(t.data.directives||e.data.directives)&&Lr(t,e)}function Lr(t,e){var n,i,r,o=t===Sr,s=e===Sr,a=Rr(t.data.directives,t.context),u=Rr(e.data.directives,e.context),c=[],h=[];for(n in u)i=a[n],r=u[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Br(r,"update",e,t),r.def&&r.def.componentUpdated&&h.push(r)):(Br(r,"bind",e,t),r.def&&r.def.inserted&&c.push(r));if(c.length){var l=function(){for(var n=0;n<c.length;n++)Br(c[n],"inserted",e,t)};o?we(e,"insert",l):l()}if(h.length&&we(e,"postpatch",function(){for(var n=0;n<h.length;n++)Br(h[n],"componentUpdated",e,t)}),!o)for(n in a)u[n]||Br(a[n],"unbind",t,t,s)}var Nr=Object.create(null);function Rr(t,e){var n,i,r=Object.create(null);if(!t)return r;for(n=0;n<t.length;n++)i=t[n],i.modifiers||(i.modifiers=Nr),r[Pr(i)]=i,i.def=Gt(e.$options,"directives",i.name,!0);return r}function Pr(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Br(t,e,n,i,r){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,i,r)}catch(Es){ee(Es,n.context,"directive "+t.name+" "+e+" hook")}}var Fr=[Cr,Mr];function qr(t,e){var n=e.componentOptions;if((!r(n)||!1!==n.Ctor.options.inheritAttrs)&&(!i(t.data.attrs)||!i(e.data.attrs))){var o,s,a,u=e.elm,c=t.data.attrs||{},h=e.data.attrs||{};for(o in r(h.__ob__)&&(h=e.data.attrs=M({},h)),h)s=h[o],a=c[o],a!==s&&jr(u,o,s);for(o in(tt||nt)&&h.value!==c.value&&jr(u,"value",h.value),c)i(h[o])&&(Hi(o)?u.removeAttributeNS(Wi,Qi(o)):ji(o)||u.removeAttribute(o))}}function jr(t,e,n){t.tagName.indexOf("-")>-1?Vr(t,e,n):$i(e)?Ki(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):ji(e)?t.setAttribute(e,Ui(e,n)):Hi(e)?Ki(n)?t.removeAttributeNS(Wi,Qi(e)):t.setAttributeNS(Wi,e,n):Vr(t,e,n)}function Vr(t,e,n){if(Ki(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var Ur={create:qr,update:qr};function $r(t,e){var n=e.elm,o=e.data,s=t.data;if(!(i(o.staticClass)&&i(o.class)&&(i(s)||i(s.staticClass)&&i(s.class)))){var a=zi(e),u=n._transitionClasses;r(u)&&(a=Yi(a,Ji(u))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var Wr,Hr={create:$r,update:$r},Qr="__r",Kr="__c";function zr(t){if(r(t[Qr])){var e=tt?"change":"input";t[e]=[].concat(t[Qr],t[e]||[]),delete t[Qr]}r(t[Kr])&&(t.change=[].concat(t[Kr],t.change||[]),delete t[Kr])}function Gr(t,e,n){var i=Wr;return function r(){var o=e.apply(null,arguments);null!==o&&Jr(t,r,n,i)}}var Xr=se&&!(rt&&Number(rt[1])<=53);function Yr(t,e,n,i){if(Xr){var r=Kn,o=e;e=o._wrapper=function(t){if(t.timeStamp>=r||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Wr.addEventListener(t,e,st?{capture:n,passive:i}:n)}function Jr(t,e,n,i){(i||Wr).removeEventListener(t,e._wrapper||e,n)}function Zr(t,e){if(!i(t.data.on)||!i(e.data.on)){var n=e.data.on||{},r=t.data.on||{};Wr=e.elm,zr(n),_e(n,r,Yr,Jr,Gr,e.context),Wr=void 0}}var to,eo={create:Zr,update:Zr};function no(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var n,o,s=e.elm,a=t.data.domProps||{},u=e.data.domProps||{};for(n in r(u.__ob__)&&(u=e.data.domProps=M({},u)),a)i(u[n])&&(s[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n||o!==a[n])if("value"===n){s._value=o;var c=i(o)?"":String(o);io(s,c)&&(s.value=c)}else if("innerHTML"===n&&ir(s.tagName)&&i(s.innerHTML)){to=to||document.createElement("div"),to.innerHTML="<svg>"+o+"</svg>";var h=to.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(h.firstChild)s.appendChild(h.firstChild)}else s[n]=o}}}function io(t,e){return!t.composing&&("OPTION"===t.tagName||ro(t,e)||oo(t,e))}function ro(t,e){var n=!0;try{n=document.activeElement!==t}catch(Es){}return n&&t.value!==e}function oo(t,e){var n=t.value,i=t._vModifiers;if(r(i)){if(i.number)return v(n)!==v(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}var so={create:no,update:no},ao=w(function(t){var e={},n=/;(?![^(]*\))/g,i=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e});function uo(t){var e=co(t.style);return t.staticStyle?M(t.staticStyle,e):e}function co(t){return Array.isArray(t)?x(t):"string"===typeof t?ao(t):t}function ho(t,e){var n,i={};if(e){var r=t;while(r.componentInstance)r=r.componentInstance._vnode,r&&r.data&&(n=uo(r.data))&&M(i,n)}(n=uo(t.data))&&M(i,n);var o=t;while(o=o.parent)o.data&&(n=uo(o.data))&&M(i,n);return i}var lo,fo=/^--/,po=/\s*!important$/,vo=function(t,e,n){if(fo.test(e))t.style.setProperty(e,n);else if(po.test(n))t.style.setProperty(k(e),n.replace(po,""),"important");else{var i=yo(e);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)t.style[i]=n[r];else t.style[i]=n}},mo=["Webkit","Moz","ms"],yo=w(function(t){if(lo=lo||document.createElement("div").style,t=C(t),"filter"!==t&&t in lo)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<mo.length;n++){var i=mo[n]+e;if(i in lo)return i}});function go(t,e){var n=e.data,o=t.data;if(!(i(n.staticStyle)&&i(n.style)&&i(o.staticStyle)&&i(o.style))){var s,a,u=e.elm,c=o.staticStyle,h=o.normalizedStyle||o.style||{},l=c||h,d=co(e.data.style)||{};e.data.normalizedStyle=r(d.__ob__)?M({},d):d;var f=ho(e,!0);for(a in l)i(f[a])&&vo(u,a,"");for(a in f)s=f[a],s!==l[a]&&vo(u,a,null==s?"":s)}}var bo={create:go,update:go},_o=/\s+/;function wo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(_o).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Eo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(_o).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";while(n.indexOf(i)>=0)n=n.replace(i," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Co(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&M(e,To(t.name||"v")),M(e,t),e}return"string"===typeof t?To(t):void 0}}var To=w(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),So=X&&!et,ko="transition",Io="animation",Do="transition",Ao="transitionend",Oo="animation",Mo="animationend";So&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Do="WebkitTransition",Ao="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Oo="WebkitAnimation",Mo="webkitAnimationEnd"));var xo=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Lo(t){xo(function(){xo(t)})}function No(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),wo(t,e))}function Ro(t,e){t._transitionClasses&&g(t._transitionClasses,e),Eo(t,e)}function Po(t,e,n){var i=Fo(t,e),r=i.type,o=i.timeout,s=i.propCount;if(!r)return n();var a=r===ko?Ao:Mo,u=0,c=function(){t.removeEventListener(a,h),n()},h=function(e){e.target===t&&++u>=s&&c()};setTimeout(function(){u<s&&c()},o+1),t.addEventListener(a,h)}var Bo=/\b(transform|all)(,|$)/;function Fo(t,e){var n,i=window.getComputedStyle(t),r=(i[Do+"Delay"]||"").split(", "),o=(i[Do+"Duration"]||"").split(", "),s=qo(r,o),a=(i[Oo+"Delay"]||"").split(", "),u=(i[Oo+"Duration"]||"").split(", "),c=qo(a,u),h=0,l=0;e===ko?s>0&&(n=ko,h=s,l=o.length):e===Io?c>0&&(n=Io,h=c,l=u.length):(h=Math.max(s,c),n=h>0?s>c?ko:Io:null,l=n?n===ko?o.length:u.length:0);var d=n===ko&&Bo.test(i[Do+"Property"]);return{type:n,timeout:h,propCount:l,hasTransform:d}}function qo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return jo(e)+jo(t[n])}))}function jo(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Vo(t,e){var n=t.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Co(t.data.transition);if(!i(o)&&!r(n._enterCb)&&1===n.nodeType){var s=o.css,a=o.type,c=o.enterClass,h=o.enterToClass,l=o.enterActiveClass,d=o.appearClass,f=o.appearToClass,p=o.appearActiveClass,m=o.beforeEnter,y=o.enter,g=o.afterEnter,b=o.enterCancelled,_=o.beforeAppear,w=o.appear,E=o.afterAppear,C=o.appearCancelled,T=o.duration,S=On,k=On.$vnode;while(k&&k.parent)k=k.parent,S=k.context;var I=!S._isMounted||!t.isRootInsert;if(!I||w||""===w){var D=I&&d?d:c,A=I&&p?p:l,O=I&&f?f:h,M=I&&_||m,x=I&&"function"===typeof w?w:y,L=I&&E||g,N=I&&C||b,R=v(u(T)?T.enter:T);0;var P=!1!==s&&!et,B=Wo(x),q=n._enterCb=F(function(){P&&(Ro(n,O),Ro(n,A)),q.cancelled?(P&&Ro(n,D),N&&N(n)):L&&L(n),n._enterCb=null});t.data.show||we(t,"insert",function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),x&&x(n,q)}),M&&M(n),P&&(No(n,D),No(n,A),Lo(function(){Ro(n,D),q.cancelled||(No(n,O),B||($o(R)?setTimeout(q,R):Po(n,a,q)))})),t.data.show&&(e&&e(),x&&x(n,q)),P||B||q()}}}function Uo(t,e){var n=t.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Co(t.data.transition);if(i(o)||1!==n.nodeType)return e();if(!r(n._leaveCb)){var s=o.css,a=o.type,c=o.leaveClass,h=o.leaveToClass,l=o.leaveActiveClass,d=o.beforeLeave,f=o.leave,p=o.afterLeave,m=o.leaveCancelled,y=o.delayLeave,g=o.duration,b=!1!==s&&!et,_=Wo(f),w=v(u(g)?g.leave:g);0;var E=n._leaveCb=F(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Ro(n,h),Ro(n,l)),E.cancelled?(b&&Ro(n,c),m&&m(n)):(e(),p&&p(n)),n._leaveCb=null});y?y(C):C()}function C(){E.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),b&&(No(n,c),No(n,l),Lo(function(){Ro(n,c),E.cancelled||(No(n,h),_||($o(w)?setTimeout(E,w):Po(n,a,E)))})),f&&f(n,E),b||_||E())}}function $o(t){return"number"===typeof t&&!isNaN(t)}function Wo(t){if(i(t))return!1;var e=t.fns;return r(e)?Wo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Ho(t,e){!0!==e.data.show&&Vo(e)}var Qo=X?{create:Ho,activate:Ho,remove:function(t,e){!0!==t.data.show?Uo(t,e):e()}}:{},Ko=[Ur,Hr,eo,so,bo,Qo],zo=Ko.concat(Fr),Go=Or({nodeOps:Er,modules:zo});et&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&is(t,"input")});var Xo={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?we(n,"postpatch",function(){Xo.componentUpdated(t,e,n)}):Yo(t,e,n.context),t._vOptions=[].map.call(t.options,ts)):("textarea"===n.tag||ur(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",es),t.addEventListener("compositionend",ns),t.addEventListener("change",ns),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Yo(t,e,n.context);var i=t._vOptions,r=t._vOptions=[].map.call(t.options,ts);if(r.some(function(t,e){return!P(t,i[e])})){var o=t.multiple?e.value.some(function(t){return Zo(t,r)}):e.value!==e.oldValue&&Zo(e.value,r);o&&is(t,"change")}}}};function Yo(t,e,n){Jo(t,e,n),(tt||nt)&&setTimeout(function(){Jo(t,e,n)},0)}function Jo(t,e,n){var i=e.value,r=t.multiple;if(!r||Array.isArray(i)){for(var o,s,a=0,u=t.options.length;a<u;a++)if(s=t.options[a],r)o=B(i,ts(s))>-1,s.selected!==o&&(s.selected=o);else if(P(ts(s),i))return void(t.selectedIndex!==a&&(t.selectedIndex=a));r||(t.selectedIndex=-1)}}function Zo(t,e){return e.every(function(e){return!P(e,t)})}function ts(t){return"_value"in t?t._value:t.value}function es(t){t.target.composing=!0}function ns(t){t.target.composing&&(t.target.composing=!1,is(t.target,"input"))}function is(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function rs(t){return!t.componentInstance||t.data&&t.data.transition?t:rs(t.componentInstance._vnode)}var os={bind:function(t,e,n){var i=e.value;n=rs(n);var r=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&r?(n.data.show=!0,Vo(n,function(){t.style.display=o})):t.style.display=i?o:"none"},update:function(t,e,n){var i=e.value,r=e.oldValue;if(!i!==!r){n=rs(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,i?Vo(n,function(){t.style.display=t.__vOriginalDisplay}):Uo(n,function(){t.style.display="none"})):t.style.display=i?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,i,r){r||(t.style.display=t.__vOriginalDisplay)}},ss={model:Xo,show:os},as={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function us(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?us(Cn(e.children)):t}function cs(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var r=n._parentListeners;for(var o in r)e[C(o)]=r[o];return e}function hs(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function ls(t){while(t=t.parent)if(t.data.transition)return!0}function ds(t,e){return e.key===t.key&&e.tag===t.tag}var fs=function(t){return t.tag||En(t)},ps=function(t){return"show"===t.name},vs={name:"transition",props:as,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(fs),n.length)){0;var i=this.mode;0;var r=n[0];if(ls(this.$vnode))return r;var o=us(r);if(!o)return r;if(this._leaving)return hs(t,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var u=(o.data||(o.data={})).transition=cs(this),c=this._vnode,h=us(c);if(o.data.directives&&o.data.directives.some(ps)&&(o.data.show=!0),h&&h.data&&!ds(o,h)&&!En(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var l=h.data.transition=M({},u);if("out-in"===i)return this._leaving=!0,we(l,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),hs(t,r);if("in-out"===i){if(En(o))return c;var d,f=function(){d()};we(u,"afterEnter",f),we(u,"enterCancelled",f),we(l,"delayLeave",function(t){d=t})}}return r}}},ms=M({tag:String,moveClass:String},as);delete ms.mode;var ys={props:ms,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var r=Mn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],s=cs(this),a=0;a<r.length;a++){var u=r[a];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=s;else;}if(i){for(var c=[],h=[],l=0;l<i.length;l++){var d=i[l];d.data.transition=s,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?c.push(d):h.push(d)}this.kept=t(e,null,c),this.removed=h}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(gs),t.forEach(bs),t.forEach(_s),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,i=n.style;No(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Ao,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Ao,t),n._moveCb=null,Ro(n,e))})}}))},methods:{hasMove:function(t,e){if(!So)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Eo(n,t)}),wo(n,e),n.style.display="none",this.$el.appendChild(n);var i=Fo(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}};function gs(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function bs(t){t.data.newPos=t.elm.getBoundingClientRect()}function _s(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,r=e.top-n.top;if(i||r){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}var ws={Transition:vs,TransitionGroup:ys};Ei.config.mustUseProp=qi,Ei.config.isReservedTag=rr,Ei.config.isReservedAttr=Bi,Ei.config.getTagNamespace=or,Ei.config.isUnknownElement=ar,M(Ei.options.directives,ss),M(Ei.options.components,ws),Ei.prototype.__patch__=X?Go:L,Ei.prototype.$mount=function(t,e){return t=t&&X?cr(t):void 0,Nn(this,t,e)},X&&setTimeout(function(){U.devtools&&ct&&ct.emit("init",Ei)},0),e["a"]=Ei}).call(this,n("c8ba"))},"2b10":function(t,e,n){var i=n("235a");i(i.P,"String",{repeat:n("8115")})},"2b4c":function(t,e,n){var i=n("5537")("wks"),r=n("ca5a"),o=n("7726").Symbol,s="function"==typeof o,a=t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))};a.store=i},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2fde":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"31f4":function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},"32e9":function(t,e,n){var i=n("86cc"),r=n("4630");t.exports=n("9e1e")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},3358:function(t,e,n){var i=n("669d"),r=n("a313"),o=n("8d98")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},"33a4":function(t,e,n){var i=n("84f2"),r=n("2b4c")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},"34f6":function(t,e,n){n("b3a3"),t.exports=n("02eb").Array.find},"386b":function(t,e,n){var i=n("5ca1"),r=n("79e5"),o=n("be13"),s=/"/g,a=function(t,e,n,i){var r=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},"38fd":function(t,e,n){var i=n("69a8"),r=n("4bf8"),o=n("613b")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"3b03":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},"3b2a":function(t,e,n){var i=n("53ff")("meta"),r=n("669d"),o=n("8343"),s=n("cad0").f,a=0,u=Object.isExtensible||function(){return!0},c=!n("eb5a")(function(){return u(Object.preventExtensions({}))}),h=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},l=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";h(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[i].w},f=function(t){return c&&p.NEED&&u(t)&&!o(t,i)&&h(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:l,getWeak:d,onFreeze:f}},"3df3":function(t,e,n){var i=n("669d"),r=n("8187"),o=n("8d98")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},4045:function(t,e,n){var i=n("8187"),r=n("8d98")("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},"41a0":function(t,e,n){"use strict";var i=n("2aeb"),r=n("4630"),o=n("7f20"),s={};n("32e9")(s,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},"42d9":function(t,e){t.exports={}},4588:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},"45ba":function(t,e,n){var i=n("cad0"),r=n("5051"),o=n("f40b");t.exports=n("948a")?Object.defineProperties:function(t,e){r(t);var n,s=o(e),a=s.length,u=0;while(a>u)i.f(t,n=s[u++],e[n]);return t}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4a59":function(t,e,n){var i=n("9b43"),r=n("1fa8"),o=n("33a4"),s=n("cb7c"),a=n("9def"),u=n("27ee"),c={},h={};e=t.exports=function(t,e,n,l,d){var f,p,v,m,y=d?function(){return t}:u(t),g=i(n,l,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(f=a(t.length);f>b;b++)if(m=e?g(s(p=t[b])[0],p[1]):g(t[b]),m===c||m===h)return m}else for(v=y.call(t);!(p=v.next()).done;)if(m=r(v,g,p.value,e),m===c||m===h)return m};e.BREAK=c,e.RETURN=h},"4bf8":function(t,e,n){var i=n("be13");t.exports=function(t){return Object(i(t))}},"4c35":function(t,e,n){var i=n("aad8"),r=n("1982"),o=n("8343"),s=n("53ff")("src"),a="toString",u=Function[a],c=(""+u).split(a);n("02eb").inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||r(n,s,t[e]?""+t[e]:c.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||u.call(this)})},"4c63":function(t,e,n){n("153c"),t.exports=n("02eb").Object.assign},"4d5c":function(t,e,n){(function(n){var i,r,o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();
/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */
/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */
(function(t){window.cash=t()})(function(){var t,e=document,n=window,i=Array.prototype,r=i.slice,o=i.filter,s=i.push,a=function(){},u=function(t){return typeof t===typeof a&&t.call},c=function(t){return"string"===typeof t},h=/^#[\w-]*$/,l=/^\.[\w-]*$/,d=/<.+>/,f=/^\w+$/;function p(t,n){n=n||e;var i=l.test(t)?n.getElementsByClassName(t.slice(1)):f.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t);return i}function v(n){if(!t){t=e.implementation.createHTMLDocument(null);var i=t.createElement("base");i.href=e.location.href,t.head.appendChild(i)}return t.body.innerHTML=n,t.body.childNodes}function m(t){"loading"!==e.readyState?t():e.addEventListener("DOMContentLoaded",t)}function y(t,i){if(!t)return this;if(t.cash&&t!==n)return t;var r,o=t,s=0;if(c(t))o=h.test(t)?e.getElementById(t.slice(1)):d.test(t)?v(t):p(t,i);else if(u(t))return m(t),this;if(!o)return this;if(o.nodeType||o===n)this[0]=o,this.length=1;else for(r=this.length=o.length;s<r;s++)this[s]=o[s];return this}function g(t,e){return new y(t,e)}var b=g.fn=g.prototype=y.prototype={cash:!0,length:0,push:s,splice:i.splice,map:i.map,init:y};function _(t,e){for(var n=t.length,i=0;i<n;i++)if(!1===e.call(t[i],t[i],i,t))break}function w(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector);return!!n&&n.call(t,e)}function E(t){return c(t)?w:t.cash?function(e){return t.is(e)}:function(t,e){return t===e}}function C(t){return g(r.call(t).filter(function(t,e,n){return n.indexOf(t)===e}))}Object.defineProperty(b,"constructor",{value:g}),g.parseHTML=v,g.noop=a,g.isFunction=u,g.isString=c,g.extend=b.extend=function(t){t=t||{};var e=r.call(arguments),n=e.length,i=1;for(1===e.length&&(t=this,i=0);i<n;i++)if(e[i])for(var o in e[i])e[i].hasOwnProperty(o)&&(t[o]=e[i][o]);return t},g.extend({merge:function(t,e){for(var n=+e.length,i=t.length,r=0;r<n;i++,r++)t[i]=e[r];return t.length=i,t},each:_,matches:w,unique:C,isArray:Array.isArray,isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}});var T=g.uid="_cash"+Date.now();function S(t){return t[T]=t[T]||{}}function k(t,e,n){return S(t)[e]=n}function I(t,e){var n=S(t);return void 0===n[e]&&(n[e]=t.dataset?t.dataset[e]:g(t).attr("data-"+e)),n[e]}function D(t,e){var n=S(t);n?delete n[e]:t.dataset?delete t.dataset[e]:g(t).removeAttr("data-"+name)}b.extend({data:function(t,e){if(c(t))return void 0===e?I(this[0],t):this.each(function(n){return k(n,t,e)});for(var n in t)this.data(n,t[n]);return this},removeData:function(t){return this.each(function(e){return D(e,t)})}});var A=/\S+/g;function O(t){return c(t)&&t.match(A)}function M(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function x(t,e,n){t.classList?t.classList.add(e):n.indexOf(" "+e+" ")&&(t.className+=" "+e)}function L(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(e,"")}b.extend({addClass:function(t){var e=O(t);return e?this.each(function(t){var n=" "+t.className+" ";_(e,function(e){x(t,e,n)})}):this},attr:function(t,e){if(t){if(c(t))return void 0===e?this[0]?this[0].getAttribute?this[0].getAttribute(t):this[0][t]:void 0:this.each(function(n){n.setAttribute?n.setAttribute(t,e):n[t]=e});for(var n in t)this.attr(n,t[n]);return this}},hasClass:function(t){var e=!1,n=O(t);return n&&n.length&&this.each(function(t){return e=M(t,n[0]),!e}),e},prop:function(t,e){if(c(t))return void 0===e?this[0][t]:this.each(function(n){n[t]=e});for(var n in t)this.prop(n,t[n]);return this},removeAttr:function(t){return this.each(function(e){e.removeAttribute?e.removeAttribute(t):delete e[t]})},removeClass:function(t){if(!arguments.length)return this.attr("class","");var e=O(t);return e?this.each(function(t){_(e,function(e){L(t,e)})}):this},removeProp:function(t){return this.each(function(e){delete e[t]})},toggleClass:function(t,e){if(void 0!==e)return this[e?"addClass":"removeClass"](t);var n=O(t);return n?this.each(function(t){var e=" "+t.className+" ";_(n,function(n){M(t,n)?L(t,n):x(t,n,e)})}):this}}),b.extend({add:function(t,e){return C(g.merge(this,g(t,e)))},each:function(t){return _(this,t),this},eq:function(t){return g(this.get(t))},filter:function(t){if(!t)return this;var e=u(t)?t:E(t);return g(o.call(this,function(n){return e(n,t)}))},first:function(){return this.eq(0)},get:function(t){return void 0===t?r.call(this):t<0?this[t+this.length]:this[t]},index:function(t){var e=t?g(t)[0]:this[0],n=t?this:g(e).parent().children();return r.call(n).indexOf(e)},last:function(){return this.eq(-1)}});var N=function(){var t=/(?:^\w|[A-Z]|\b\w)/g,e=/[\s-_]+/g;return function(n){return n.replace(t,function(t,e){return t[0===e?"toLowerCase":"toUpperCase"]()}).replace(e,"")}}(),R=function(){var t={},e=document,n=e.createElement("div"),i=n.style;return function(e){if(e=N(e),t[e])return t[e];var n=e.charAt(0).toUpperCase()+e.slice(1),r=["webkit","moz","ms","o"],o=(e+" "+r.join(n+" ")+n).split(" ");return _(o,function(n){if(n in i)return t[n]=e=t[e]=n,!1}),t[e]}}();function P(t,e){return parseInt(n.getComputedStyle(t[0],null)[e],10)||0}function B(t,e,n){var i=I(t,"_cashEvents")||k(t,"_cashEvents",{});i[e]=i[e]||[],i[e].push(n),t.addEventListener(e,n)}function F(t,e,n){var i,r=I(t,"_cashEvents"),o=r&&r[e];o&&(n?(t.removeEventListener(e,n),i=o.indexOf(n),i>=0&&o.splice(i,1)):(_(o,function(n){t.removeEventListener(e,n)}),o=[]))}function q(t,e){return"&"+encodeURIComponent(t)+"="+encodeURIComponent(e).replace(/%20/g,"+")}function j(t){var e=[];return _(t.options,function(t){t.selected&&e.push(t.value)}),e.length?e:null}function V(t){var e=t.selectedIndex;return e>=0?t.options[e].value:null}function U(t){var e=t.type;if(!e)return null;switch(e.toLowerCase()){case"select-one":return V(t);case"select-multiple":return j(t);case"radio":return t.checked?t.value:null;case"checkbox":return t.checked?t.value:null;default:return t.value?t.value:null}}function $(t,e,n){if(n){var i=t.childNodes[0];t.insertBefore(e,i)}else t.appendChild(e)}function W(t,e,n){var i=c(e);i||!e.length?_(t,i?function(t){return t.insertAdjacentHTML(n?"afterbegin":"beforeend",e)}:function(t,i){return $(t,0===i?e:e.cloneNode(!0),n)}):_(e,function(e){return W(t,e,n)})}g.prefixedProp=R,g.camelCase=N,b.extend({css:function(t,e){if(c(t))return t=R(t),arguments.length>1?this.each(function(n){return n.style[t]=e}):n.getComputedStyle(this[0])[t];for(var i in t)this.css(i,t[i]);return this}}),_(["Width","Height"],function(t){var e=t.toLowerCase();b[e]=function(){return this[0].getBoundingClientRect()[e]},b["inner"+t]=function(){return this[0]["client"+t]},b["outer"+t]=function(e){return this[0]["offset"+t]+(e?P(this,"margin"+("Width"===t?"Left":"Top"))+P(this,"margin"+("Width"===t?"Right":"Bottom")):0)}}),b.extend({off:function(t,e){return this.each(function(n){return F(n,t,e)})},on:function(t,e,n,i){var r;if(!c(t)){for(var o in t)this.on(o,e,t[o]);return this}return u(e)&&(n=e,e=null),"ready"===t?(m(n),this):(e&&(r=n,n=function(t){var n=t.target;while(!w(n,e)){if(n===this||null===n)return!1;n=n.parentNode}n&&r.call(n,t)}),this.each(function(e){var r=n;i&&(r=function(){n.apply(this,arguments),F(e,t,r)}),B(e,t,r)}))},one:function(t,e,n){return this.on(t,e,n,!0)},ready:m,trigger:function(t,e){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!1),n=this.extend(n,e),this.each(function(t){return t.dispatchEvent(n)})}}}),b.extend({serialize:function(){var t="";return _(this[0].elements||this,function(e){if(!e.disabled&&"FIELDSET"!==e.tagName){var n=e.name;switch(e.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var i=U(e);null!==i&&_(i,function(e){t+=q(n,e)});break;default:var r=U(e);null!==r&&(t+=q(n,r))}}}),t.substr(1)},val:function(t){return void 0===t?U(this[0]):this.each(function(e){return e.value=t})}}),b.extend({after:function(t){return g(t).insertAfter(this),this},append:function(t){return W(this,t),this},appendTo:function(t){return W(g(t),this),this},before:function(t){return g(t).insertBefore(this),this},clone:function(){return g(this.map(function(t){return t.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(t){if(void 0===t)return this[0].innerHTML;var e=t.nodeType?t[0].outerHTML:t;return this.each(function(t){return t.innerHTML=e})},insertAfter:function(t){var e=this;return g(t).each(function(t,n){var i=t.parentNode,r=t.nextSibling;e.each(function(t){i.insertBefore(0===n?t:t.cloneNode(!0),r)})}),this},insertBefore:function(t){var e=this;return g(t).each(function(t,n){var i=t.parentNode;e.each(function(e){i.insertBefore(0===n?e:e.cloneNode(!0),t)})}),this},prepend:function(t){return W(this,t,!0),this},prependTo:function(t){return W(g(t),this,!0),this},remove:function(){return this.each(function(t){if(t.parentNode)return t.parentNode.removeChild(t)})},text:function(t){return void 0===t?this[0].textContent:this.each(function(e){return e.textContent=t})}});var H=e.documentElement;return b.extend({position:function(){var t=this[0];return{left:t.offsetLeft,top:t.offsetTop}},offset:function(){var t=this[0].getBoundingClientRect();return{top:t.top+n.pageYOffset-H.clientTop,left:t.left+n.pageXOffset-H.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),b.extend({children:function(t){var e=[];return this.each(function(t){s.apply(e,t.children)}),e=C(e),t?e.filter(function(e){return w(e,t)}):e},closest:function(t){return!t||this.length<1?g():this.is(t)?this.filter(t):this.parent().closest(t)},is:function(t){if(!t)return!1;var e=!1,n=E(t);return this.each(function(i){return e=n(i,t),!e}),e},find:function(t){if(!t||t.nodeType)return g(t&&this.has(t).length?t:null);var e=[];return this.each(function(n){s.apply(e,p(t,n))}),C(e)},has:function(t){var e=c(t)?function(e){return 0!==p(t,e).length}:function(e){return e.contains(t)};return this.filter(e)},next:function(){return g(this[0].nextElementSibling)},not:function(t){if(!t)return this;var e=E(t);return this.filter(function(n){return!e(n,t)})},parent:function(){var t=[];return this.each(function(e){e&&e.parentNode&&t.push(e.parentNode)}),C(t)},parents:function(t){var n,i=[];return this.each(function(r){n=r;while(n&&n.parentNode&&n!==e.body.parentNode)n=n.parentNode,(!t||t&&w(n,t))&&i.push(n)}),C(i)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(t){var e=this.parent().children(t),n=this[0];return e.filter(function(t){return t!==n})}}),g});var h=function(){function t(e,n,i){c(this,t),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var r=e.getInstance(n);r&&r.destroy(),this.el=n,this.$el=cash(n)}return s(t,null,[{key:"init",value:function(t,e,n){var i=null;if(e instanceof Element)i=new t(e,n);else if(e&&(e.jquery||e.cash||e instanceof NodeList)){for(var r=[],o=0;o<e.length;o++)r.push(new t(e[o],n));i=r}return i}}]),t}();(function(t){t.Package?M={}:t.M={},M.jQueryLoaded=!!t.jQuery})(window),i=[],r=function(){return M}.apply(e,i),void 0===r||(t.exports=r),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var l=function(t){M.keyDown=!0,t.which!==M.keys.TAB&&t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},d=function(t){M.keyDown=!1,t.which!==M.keys.TAB&&t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},f=function(t){M.keyDown&&document.body.classList.add("keyboard-focused")},p=function(t){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",l,!0),document.addEventListener("keyup",d,!0),document.addEventListener("focus",f,!0),document.addEventListener("blur",p,!0),M.initializeJqueryWrapper=function(t,e,n){jQuery.fn[e]=function(i){if(t.prototype[i]){var r=Array.prototype.slice.call(arguments,1);if("get"===i.slice(0,3)){var o=this.first()[0][n];return o[i].apply(o,r)}return this.each(function(){var t=this[n];t[i].apply(t,r)})}if("object"===typeof i||!i)return t.init(this,arguments[0]),this;jQuery.error("Method "+i+" does not exist on jQuery."+e)}},M.AutoInit=function(t){var e=t||document.body,n={Autocomplete:e.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:e.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:e.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:e.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:e.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:e.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:e.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:e.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:e.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:e.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:e.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:e.querySelectorAll("select:not(.no-autoinit)"),Sidenav:e.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:e.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:e.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:e.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:e.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:e.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n){var r=M[i];r.init(n[i])}},M.objectSelectorString=function(t){var e=t.prop("tagName")||"",n=t.attr("id")||"",i=t.attr("class")||"";return(e+n+i).replace(/\s/g,"")},M.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),M.escapeHash=function(t){return t.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(t){var e=$(t),n=e.add(e.parents()),i=!1;return n.each(function(){if("fixed"===$(this).css("position"))return i=!0,!1}),i},M.checkWithinContainer=function(t,e,n){var i={top:!1,right:!1,bottom:!1,left:!1},r=t.getBoundingClientRect(),o=t===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,s=t.scrollLeft,a=t.scrollTop,u=e.left-s,c=e.top-a;return(u<r.left+n||u<n)&&(i.left=!0),(u+e.width>r.right-n||u+e.width>window.innerWidth-n)&&(i.right=!0),(c<r.top+n||c<n)&&(i.top=!0),(c+e.height>o-n||c+e.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(t,e,n,i){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},o="visible"===getComputedStyle(e).overflow,s=e.getBoundingClientRect(),a=Math.min(s.height,window.innerHeight),u=Math.min(s.width,window.innerWidth),c=t.getBoundingClientRect(),h=e.scrollLeft,l=e.scrollTop,d=n.left-h,f=n.top-l,p=n.top+c.height-l;return r.spaceOnRight=o?window.innerWidth-(c.left+n.width):u-(d+n.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=o?c.right-n.width:d-n.width+c.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=o?window.innerHeight-(c.top+n.height+i):a-(f+n.height+i),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=o?c.bottom-(n.height+i):p-(n.height-i),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(t){return null==t?null:t===document.body||"visible"!==getComputedStyle(t).overflow?t:M.getOverflowParent(t.parentElement)},M.getIdFromTrigger=function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href"),e=e?e.slice(1):""),e},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};
/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */
var v=Date.now||function(){return(new Date).getTime()};
/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */M.throttle=function(t,e,n){var i=void 0,r=void 0,o=void 0,s=null,a=0;n||(n={});var u=function(){a=!1===n.leading?0:v(),s=null,o=t.apply(i,r),i=r=null};return function(){var c=v();a||!1!==n.leading||(a=c);var h=e-(c-a);return i=this,r=arguments,h<=0?(clearTimeout(s),s=null,a=c,o=t.apply(i,r),i=r=null):s||!1===n.trailing||(s=setTimeout(u,h)),o}};var m={scope:{}};m.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},m.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof n&&null!=n?n:t},m.global=m.getGlobal(this),m.SYMBOL_PREFIX="jscomp_symbol_",m.initSymbol=function(){m.initSymbol=function(){},m.global.Symbol||(m.global.Symbol=m.Symbol)},m.symbolCounter_=0,m.Symbol=function(t){return m.SYMBOL_PREFIX+(t||"")+m.symbolCounter_++},m.initSymbolIterator=function(){m.initSymbol();var t=m.global.Symbol.iterator;t||(t=m.global.Symbol.iterator=m.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&m.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return m.arrayIterator(this)}}),m.initSymbolIterator=function(){}},m.arrayIterator=function(t){var e=0;return m.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},m.iteratorPrototype=function(t){return m.initSymbolIterator(),t={next:t},t[m.global.Symbol.iterator]=function(){return this},t},m.array=m.array||{},m.iteratorFromArray=function(t,e){m.initSymbolIterator(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},m.polyfill=function(t,e,n,i){if(e){for(n=m.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&null!=e&&m.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},m.polyfill("Array.prototype.keys",function(t){return t||function(){return m.iteratorFromArray(this,function(t){return t})}},"es6-impl","es3");var y=this;(function(t){M.anime=t()})(function(){function t(t){if(!F.col(t))try{return document.querySelectorAll(t)}catch(e){}}function e(t,e){for(var n=t.length,i=2<=arguments.length?arguments[1]:void 0,r=[],o=0;o<n;o++)if(o in t){var s=t[o];e.call(i,s,o,t)&&r.push(s)}return r}function n(t){return t.reduce(function(t,e){return t.concat(F.arr(e)?n(e):e)},[])}function i(e){return F.arr(e)?e:(F.str(e)&&(e=t(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function r(t,e){return t.some(function(t){return t===e})}function o(t){var e,n={};for(e in t)n[e]=t[e];return n}function s(t,e){var n,i=o(t);for(n in t)i[n]=e.hasOwnProperty(n)?e[n]:t[n];return i}function a(t,e){var n,i=o(t);for(n in e)i[n]=F.und(t[n])?e[n]:t[n];return i}function u(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,i){return e+e+n+n+i+i});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);t=parseInt(e[1],16);var n=parseInt(e[2],16);e=parseInt(e[3],16);return"rgba("+t+","+n+","+e+",1)"}function c(t){function e(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t);t=parseInt(n[1])/360;var i=parseInt(n[2])/100,r=parseInt(n[3])/100;n=n[4]||1;if(0==i)r=i=t=r;else{var o=.5>r?r*(1+i):r+i-r*i,s=2*r-o;r=e(s,o,t+1/3),i=e(s,o,t);t=e(s,o,t-1/3)}return"rgba("+255*r+","+255*i+","+255*t+","+n+")"}function h(t){if(t=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t))return t[2]}function l(t){return-1<t.indexOf("translate")||"perspective"===t?"px":-1<t.indexOf("rotate")||-1<t.indexOf("skew")?"deg":void 0}function d(t,e){return F.fnc(t)?t(e.target,e.id,e.total):t}function f(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function p(t,e){return F.dom(t)&&r(B,e)?"transform":F.dom(t)&&(t.getAttribute(e)||F.svg(t)&&t[e])?"attribute":F.dom(t)&&"transform"!==e&&f(t,e)?"css":null!=t[e]?"object":void 0}function v(t,n){var i=l(n);i=-1<n.indexOf("scale")?1:0+i;if(t=t.style.transform,!t)return i;for(var r=[],o=[],s=[],a=/(\w+)\((.+?)\)/g;r=a.exec(t);)o.push(r[1]),s.push(r[2]);return t=e(s,function(t,e){return o[e]===n}),t.length?t[0]:i}function m(t,e){switch(p(t,e)){case"transform":return v(t,e);case"css":return f(t,e);case"attribute":return t.getAttribute(e)}return t[e]||0}function g(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var i=h(t)||0;switch(e=parseFloat(e),t=parseFloat(t.replace(n[0],"")),n[0][0]){case"+":return e+t+i;case"-":return e-t+i;case"*":return e*t+i}}function b(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _(t){t=t.points;for(var e,n=0,i=0;i<t.numberOfItems;i++){var r=t.getItem(i);0<i&&(n+=b(e,r)),e=r}return n}function w(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*t.getAttribute("r");case"rect":return 2*t.getAttribute("width")+2*t.getAttribute("height");case"line":return b({x:t.getAttribute("x1"),y:t.getAttribute("y1")},{x:t.getAttribute("x2"),y:t.getAttribute("y2")});case"polyline":return _(t);case"polygon":var e=t.points;return _(t)+b(e.getItem(e.numberOfItems-1),e.getItem(0))}}function E(t,e){function n(n){return n=void 0===n?0:n,t.el.getPointAtLength(1<=e+n?e+n:0)}var i=n(),r=n(-1),o=n(1);switch(t.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(o.y-r.y,o.x-r.x)/Math.PI}}function C(t,e){var n,i=/-?\d*\.?\d+/g;if(n=F.pth(t)?t.totalLength:t,F.col(n))if(F.rgb(n)){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=r?"rgba("+r[1]+",1)":n}else n=F.hex(n)?u(n):F.hsl(n)?c(n):void 0;else r=(r=h(n))?n.substr(0,n.length-r.length):n,n=e&&!/\s/g.test(n)?r+e:r;return n+="",{original:n,numbers:n.match(i)?n.match(i).map(Number):[0],strings:F.str(t)||e?n.split(i):[]}}function T(t){return t=t?n(F.arr(t)?t.map(i):i(t)):[],e(t,function(t,e,n){return n.indexOf(t)===e})}function S(t){var e=T(t);return e.map(function(t,n){return{target:t,id:n,total:e.length}})}function k(t,e){var n=o(e);if(F.arr(t)){var r=t.length;2!==r||F.obj(t[0])?F.fnc(e.duration)||(n.duration=e.duration/r):t={value:t}}return i(t).map(function(t,n){return n=n?0:e.delay,t=F.obj(t)&&!F.pth(t)?t:{value:t},F.und(t.delay)&&(t.delay=n),t}).map(function(t){return a(t,n)})}function I(t,e){var n,i={};for(n in t){var r=d(t[n],e);F.arr(r)&&(r=r.map(function(t){return d(t,e)}),1===r.length&&(r=r[0])),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function D(t){return F.arr(t)?q.apply(this,t):j[t]}function A(t,e){var n;return t.tweens.map(function(i){i=I(i,e);var r=i.value,o=m(e.target,t.name),s=n?n.to.original:o,a=(s=F.arr(r)?r[0]:s,g(F.arr(r)?r[1]:r,s));o=h(a)||h(s)||h(o);return i.from=C(s,o),i.to=C(a,o),i.start=n?n.end:t.offset,i.end=i.start+i.delay+i.duration,i.easing=D(i.easing),i.elasticity=(1e3-Math.min(Math.max(i.elasticity,1),999))/1e3,i.isPath=F.pth(r),i.isColor=F.col(i.from.original),i.isColor&&(i.round=1),n=i})}function O(t,i){return e(n(t.map(function(t){return i.map(function(e){var n=p(t.target,e.name);if(n){var i=A(e,t);e={type:n,property:e.name,animatable:t,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}else e=void 0;return e})})),function(t){return!F.und(t)})}function M(t,e,n,i){var r="delay"===t;return e.length?(r?Math.min:Math.max).apply(Math,e.map(function(e){return e[t]})):r?i.delay:n.offset+i.delay+i.duration}function x(t){var e,n=s(R,t),i=s(P,t),r=S(t.targets),o=[],u=a(n,i);for(e in t)u.hasOwnProperty(e)||"targets"===e||o.push({name:e,offset:u.offset,tweens:k(t[e],i)});return t=O(r,o),a(n,{children:[],animatables:r,animations:t,duration:M("duration",t,n,i),delay:M("delay",t,n,i)})}function L(t){function n(){return window.Promise&&new Promise(function(t){return l=t})}function i(t){return p.reversed?p.duration-t:t}function r(t){for(var n=0,i={},r=p.animations,o=r.length;n<o;){var s=r[n],a=s.animatable,u=s.tweens,c=u.length-1,h=u[c];c&&(h=e(u,function(e){return t<e.end})[0]||h);u=Math.min(Math.max(t-h.start-h.delay,0),h.duration)/h.duration;for(var l=isNaN(u)?1:h.easing(u,h.elasticity),d=(u=h.to.strings,h.round),v=(c=[],void 0),m=(v=h.to.numbers.length,0);m<v;m++){var y=void 0,g=(y=h.to.numbers[m],h.from.numbers[m]);y=h.isPath?E(h.value,l*y):g+l*(y-g);d&&(h.isColor&&2<m||(y=Math.round(y*d)/d)),c.push(y)}if(h=u.length)for(v=u[0],l=0;l<h;l++)d=u[l+1],m=c[l],isNaN(m)||(v=d?v+(m+d):v+(m+" "));else v=c[0];V[s.type](a.target,s.property,v,i,a.id),s.currentValue=v,n++}if(n=Object.keys(i).length)for(r=0;r<n;r++)N||(N=f(document.body,"transform")?"transform":"-webkit-transform"),p.animatables[r].target.style[N]=i[r].join(" ");p.currentTime=t,p.progress=t/p.duration*100}function o(t){p[t]&&p[t](p)}function s(){p.remaining&&!0!==p.remaining&&p.remaining--}function a(t){var e=p.duration,a=p.offset,f=a+p.delay,v=p.currentTime,m=p.reversed,y=i(t);if(p.children.length){var g=p.children,b=g.length;if(y>=p.currentTime)for(var _=0;_<b;_++)g[_].seek(y);else for(;b--;)g[b].seek(y)}(y>=f||!e)&&(p.began||(p.began=!0,o("begin")),o("run")),y>a&&y<e?r(y):(y<=a&&0!==v&&(r(0),m&&s()),(y>=e&&v!==e||!e)&&(r(e),m||s())),o("update"),t>=e&&(p.remaining?(c=u,"alternate"===p.direction&&(p.reversed=!p.reversed)):(p.pause(),p.completed||(p.completed=!0,o("complete"),"Promise"in window&&(l(),d=n()))),h=0)}t=void 0===t?{}:t;var u,c,h=0,l=null,d=n(),p=x(t);return p.reset=function(){var t=p.direction,e=p.loop;for(p.currentTime=0,p.progress=0,p.paused=!0,p.began=!1,p.completed=!1,p.reversed="reverse"===t,p.remaining="alternate"===t&&1===e?2:e,r(0),t=p.children.length;t--;)p.children[t].reset()},p.tick=function(t){u=t,c||(c=u),a((h+u-c)*L.speed)},p.seek=function(t){a(i(t))},p.pause=function(){var t=U.indexOf(p);-1<t&&U.splice(t,1),p.paused=!0},p.play=function(){p.paused&&(p.paused=!1,c=0,h=i(p.currentTime),U.push(p),$||W())},p.reverse=function(){p.reversed=!p.reversed,c=0,h=i(p.currentTime)},p.restart=function(){p.pause(),p.reset(),p.play()},p.finished=d,p.reset(),p.autoplay&&p.play(),p}var N,R={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},P={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},B="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),F={arr:function(t){return Array.isArray(t)},obj:function(t){return-1<Object.prototype.toString.call(t).indexOf("Object")},pth:function(t){return F.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||F.svg(t)},str:function(t){return"string"===typeof t},fnc:function(t){return"function"===typeof t},und:function(t){return"undefined"===typeof t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return F.hex(t)||F.rgb(t)||F.hsl(t)}},q=function(){function t(t,e,n){return(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t}return function(e,n,i,r){if(0<=e&&1>=e&&0<=i&&1>=i){var o=new Float32Array(11);if(e!==n||i!==r)for(var s=0;11>s;++s)o[s]=t(.1*s,e,i);return function(s){if(e===n&&i===r)return s;if(0===s)return 0;if(1===s)return 1;for(var a=0,u=1;10!==u&&o[u]<=s;++u)a+=.1;--u;u=a+(s-o[u])/(o[u+1]-o[u])*.1;var c=3*(1-3*i+3*e)*u*u+2*(3*i-6*e)*u+3*e;if(.001<=c){for(a=0;4>a;++a){if(c=3*(1-3*i+3*e)*u*u+2*(3*i-6*e)*u+3*e,0===c)break;var h=t(u,e,i)-s;u=u-h/c}s=u}else if(0===c)s=u;else{u=a,a=a+.1;var l=0;do{h=u+(a-u)/2,c=t(h,e,i)-s,0<c?a=h:u=h}while(1e-7<Math.abs(c)&&10>++l);s=h}return t(s,n,r)}}}}(),j=function(){function t(t,e){return 0===t||1===t?t:-Math.pow(2,10*(t-1))*Math.sin(2*(t-1-e/(2*Math.PI)*Math.asin(1))*Math.PI/e)}var e,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),i={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],t],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,n){return 1-t(1-e,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,n){return.5>e?t(2*e,n)/2:1-t(-2*e+2,n)/2}]},r={linear:q(.25,.25,.75,.75)},o={};for(e in i)o.type=e,i[o.type].forEach(function(t){return function(e,i){r["ease"+t.type+n[i]]=F.fnc(e)?e:q.apply(y,e)}}(o)),o={type:o.type};return r}(),V={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){i[r]||(i[r]=[]),i[r].push(e+"("+n+")")}},U=[],$=0,W=function(){function t(){$=requestAnimationFrame(e)}function e(e){var n=U.length;if(n){for(var i=0;i<n;)U[i]&&U[i].tick(e),i++;t()}else cancelAnimationFrame($),$=0}return t}();return L.version="2.2.0",L.speed=1,L.running=U,L.remove=function(t){t=T(t);for(var e=U.length;e--;)for(var n=U[e],i=n.animations,o=i.length;o--;)r(t,i[o].animatable.target)&&(i.splice(o,1),i.length||n.pause())},L.getValue=m,L.path=function(e,n){var i=F.str(e)?t(e)[0]:e,r=n||100;return function(t){return{el:i,property:t,totalLength:w(i)*(r/100)}}},L.setDashoffset=function(t){var e=w(t);return t.setAttribute("stroke-dasharray",e),e},L.bezier=q,L.easings=j,L.timeline=function(t){var e=L(t);return e.pause(),e.duration=0,e.add=function(n){return e.children.forEach(function(t){t.began=!0,t.completed=!0}),i(n).forEach(function(n){var i=a(n,s(P,t||{}));i.targets=i.targets||t.targets,n=e.duration;var r=i.offset;i.autoplay=!1,i.direction=e.direction,i.offset=F.und(r)?n:g(r,n),e.began=!0,e.completed=!0,e.seek(i.offset),i=L(i),i.began=!0,i.completed=!0,i.duration>n&&(e.duration=i.duration),e.children.push(i)}),e.seek(0),e.reset(),e.autoplay&&e.restart(),e},e},L.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},L}),function(t,e){"use strict";var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));i.el.M_Collapsible=i,i.options=t.extend({},r.defaults,n),i.$headers=i.$el.children("li").children(".collapsible-header"),i.$headers.attr("tabindex",0),i._setupEventHandlers();var o=i.$el.children("li.active").children(".collapsible-body");return i.options.accordion?o.first().css("display","block"):o.css("display","block"),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(e){e.addEventListener("keydown",t._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var t=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(e){e.removeEventListener("keydown",t._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(e){var n=t(e.target).closest(".collapsible-header");if(e.target&&n.length){var i=n.closest(".collapsible");if(i[0]===this.el){var r=n.closest("li"),o=i.children("li"),s=r[0].classList.contains("active"),a=o.index(r);s?this.close(a):this.open(a)}}}},{key:"_handleCollapsibleKeydown",value:function(t){13===t.keyCode&&this._handleCollapsibleClickBound(t)}},{key:"_animateIn",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length){var r=i.children(".collapsible-body");e.remove(r[0]),r.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var o=r.css("padding-top"),s=r.css("padding-bottom"),a=r[0].scrollHeight;r.css({paddingTop:0,paddingBottom:0}),e({targets:r[0],height:a,paddingTop:o,paddingBottom:s,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(t){r.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"===typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,i[0])}})}}},{key:"_animateOut",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length){var r=i.children(".collapsible-body");e.remove(r[0]),r.css("overflow","hidden"),e({targets:r[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){r.css({height:"",overflow:"",padding:"",display:""}),"function"===typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,i[0])}})}}},{key:"open",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length&&!i[0].classList.contains("active")){if("function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,i[0]),this.options.accordion){var r=this.$el.children("li"),o=this.$el.children("li.active");o.each(function(e){var i=r.index(t(e));n.close(i)})}i[0].classList.add("active"),this._animateIn(e)}}},{key:"close",value:function(t){var e=this.$el.children("li").eq(t);e.length&&e[0].classList.contains("active")&&("function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,e[0]),e[0].classList.remove("active"),this._animateOut(t))}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Collapsible}},{key:"defaults",get:function(){return n}}]),r}(h);M.Collapsible=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"collapsible","M_Collapsible")}(cash,M.anime),function(t,e){"use strict";var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Dropdown=i,r._dropdowns.push(i),i.id=M.getIdFromTrigger(e),i.dropdownEl=document.getElementById(i.id),i.$dropdownEl=t(i.dropdownEl),i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.isScrollable=!1,i.isTouchMoving=!1,i.focusedIndex=-1,i.filterQuery=[],i.options.container?t(i.options.container).append(i.dropdownEl):i.$el.after(i.dropdownEl),i._makeDropdownFocusable(),i._resetFilterQueryBound=i._resetFilterQuery.bind(i),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),i._handleDocumentTouchmoveBound=i._handleDocumentTouchmove.bind(i),i._handleDropdownClickBound=i._handleDropdownClick.bind(i),i._handleDropdownKeydownBound=i._handleDropdownKeydown.bind(i),i._handleTriggerKeydownBound=i._handleTriggerKeydown.bind(i),i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),r._dropdowns.splice(r._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(t){t.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(e){var n=e.toElement||e.relatedTarget,i=!!t(n).closest(".dropdown-content").length,r=!1,o=t(n).closest(".dropdown-trigger");o.length&&o[0].M_Dropdown&&o[0].M_Dropdown.isOpen&&(r=!0),r||i||this.close()}},{key:"_handleDocumentClick",value:function(e){var n=this,i=t(e.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){n.close()},0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout(function(){n.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(t){t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ENTER||this.isOpen||(t.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(e){var n=t(e.target);n.closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(e){if("function"===typeof this.options.onItemClick){var n=t(e.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(e){if(e.which===M.keys.TAB)e.preventDefault(),this.close();else if(e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||!this.isOpen)if(e.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=t(n).find("a, button").first();i.length?i[0].click():n&&n.click()}else e.which===M.keys.ESC&&this.isOpen&&(e.preventDefault(),this.close());else{e.preventDefault();var r=e.which===M.keys.ARROW_DOWN?1:-1,o=this.focusedIndex,s=!1;do{if(o+=r,this.dropdownEl.children[o]&&-1!==this.dropdownEl.children[o].tabIndex){s=!0;break}}while(o<this.dropdownEl.children.length&&o>=0);s&&(this.focusedIndex=o,this._focusFocusedItem())}var a=String.fromCharCode(e.which).toLowerCase(),u=[9,13,27,38,40];if(a&&-1===u.indexOf(e.which)){this.filterQuery.push(a);var c=this.filterQuery.join(""),h=t(this.dropdownEl).find("li").filter(function(e){return 0===t(e).text().toLowerCase().indexOf(c)})[0];h&&(this.focusedIndex=t(h).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,t(this.dropdownEl).children().each(function(t){t.getAttribute("tabindex")||t.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var t=this.el.getBoundingClientRect(),e=this.dropdownEl.getBoundingClientRect(),n=e.height,i=e.width,r=t.left-e.left,o=t.top-e.top,s={left:r,top:o,height:n,width:i},a=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,u=M.checkPossibleAlignments(this.el,a,s,this.options.coverTrigger?0:t.height),c="top",h=this.options.alignment;if(o+=this.options.coverTrigger?0:t.height,this.isScrollable=!1,u.top||(u.bottom?c="bottom":(this.isScrollable=!0,u.spaceOnTop>u.spaceOnBottom?(c="bottom",n+=u.spaceOnTop,o-=u.spaceOnTop):n+=u.spaceOnBottom)),!u[h]){var l="left"===h?"right":"left";u[l]?h=l:u.spaceOnLeft>u.spaceOnRight?(h="right",i+=u.spaceOnLeft,r-=u.spaceOnLeft):(h="left",i+=u.spaceOnRight)}return"bottom"===c&&(o=o-e.height+(this.options.coverTrigger?t.height:0)),"right"===h&&(r=r-e.width+t.width),{x:r,y:o,verticalAlignment:c,horizontalAlignment:h,height:n,width:i}}},{key:"_animateIn",value:function(){var t=this;e.remove(this.dropdownEl),e({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(e){t.options.autoFocus&&t.dropdownEl.focus(),"function"===typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}})}},{key:"_animateOut",value:function(){var t=this;e.remove(this.dropdownEl),e({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(e){t._resetDropdownStyles(),"function"===typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}})}},{key:"_placeDropdown",value:function(){var t=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=t+"px";var e=this._getDropdownPosition();this.dropdownEl.style.left=e.x+"px",this.dropdownEl.style.top=e.y+"px",this.dropdownEl.style.height=e.height+"px",this.dropdownEl.style.width=e.width+"px",this.dropdownEl.style.transformOrigin=("left"===e.horizontalAlignment?"0":"100%")+" "+("top"===e.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Dropdown}},{key:"defaults",get:function(){return n}}]),r}(h);i._dropdowns=[],M.Dropdown=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"dropdown","M_Dropdown")}(cash,M.anime),function(t,e){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Modal=i,i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.id=i.$el.attr("id"),i._openingTrigger=void 0,i.$overlay=t('<div class="modal-overlay"></div>'),i.el.tabIndex=0,i._nthModalOpened=0,r._count++,i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){r._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===r._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===r._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(e){var n=t(e.target).closest(".modal-trigger");if(n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Modal;r&&r.open(n),e.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(e){var n=t(e.target).closest(".modal-close");n.length&&this.close()}},{key:"_handleKeydown",value:function(t){27===t.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(t){this.el.contains(t.target)||this._nthModalOpened!==r._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;t.extend(this.el.style,{display:"block",opacity:0}),t.extend(this.$overlay[0].style,{display:"block",opacity:0}),e({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var i={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"===typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(t.extend(i,{bottom:0,opacity:1}),e(i)):(t.extend(i,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),e(i))}},{key:"_animateOut",value:function(){var n=this;e({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var i={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"===typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?(t.extend(i,{bottom:"-100%",opacity:0}),e(i)):(t.extend(i,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),e(i))}},{key:"open",value:function(t){if(!this.isOpen)return this.isOpen=!0,r._modalsOpen++,this._nthModalOpened=r._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*r._modalsOpen,this.el.style.zIndex=1e3+2*r._modalsOpen+1,this._openingTrigger=t?t[0]:void 0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),e.remove(this.el),e.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,r._modalsOpen--,this._nthModalOpened=0,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===r._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),e.remove(this.el),e.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Modal}},{key:"defaults",get:function(){return n}}]),r}(h);i._modalsOpen=0,i._count=0,M.Modal=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"modal","M_Modal")}(cash,M.anime),function(t,e){"use strict";var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Materialbox=i,i.options=t.extend({},r.defaults,n),i.overlayActive=!1,i.doneAnimating=!0,i.placeholder=t("<div></div>").addClass("material-placeholder"),i.originalWidth=0,i.originalHeight=0,i.originInlineStyles=i.$el.attr("style"),i.caption=i.el.getAttribute("data-caption")||"",i.$el.before(i.placeholder),i.placeholder.append(i.$el),i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,t(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(t){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(t){27===t.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=t();var e=this.placeholder[0].parentNode;while(null!==e&&!t(e).is(document)){var n=t(e);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),void 0===this.ancestorsChanged?this.ancestorsChanged=n:this.ancestorsChanged=this.ancestorsChanged.add(n)),e=e.parentNode}}},{key:"_animateImageIn",value:function(){var t=this,n={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){t.doneAnimating=!0,"function"===typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(n.maxWidth=this.newWidth),"none"!==this.maxHeight&&(n.maxHeight=this.newHeight),e(n)}},{key:"_animateImageOut",value:function(){var t=this,n={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t.placeholder.css({height:"",width:"",position:"",top:"",left:""}),t.attrWidth&&t.$el.attr("width",t.attrWidth),t.attrHeight&&t.$el.attr("height",t.attrHeight),t.$el.removeAttr("style"),t.originInlineStyles&&t.$el.attr("style",t.originInlineStyles),t.$el.removeClass("active"),t.doneAnimating=!0,t.ancestorsChanged.length&&t.ancestorsChanged.css("overflow",""),"function"===typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}};e(n)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var n=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=t('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){n.doneAnimating&&n.close()}),this.$el.before(this.$overlay);var i=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*i.left+"px",top:-1*i.top+"px"}),e.remove(this.el),e.remove(this.$overlay[0]),e({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&e.remove(this.$photoCaption[0]),this.$photoCaption=t('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),t("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),e({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var r=0,o=this.originalWidth/this.windowWidth,s=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,o>s?(r=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*r):(r=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*r,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var t=this;this._updateVars(),this.doneAnimating=!1,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),e.remove(this.el),e.remove(this.$overlay[0]),""!==this.caption&&e.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),e({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t.overlayActive=!1,t.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&e({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t.$photoCaption.remove()}})}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Materialbox}},{key:"defaults",get:function(){return n}}]),r}(h);M.Materialbox=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"materialbox","M_Materialbox")}(cash,M.anime),function(t){"use strict";var e={responsiveThreshold:0},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_Parallax=r,r.options=t.extend({},i.defaults,n),r._enabled=window.innerWidth>r.options.responsiveThreshold,r.$img=r.$el.find("img").first(),r.$img.each(function(){var e=this;e.complete&&t(e).trigger("load")}),r._updateParallax(),r._setupEventHandlers(),r._setupStyles(),i._parallaxes.push(r),r}return u(i,n),s(i,[{key:"destroy",value:function(){i._parallaxes.splice(i._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(i._handleScrollThrottled=M.throttle(i._handleScroll,5),window.addEventListener("scroll",i._handleScrollThrottled),i._handleWindowResizeThrottled=M.throttle(i._handleWindowResize,5),window.addEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(window.removeEventListener("scroll",i._handleScrollThrottled),window.removeEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var t=this.$el.height()>0?this.el.parentNode.offsetHeight:500,e=this.$img[0].offsetHeight,n=e-t,i=this.$el.offset().top+t,r=this.$el.offset().top,o=M.getDocumentScrollTop(),s=window.innerHeight,a=o+s,u=(a-r)/(t+s),c=n*u;this._enabled?i>o&&r<o+s&&(this.$img[0].style.transform="translate3D(-50%, "+c+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Parallax}},{key:"_handleScroll",value:function(){for(var t=0;t<i._parallaxes.length;t++){var e=i._parallaxes[t];e._updateParallax.call(e)}}},{key:"_handleWindowResize",value:function(){for(var t=0;t<i._parallaxes.length;t++){var e=i._parallaxes[t];e._enabled=window.innerWidth>e.options.responsiveThreshold}}},{key:"defaults",get:function(){return e}}]),i}(h);n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(t,e){"use strict";var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Tabs=i,i.options=t.extend({},r.defaults,n),i.$tabLinks=i.$el.children("li.tab").children("a"),i.index=0,i._setupActiveTabLink(),i.options.swipeable?i._setupSwipeableTabs():i._setupNormalTabs(),i._setTabsAndTabWidth(),i._createIndicator(),i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(e){var n=this,i=t(e.target).closest("li.tab"),r=t(e.target).closest("a");if(r.length&&r.parent().hasClass("tab"))if(i.hasClass("disabled"))e.preventDefault();else if(!r.attr("target")){this.$activeTabLink.removeClass("active");var o=this.$content;this.$activeTabLink=r,this.$content=t(M.escapeHash(r[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var s=this.index;this.index=Math.max(this.$tabLinks.index(r),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){"function"===typeof n.options.onShow&&n.options.onShow.call(n,n.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"===typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),o.length&&!o.is(this.$content)&&(o[0].style.display="none",o.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(s),e.preventDefault()}}},{key:"_createIndicator",value:function(){var t=this,e=document.createElement("li");e.classList.add("indicator"),this.el.appendChild(e),this._indicator=e,setTimeout(function(){t._indicator.style.left=t._calcLeftPos(t.$activeTabLink)+"px",t._indicator.style.right=t._calcRightPos(t.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=t(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=t(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var e=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var n=t();this.$tabLinks.each(function(e){var i=t(M.escapeHash(e.hash));i.addClass("carousel-item"),n=n.add(i)});var i=t('<div class="tabs-content carousel carousel-slider"></div>');n.first().before(i),i.append(n),n[0].style.display="";var r=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var i=e.index;e.index=t(n).index(),e.$activeTabLink.removeClass("active"),e.$activeTabLink=e.$tabLinks.eq(e.index),e.$activeTabLink.addClass("active"),e._animateIndicator(i),"function"===typeof e.options.onShow&&e.options.onShow.call(e,e.$content[0])}}),this._tabsCarousel.set(r)}},{key:"_teardownSwipeableTabs",value:function(){var t=this._tabsCarousel.$el;this._tabsCarousel.destroy(),t.after(t.children()),t.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(e){if(e.hash){var n=t(M.escapeHash(e.hash));n.length&&(n[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(e){if(e.hash){var n=t(M.escapeHash(e.hash));n.length&&(n[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(t){return Math.ceil(this.tabsWidth-t.position().left-t[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(t){return Math.floor(t.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(t){var n=0,i=0;this.index-t>=0?n=90:i=90;var r={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:n},right:{value:this._calcRightPos(this.$activeTabLink),delay:i},duration:this.options.duration,easing:"easeOutQuad"};e.remove(this._indicator),e(r)}},{key:"select",value:function(t){var e=this.$tabLinks.filter('[href="#'+t+'"]');e.length&&e.trigger("click")}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Tabs}},{key:"defaults",get:function(){return n}}]),r}(h);M.Tabs=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tabs","M_Tabs")}(cash,M.anime),function(t,e){"use strict";var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Tooltip=i,i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){t(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var t=document.createElement("div");t.classList.add("material-tooltip"),this.tooltipEl=t;var e=document.createElement("div");e.classList.add("tooltip-content"),e.innerHTML=this.options.html,t.appendChild(e),document.body.appendChild(t)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(e){this.isOpen||(e=void 0===e||void 0,this.isOpen=!0,this.options=t.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(e))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var t=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){t.isHovered||t.isFocused||t._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(t){var e=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(e.isHovered||e.isFocused||t)&&e._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var e=this.el,n=this.tooltipEl,i=e.offsetHeight,r=e.offsetWidth,o=n.offsetHeight,s=n.offsetWidth,a=void 0,u=this.options.margin,c=void 0,h=void 0;this.xMovement=0,this.yMovement=0,c=e.getBoundingClientRect().top+M.getDocumentScrollTop(),h=e.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(c+=-o-u,h+=r/2-s/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(c+=i/2-o/2,h+=r+u,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(c+=i/2-o/2,h+=-s-u,this.xMovement=-this.options.transitionMovement):(c+=i+u,h+=r/2-s/2,this.yMovement=this.options.transitionMovement),a=this._repositionWithinScreen(h,c,s,o),t(n).css({top:a.y+"px",left:a.x+"px"})}},{key:"_repositionWithinScreen",value:function(t,e,n,i){var r=M.getDocumentScrollLeft(),o=M.getDocumentScrollTop(),s=t-r,a=e-o,u={left:s,top:a,width:n,height:i},c=this.options.margin+this.options.transitionMovement,h=M.checkWithinContainer(document.body,u,c);return h.left?s=c:h.right&&(s-=s+n-window.innerWidth),h.top?a=c:h.bottom&&(a-=a+i-window.innerHeight),{x:s+r,y:a+o}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var t={},e=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return e&&(t.html=e),n&&(t.position=n),t}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Tooltip}},{key:"defaults",get:function(){return n}}]),r}(h);M.Tooltip=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tooltip","M_Tooltip")}(cash,M.anime),function(t){"use strict";var e=e||{},n=document.querySelectorAll.bind(document);function i(t){return null!==t&&t===t.window}function r(t){return i(t)?t:9===t.nodeType&&t.defaultView}function o(t){var e,n,i={top:0,left:0},o=t&&t.ownerDocument;return e=o.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(i=t.getBoundingClientRect()),n=r(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}}function s(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}var a={duration:750,show:function(t,e){if(2===t.button)return!1;var n=e||this,i=document.createElement("div");i.className="waves-ripple",n.appendChild(i);var r=o(n),u=t.pageY-r.top,c=t.pageX-r.left,h="scale("+n.clientWidth/100*10+")";"touches"in t&&(u=t.touches[0].pageY-r.top,c=t.touches[0].pageX-r.left),i.setAttribute("data-hold",Date.now()),i.setAttribute("data-scale",h),i.setAttribute("data-x",c),i.setAttribute("data-y",u);var l={top:u+"px",left:c+"px"};i.className=i.className+" waves-notransition",i.setAttribute("style",s(l)),i.className=i.className.replace("waves-notransition",""),l["-webkit-transform"]=h,l["-moz-transform"]=h,l["-ms-transform"]=h,l["-o-transform"]=h,l.transform=h,l.opacity="1",l["-webkit-transition-duration"]=a.duration+"ms",l["-moz-transition-duration"]=a.duration+"ms",l["-o-transition-duration"]=a.duration+"ms",l["transition-duration"]=a.duration+"ms",l["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",i.setAttribute("style",s(l))},hide:function(t){u.touchup(t);var e=this,n=(e.clientWidth,null),i=e.getElementsByClassName("waves-ripple");if(!(i.length>0))return!1;n=i[i.length-1];var r=n.getAttribute("data-x"),o=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),h=Date.now()-Number(n.getAttribute("data-hold")),l=350-h;l<0&&(l=0),setTimeout(function(){var i={top:o+"px",left:r+"px",opacity:"0","-webkit-transition-duration":a.duration+"ms","-moz-transition-duration":a.duration+"ms","-o-transition-duration":a.duration+"ms","transition-duration":a.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c};n.setAttribute("style",s(i)),setTimeout(function(){try{e.removeChild(n)}catch(t){return!1}},a.duration)},l)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var o=n.getAttribute("style");o||(o=""),r.setAttribute("style",o),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},u={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?u.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout(function(){u.touches>0&&(u.touches-=1)},500):"mousedown"===t.type&&u.touches>0&&(e=!1),e},touchup:function(t){u.allowEvent(t)}};function c(t){if(!1===u.allowEvent(t))return null;var e=null,n=t.target||t.srcElement;while(null!==n.parentNode){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){e=n;break}n=n.parentNode}return e}function h(e){var n=c(e);null!==n&&(a.show(e,n),"ontouchstart"in t&&(n.addEventListener("touchend",a.hide,!1),n.addEventListener("touchcancel",a.hide,!1)),n.addEventListener("mouseup",a.hide,!1),n.addEventListener("mouseleave",a.hide,!1),n.addEventListener("dragend",a.hide,!1))}e.displayEffect=function(e){e=e||{},"duration"in e&&(a.duration=e.duration),a.wrapInput(n(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",h,!1),document.body.addEventListener("mousedown",h,!1)},e.attach=function(e){"input"===e.tagName.toLowerCase()&&(a.wrapInput([e]),e=e.parentNode),"ontouchstart"in t&&e.addEventListener("touchstart",h,!1),e.addEventListener("mousedown",h,!1)},t.Waves=e,document.addEventListener("DOMContentLoaded",function(){e.displayEffect()},!1)}(window),function(t,e){"use strict";var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function i(e){c(this,i),this.options=t.extend({},i.defaults,e),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var n=this._createToast();n.M_Toast=this,this.el=n,this.$el=t(n),this._animateIn(),this._setTimer()}return s(i,[{key:"_createToast",value:function(){var e=document.createElement("div");return e.classList.add("toast"),this.options.classes.length&&t(e).addClass(this.options.classes),("object"===typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"===typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"===typeof this.message.nodeName)?e.appendChild(this.message):this.message.jquery?t(e).append(this.message[0]):e.innerHTML=this.message,i._container.appendChild(e),e}},{key:"_animateIn",value:function(){e({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var t=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){t.panning||(t.timeRemaining-=20),t.timeRemaining<=0&&t.dismiss()},20))}},{key:"dismiss",value:function(){var t=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),e({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"===typeof t.options.completeCallback&&t.options.completeCallback(),t.$el.remove(),i._toasts.splice(i._toasts.indexOf(t),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Toast}},{key:"_createContainer",value:function(){var t=document.createElement("div");t.setAttribute("id","toast-container"),t.addEventListener("touchstart",i._onDragStart),t.addEventListener("touchmove",i._onDragMove),t.addEventListener("touchend",i._onDragEnd),t.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(t),i._container=t}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),t(i._container).remove(),i._container=null}},{key:"_onDragStart",value:function(e){if(e.target&&t(e.target).closest(".toast").length){var n=t(e.target).closest(".toast"),r=n[0].M_Toast;r.panning=!0,i._draggedToast=r,r.el.classList.add("panning"),r.el.style.transition="",r.startingXPos=i._xPos(e),r.time=Date.now(),r.xPos=i._xPos(e)}}},{key:"_onDragMove",value:function(t){if(i._draggedToast){t.preventDefault();var e=i._draggedToast;e.deltaX=Math.abs(e.xPos-i._xPos(t)),e.xPos=i._xPos(t),e.velocityX=e.deltaX/(Date.now()-e.time),e.time=Date.now();var n=e.xPos-e.startingXPos,r=e.el.offsetWidth*e.options.activationPercent;e.el.style.transform="translateX("+n+"px)",e.el.style.opacity=1-Math.abs(n/r)}}},{key:"_onDragEnd",value:function(){if(i._draggedToast){var t=i._draggedToast;t.panning=!1,t.el.classList.remove("panning");var e=t.xPos-t.startingXPos,n=t.el.offsetWidth*t.options.activationPercent,r=Math.abs(e)>n||t.velocityX>1;r?(t.wasSwiped=!0,t.dismiss()):(t.el.style.transition="transform .2s, opacity .2s",t.el.style.transform="",t.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}},{key:"dismissAll",value:function(){for(var t in i._toasts)i._toasts[t].dismiss()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(t){return new i(t)}}(cash,M.anime),function(t,e){"use strict";var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Sidenav=i,i.id=i.$el.attr("id"),i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.isFixed=i.el.classList.contains("sidenav-fixed"),i.isDragged=!1,i.lastWindowWidth=window.innerWidth,i.lastWindowHeight=window.innerHeight,i._createOverlay(),i._createDragTarget(),i._setupEventHandlers(),i._setupClasses(),i._setupFixed(),r._sidenavs.push(i),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var t=r._sidenavs.indexOf(this);t>=0&&r._sidenavs.splice(t,1)}},{key:"_createOverlay",value:function(){var t=document.createElement("div");this._closeBound=this.close.bind(this),t.classList.add("sidenav-overlay"),t.addEventListener("click",this._closeBound),document.body.appendChild(t),this._overlay=t}},{key:"_setupEventHandlers",value:function(){0===r._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===r._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(e){var n=t(e.target).closest(".sidenav-trigger");if(e.target&&n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Sidenav;r&&r.open(n),e.preventDefault()}}},{key:"_startDrag",value:function(t){var n=t.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=n,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,e.remove(this.el),e.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(t){var e=t.targetTouches[0].clientX,n=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-e),this._xPos=e,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==n&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(t){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(t),this._dragMoveUpdate(t);var e=this._xPos-this._startingXpos,n=e>0?"right":"left";e=Math.min(this._width,Math.abs(e)),this.options.edge===n&&(e=0);var i=e,r="translateX(-100%)";"right"===this.options.edge&&(r="translateX(100%)",i=-i),this.percentOpen=Math.min(1,e/this._width),this.el.style.transform=r+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(t){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(t),this._dragMoveUpdate(t);var e=this._xPos-this._startingXpos,n=e>0?"right":"left";e=Math.min(this._width,Math.abs(e)),this.options.edge!==n&&(e=0);var i=-e;"right"===this.options.edge&&(i=-i),this.percentOpen=Math.min(1,1-e/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(e){var n=t(e.target).closest(".sidenav-close");n.length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var t=document.createElement("div");t.classList.add("drag-target"),document.body.appendChild(t),this.dragTarget=t}},{key:"_preventBodyScrolling",value:function(){var t=document.body;t.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){var t=document.body;t.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(e.remove(this.el),e({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){if(!1!==this.isOpen)if(this.isOpen=!1,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var t="left"===this.options.edge?"-105%":"105%";this.el.style.transform="translateX("+t+")"}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var t=this,n="left"===this.options.edge?-1:1;this.isDragged&&(n="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),e.remove(this.el),e({targets:this.el,translateX:[100*n+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"===typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}})}},{key:"_animateOverlayIn",value:function(){var n=0;this.isDragged?n=this.percentOpen:t(this._overlay).css({display:"block"}),e.remove(this._overlay),e({targets:this._overlay,opacity:[n,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var t=this,n="left"===this.options.edge?-1:1,i=0;this.isDragged&&(i="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),e.remove(this.el),e({targets:this.el,translateX:[100*i+"%",105*n+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"===typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}})}},{key:"_animateOverlayOut",value:function(){var n=this;e.remove(this._overlay),e({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t(n._overlay).css("display","none")}})}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Sidenav}},{key:"defaults",get:function(){return n}}]),r}(h);i._sidenavs=[],M.Sidenav=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"sidenav","M_Sidenav")}(cash,M.anime),function(t,e){"use strict";var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(t){return'a[href="#'+t+'"]'}},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_ScrollSpy=i,i.options=t.extend({},r.defaults,n),r._elements.push(i),r._count++,r._increment++,i.tickId=-1,i.id=r._increment,i._setupEventHandlers(),i._handleWindowScroll(),i}return u(r,i),s(r,[{key:"destroy",value:function(){r._elements.splice(r._elements.indexOf(this),1),r._elementsInView.splice(r._elementsInView.indexOf(this),1),r._visibleElements.splice(r._visibleElements.indexOf(this.$el),1),r._count--,this._removeEventHandlers(),t(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var t=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=t.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===r._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===r._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(n){for(var i=t(n.target),o=r._elements.length-1;o>=0;o--){var s=r._elements[o];if(i.is('a[href="#'+s.$el.attr("id")+'"]')){n.preventDefault();var a=s.$el.offset().top+1;e({targets:[document.documentElement,document.body],scrollTop:a-s.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){r._ticks++;for(var t=M.getDocumentScrollTop(),e=M.getDocumentScrollLeft(),n=e+window.innerWidth,i=t+window.innerHeight,o=r._findElements(t,n,i,e),s=0;s<o.length;s++){var a=o[s],u=a.tickId;u<0&&a._enter(),a.tickId=r._ticks}for(var c=0;c<r._elementsInView.length;c++){var h=r._elementsInView[c],l=h.tickId;l>=0&&l!==r._ticks&&(h._exit(),h.tickId=-1)}r._elementsInView=o}},{key:"_enter",value:function(){r._visibleElements=r._visibleElements.filter(function(t){return 0!=t.height()}),r._visibleElements[0]?(t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),r._visibleElements[0][0].M_ScrollSpy&&this.id<r._visibleElements[0][0].M_ScrollSpy.id?r._visibleElements.unshift(this.$el):r._visibleElements.push(this.$el)):r._visibleElements.push(this.$el),t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var e=this;r._visibleElements=r._visibleElements.filter(function(t){return 0!=t.height()}),r._visibleElements[0]&&(t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),r._visibleElements=r._visibleElements.filter(function(t){return t.attr("id")!=e.$el.attr("id")}),r._visibleElements[0]&&t(this.options.getActiveElement(r._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_ScrollSpy}},{key:"_findElements",value:function(t,e,n,i){for(var o=[],s=0;s<r._elements.length;s++){var a=r._elements[s],u=t+a.options.scrollOffset||200;if(a.$el.height()>0){var c=a.$el.offset().top,h=a.$el.offset().left,l=h+a.$el.width(),d=c+a.$el.height(),f=!(h>e||l<i||c>n||d<u);f&&o.push(a)}}return o}},{key:"defaults",get:function(){return n}}]),r}(h);i._elements=[],i._elementsInView=[],i._visibleElements=[],i._count=0,i._increment=0,i._ticks=0,M.ScrollSpy=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(t){"use strict";var e={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(t,e,n){return t.indexOf(n)-e.indexOf(n)}},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_Autocomplete=r,r.options=t.extend({},i.defaults,n),r.isOpen=!1,r.count=0,r.activeIndex=-1,r.oldVal,r.$inputField=r.$el.closest(".input-field"),r.$active=t(),r._mousedown=!1,r._setupDropdown(),r._setupEventHandlers(),r}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),"undefined"!==typeof window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),"undefined"!==typeof window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var e=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),t(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(n){e.selectOption(t(n))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(t){"keyup"===t.type&&(i._keydown=!1),this.count=0;var e=this.el.value.toLowerCase();13!==t.keyCode&&38!==t.keyCode&&40!==t.keyCode&&(this.oldVal===e||!M.tabPressed&&"focus"===t.type||this.open(),this.oldVal=e)}},{key:"_handleInputKeydown",value:function(e){i._keydown=!0;var n=e.keyCode,r=void 0,o=t(this.container).children("li").length;if(n===M.keys.ENTER&&this.activeIndex>=0)return r=t(this.container).children("li").eq(this.activeIndex),void(r.length&&(this.selectOption(r),e.preventDefault()));n!==M.keys.ARROW_UP&&n!==M.keys.ARROW_DOWN||(e.preventDefault(),n===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,n===M.keys.ARROW_DOWN&&this.activeIndex<o-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=t(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(t){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(t){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(t){this._mousedown=!1}},{key:"_highlight",value:function(t,e){var n=e.find("img"),i=e.text().toLowerCase().indexOf(""+t.toLowerCase()),r=i+t.length-1,o=e.text().slice(0,i),s=e.text().slice(i,r+1),a=e.text().slice(r+1);e.html("<span>"+o+"<span class='highlight'>"+s+"</span>"+a+"</span>"),n.length&&e.prepend(n)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){t(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(t){var e=t.text().trim();this.el.value=e,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"===typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,e)}},{key:"_renderDropdown",value:function(e,n){var i=this;this._resetAutocomplete();var r=[];for(var o in e)if(e.hasOwnProperty(o)&&-1!==o.toLowerCase().indexOf(n)){if(this.count>=this.options.limit)break;var s={data:e[o],key:o};r.push(s),this.count++}if(this.options.sortFunction){var a=function(t,e){return i.options.sortFunction(t.key.toLowerCase(),e.key.toLowerCase(),n.toLowerCase())};r.sort(a)}for(var u=0;u<r.length;u++){var c=r[u],h=t("<li></li>");c.data?h.append('<img src="'+c.data+'" class="right circle"><span>'+c.key+"</span>"):h.append("<span>"+c.key+"</span>"),t(this.container).append(h),this._highlight(n,h)}}},{key:"open",value:function(){var t=this.el.value.toLowerCase();this._resetAutocomplete(),t.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,t)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(t){var e=this.el.value.toLowerCase();this.options.data=t,this.isOpen&&this._renderDropdown(t,e)}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Autocomplete}},{key:"defaults",get:function(){return e}}]),i}(h);n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),function(t){M.updateTextFields=function(){var e="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";t(e).each(function(e,n){var i=t(this);e.value.length>0||t(e).is(":focus")||e.autofocus||null!==i.attr("placeholder")?i.siblings("label").addClass("active"):e.validity?i.siblings("label").toggleClass("active",!0===e.validity.badInput):i.siblings("label").removeClass("active")})},M.validate_field=function(t){var e=null!==t.attr("data-length"),n=parseInt(t.attr("data-length")),i=t[0].value.length;0!==i||!1!==t[0].validity.badInput||t.is(":required")?t.hasClass("validate")&&(t.is(":valid")&&e&&i<=n||t.is(":valid")&&!e?(t.removeClass("invalid"),t.addClass("valid")):(t.removeClass("valid"),t.addClass("invalid"))):t.hasClass("validate")&&(t.removeClass("valid"),t.removeClass("invalid"))},M.textareaAutoResize=function(e){if(e instanceof Element&&(e=t(e)),e.length){var n=t(".hiddendiv").first();n.length||(n=t('<div class="hiddendiv common"></div>'),t("body").append(n));var i=e.css("font-family"),r=e.css("font-size"),o=e.css("line-height"),s=e.css("padding-top"),a=e.css("padding-right"),u=e.css("padding-bottom"),c=e.css("padding-left");r&&n.css("font-size",r),i&&n.css("font-family",i),o&&n.css("line-height",o),s&&n.css("padding-top",s),a&&n.css("padding-right",a),u&&n.css("padding-bottom",u),c&&n.css("padding-left",c),e.data("original-height")||e.data("original-height",e.height()),"off"===e.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(e[0].value+"\n");var h=n.html().replace(/\n/g,"<br>");n.html(h),e[0].offsetWidth>0&&e[0].offsetHeight>0?n.css("width",e.width()+"px"):n.css("width",window.innerWidth/2+"px"),e.data("original-height")<=n.innerHeight()?e.css("height",n.innerHeight()+"px"):e[0].value.length<e.data("previous-length")&&e.css("height",e.data("original-height")+"px"),e.data("previous-length",e[0].value.length)}else console.error("No textarea element found")},t(document).ready(function(){var e="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";t(document).on("change",e,function(){0===this.value.length&&null===t(this).attr("placeholder")||t(this).siblings("label").addClass("active"),M.validate_field(t(this))}),t(document).ready(function(){M.updateTextFields()}),t(document).on("reset",function(n){var i=t(n.target);i.is("form")&&(i.find(e).removeClass("valid").removeClass("invalid"),i.find(e).each(function(e){this.value.length&&t(this).siblings("label").removeClass("active")}),setTimeout(function(){i.find("select").each(function(){this.M_FormSelect&&t(this).trigger("change")})},0))}),document.addEventListener("focus",function(n){t(n.target).is(e)&&t(n.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(n){var i=t(n.target);if(i.is(e)){var r=".prefix";0===i[0].value.length&&!0!==i[0].validity.badInput&&null===i.attr("placeholder")&&(r+=", label"),i.siblings(r).removeClass("active"),M.validate_field(i)}},!0);var n="input[type=radio], input[type=checkbox]";t(document).on("keyup",n,function(e){if(e.which!==M.keys.TAB);else{t(this).addClass("tabbed");var n=t(this);n.one("blur",function(e){t(this).removeClass("tabbed")})}});var i=".materialize-textarea";t(i).each(function(){var e=t(this);e.data("original-height",e.height()),e.data("previous-length",this.value.length),M.textareaAutoResize(e)}),t(document).on("keyup",i,function(){M.textareaAutoResize(t(this))}),t(document).on("keydown",i,function(){M.textareaAutoResize(t(this))}),t(document).on("change",'.file-field input[type="file"]',function(){for(var e=t(this).closest(".file-field"),n=e.find("input.file-path"),i=t(this)[0].files,r=[],o=0;o<i.length;o++)r.push(i[o].name);n[0].value=r.join(", "),n.trigger("change")})})}(cash),function(t,e){"use strict";var n={indicators:!0,height:400,duration:500,interval:6e3},i=function(i){function r(n,i){c(this,r);var o=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,n,i));return o.el.M_Slider=o,o.options=t.extend({},r.defaults,i),o.$slider=o.$el.find(".slides"),o.$slides=o.$slider.children("li"),o.activeIndex=o.$slides.filter(function(e){return t(e).hasClass("active")}).first().index(),-1!=o.activeIndex&&(o.$active=o.$slides.eq(o.activeIndex)),o._setSliderHeight(),o.$slides.find(".caption").each(function(t){o._animateCaptionIn(t,0)}),o.$slides.find("img").each(function(e){var n="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";t(e).attr("src")!==n&&(t(e).css("background-image",'url("'+t(e).attr("src")+'")'),t(e).attr("src",n))}),o._setupIndicators(),o.$active?o.$active.css("display","block"):(o.$slides.first().addClass("active"),e({targets:o.$slides.first()[0],opacity:1,duration:o.options.duration,easing:"easeOutQuad"}),o.activeIndex=0,o.$active=o.$slides.eq(o.activeIndex),o.options.indicators&&o.$indicators.eq(o.activeIndex).addClass("active")),o.$active.find("img").each(function(t){e({targets:o.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:o.options.duration,easing:"easeOutQuad"})}),o._setupEventHandlers(),o.start(),o}return u(r,i),s(r,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(e){e.addEventListener("click",t._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var t=this;this.options.indicators&&this.$indicators.each(function(e){e.removeEventListener("click",t._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(e){var n=t(e.target).index();this.set(n)}},{key:"_handleInterval",value:function(){var t=this.$slider.find(".active").index();this.$slides.length===t+1?t=0:t+=1,this.set(t)}},{key:"_animateCaptionIn",value:function(n,i){var r={targets:n,opacity:0,duration:i,easing:"easeOutQuad"};t(n).hasClass("center-align")?r.translateY=-100:t(n).hasClass("right-align")?r.translateX=100:t(n).hasClass("left-align")&&(r.translateX=-100),e(r)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var e=this;this.options.indicators&&(this.$indicators=t('<ul class="indicators"></ul>'),this.$slides.each(function(n,i){var r=t('<li class="indicator-item"></li>');e.$indicators.append(r[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(t){var n=this;if(t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.activeIndex!=t){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),e({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){n.$slides.not(".active").each(function(t){e({targets:t,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(t).addClass("active")),e({targets:this.$slides.eq(t)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),e({targets:this.$slides.eq(t).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(t).addClass("active"),this.activeIndex=t,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var t=this.activeIndex+1;t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.set(t)}},{key:"prev",value:function(){var t=this.activeIndex-1;t>=this.$slides.length?t=0:t<0&&(t=this.$slides.length-1),this.set(t)}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Slider}},{key:"defaults",get:function(){return n}}]),r}(h);M.Slider=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"slider","M_Slider")}(cash,M.anime),function(t,e){t(document).on("click",".card",function(n){if(t(this).children(".card-reveal").length){var i=t(n.target).closest(".card");void 0===i.data("initialOverflow")&&i.data("initialOverflow",void 0===i.css("overflow")?"":i.css("overflow"));var r=t(this).find(".card-reveal");t(n.target).is(t(".card-reveal .card-title"))||t(n.target).is(t(".card-reveal .card-title i"))?e({targets:r[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(e){var n=e.animatables[0].target;t(n).css({display:"none"}),i.css("overflow",i.data("initialOverflow"))}}):(t(n.target).is(t(".card .activator"))||t(n.target).is(t(".card .activator i")))&&(i.css("overflow","hidden"),r.css({display:"block"}),e({targets:r[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(t){"use strict";var e={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_Chips=r,r.options=t.extend({},i.defaults,n),r.$el.addClass("chips input-field"),r.chipsData=[],r.$chips=t(),r._setupInput(),r.hasAutocomplete=Object.keys(r.options.autocompleteOptions).length>0,r.$input.attr("id")||r.$input.attr("id",M.guid()),r.options.data.length&&(r.chipsData=r.options.data,r._renderChips(r.chipsData)),r.hasAutocomplete&&r._setupAutocomplete(),r._setPlaceholder(),r._setupLabel(),r._setupEventHandlers(),r}return u(i,n),s(i,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",i._handleChipsKeydown),document.addEventListener("keyup",i._handleChipsKeyup),this.el.addEventListener("blur",i._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",i._handleChipsKeydown),document.removeEventListener("keyup",i._handleChipsKeyup),this.el.removeEventListener("blur",i._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(e){var n=t(e.target).closest(".chip"),i=t(e.target).is(".close");if(n.length){var r=n.index();i?(this.deleteChip(r),this.$input[0].focus()):this.selectChip(r)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(t){if(i._keydown=!0,13===t.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;t.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==t.keyCode&&37!==t.keyCode||""!==this.$input[0].value||!this.chipsData.length||(t.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(e){if(e.tag){var n=document.createElement("div"),i=document.createElement("i");if(n.classList.add("chip"),n.textContent=e.tag,n.setAttribute("tabindex",0),t(i).addClass("material-icons close"),i.textContent="close",e.image){var r=document.createElement("img");r.setAttribute("src",e.image),n.insertBefore(r,n.firstChild)}return n.appendChild(i),n}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var t=0;t<this.chipsData.length;t++){var e=this._renderChip(this.chipsData[t]);this.$el.append(e),this.$chips.add(e)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var t=this;this.options.autocompleteOptions.onAutocomplete=function(e){t.addChip({tag:e}),t.$input[0].value="",t.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=t("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?t(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&t(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(t){if(t.hasOwnProperty("tag")&&""!==t.tag){for(var e=!1,n=0;n<this.chipsData.length;n++)if(this.chipsData[n].tag===t.tag){e=!0;break}return!e}return!1}},{key:"addChip",value:function(e){if(this._isValid(e)&&!(this.chipsData.length>=this.options.limit)){var n=this._renderChip(e);this.$chips.add(n),this.chipsData.push(e),t(this.$input).before(n),this._setPlaceholder(),"function"===typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,n)}}},{key:"deleteChip",value:function(e){var n=this.$chips.eq(e);this.$chips.eq(e).remove(),this.$chips=this.$chips.filter(function(e){return t(e).index()>=0}),this.chipsData.splice(e,1),this._setPlaceholder(),"function"===typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,n[0])}},{key:"selectChip",value:function(t){var e=this.$chips.eq(t);this._selectedChip=e,e[0].focus(),"function"===typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,e[0])}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Chips}},{key:"_handleChipsKeydown",value:function(e){i._keydown=!0;var n=t(e.target).closest(".chips"),r=e.target&&n.length;if(!t(e.target).is("input, textarea")&&r){var o=n[0].M_Chips;if(8===e.keyCode||46===e.keyCode){e.preventDefault();var s=o.chipsData.length;if(o._selectedChip){var a=o._selectedChip.index();o.deleteChip(a),o._selectedChip=null,s=Math.max(a-1,0)}o.chipsData.length&&o.selectChip(s)}else if(37===e.keyCode){if(o._selectedChip){var u=o._selectedChip.index()-1;if(u<0)return;o.selectChip(u)}}else if(39===e.keyCode&&o._selectedChip){var c=o._selectedChip.index()+1;c>=o.chipsData.length?o.$input[0].focus():o.selectChip(c)}}}},{key:"_handleChipsKeyup",value:function(t){i._keydown=!1}},{key:"_handleChipsBlur",value:function(e){if(!i._keydown){var n=t(e.target).closest(".chips"),r=n[0].M_Chips;r._selectedChip=null}}},{key:"defaults",get:function(){return e}}]),i}(h);n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),t(document).ready(function(){t(document.body).on("click",".chip .close",function(){var e=t(this).closest(".chips");e.length&&e[0].M_Chips||t(this).closest(".chip").remove()})})}(cash),function(t){"use strict";var e={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_Pushpin=r,r.options=t.extend({},i.defaults,n),r.originalOffset=r.el.offsetTop,i._pushpins.push(r),r._setupEventHandlers(),r._updatePosition(),r}return u(i,n),s(i,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var t=i._pushpins.indexOf(this);i._pushpins.splice(t,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",i._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",i._updateElements)}},{key:"_updatePosition",value:function(){var t=M.getDocumentScrollTop()+this.options.offset;this.options.top<=t&&this.options.bottom>=t&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"===typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),t<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"===typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),t>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"===typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Pushpin}},{key:"_updateElements",value:function(){for(var t in i._pushpins){var e=i._pushpins[t];e._updatePosition()}}},{key:"defaults",get:function(){return e}}]),i}(h);n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(t,e){"use strict";var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};t.fn.reverse=[].reverse;var i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_FloatingActionButton=i,i.options=t.extend({},r.defaults,n),i.isOpen=!1,i.$anchor=i.$el.children("a").first(),i.$menu=i.$el.children("ul").first(),i.$floatingBtns=i.$el.find("ul .btn-floating"),i.$floatingBtnsReverse=i.$el.find("ul .btn-floating").reverse(),i.offsetY=0,i.offsetX=0,i.$el.addClass("direction-"+i.options.direction),"top"===i.options.direction?i.offsetY=40:"right"===i.options.direction?i.offsetX=-40:"bottom"===i.options.direction?i.offsetY=-40:i.offsetX=40,i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(e){t(e.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var t=this;this.$el.addClass("active");var n=0;this.$floatingBtnsReverse.each(function(i){e({targets:i,opacity:1,scale:[.4,1],translateY:[t.offsetY,0],translateX:[t.offsetX,0],duration:275,delay:n,easing:"easeInOutQuad"}),n+=40})}},{key:"_animateOutFAB",value:function(){var t=this;this.$floatingBtnsReverse.each(function(n){e.remove(n),e({targets:n,opacity:0,scale:.4,translateY:t.offsetY,translateX:t.offsetX,duration:175,easing:"easeOutQuad",complete:function(){t.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var e=this,n=void 0,i=window.innerWidth,r=window.innerHeight,o=this.el.getBoundingClientRect(),s=t('<div class="fab-backdrop"></div>'),a=this.$anchor.css("background-color");this.$anchor.append(s),this.offsetX=o.left-i/2+o.width/2,this.offsetY=r-o.bottom,n=i/s[0].clientWidth,this.btnBottom=o.bottom,this.btnLeft=o.left,this.btnWidth=o.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),s.css({"background-color":a}),setTimeout(function(){e.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),e.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){e.$el.css({overflow:"hidden","background-color":a}),s.css({transform:"scale("+n+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),e.$menu.children("li").children("a").css({opacity:1}),e._handleDocumentClickBound=e._handleDocumentClick.bind(e),window.addEventListener("scroll",e._handleCloseBound,!0),document.body.addEventListener("click",e._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var t=this,e=window.innerWidth,n=window.innerHeight,i=this.$el.find(".fab-backdrop"),r=this.$anchor.css("background-color");this.offsetX=this.btnLeft-e/2+this.btnWidth/2,this.offsetY=n-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),i.css({transform:"scale(0)","background-color":r}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){i.remove(),t.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-t.offsetX+"px,0,0)"}),t.$anchor.css({overflow:"",transform:"translate3d(0,"+t.offsetY+"px,0)"}),setTimeout(function(){t.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),t.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),r}(h);M.FloatingActionButton=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(t){"use strict";var e={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));r.el.M_Datepicker=r,r.options=t.extend({},i.defaults,n),n&&n.hasOwnProperty("i18n")&&"object"===typeof n.i18n&&(r.options.i18n=t.extend({},i.defaults.i18n,n.i18n)),r.options.minDate&&r.options.minDate.setHours(0,0,0,0),r.options.maxDate&&r.options.maxDate.setHours(0,0,0,0),r.id=M.guid(),r._setupVariables(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupEventHandlers(),r.options.defaultDate||(r.options.defaultDate=new Date(Date.parse(r.el.value)));var o=r.options.defaultDate;return i._isDate(o)?r.options.setDefaultDate?(r.setDate(o,!0),r.setInputValue()):r.gotoDate(o):r.gotoDate(new Date),r.isOpen=!1,r}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),t(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var t=this.calendarEl.querySelector(".orig-select-year");t&&M.FormSelect.getInstance(t).destroy();var e=this.calendarEl.querySelector(".orig-select-month");e&&M.FormSelect.getInstance(e).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(t(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var t=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){t.isOpen=!1}})}},{key:"toString",value:function(t){var e=this;if(t=t||this.options.format,!i._isDate(this.date))return"";var n=t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),r=n.map(function(t){return e.formats[t]?e.formats[t]():t}).join("");return r}},{key:"setDate",value:function(t,e){if(!t)return this.date=null,this._renderDateDisplay(),this.draw();if("string"===typeof t&&(t=new Date(Date.parse(t))),i._isDate(t)){var n=this.options.minDate,r=this.options.maxDate;i._isDate(n)&&t<n?t=n:i._isDate(r)&&t>r&&(t=r),this.date=new Date(t.getTime()),this._renderDateDisplay(),i._setToStartOfDay(this.date),this.gotoDate(this.date),e||"function"!==typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var t=i._isDate(this.date)?this.date:new Date,e=this.options.i18n,n=e.weekdaysShort[t.getDay()],r=e.monthsShort[t.getMonth()],o=t.getDate();this.yearTextEl.innerHTML=t.getFullYear(),this.dateTextEl.innerHTML=n+", "+r+" "+o}},{key:"gotoDate",value:function(t){var e=!0;if(i._isDate(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=t.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),e=o<n.getTime()||r.getTime()<o}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(t,e,n){var r=this.options,o=new Date,s=i._getDaysInMonth(t,e),a=new Date(t,e,1).getDay(),u=[],c=[];i._setToStartOfDay(o),r.firstDay>0&&(a-=r.firstDay,a<0&&(a+=7));var h=0===e?11:e-1,l=11===e?0:e+1,d=0===e?t-1:t,f=11===e?t+1:t,p=i._getDaysInMonth(d,h),v=s+a,m=v;while(m>7)m-=7;v+=7-m;for(var y=!1,g=0,b=0;g<v;g++){var _=new Date(t,e,g-a+1),w=!!i._isDate(this.date)&&i._compareDates(_,this.date),E=i._compareDates(_,o),C=-1!==r.events.indexOf(_.toDateString()),T=g<a||g>=s+a,S=g-a+1,k=e,I=t,D=r.startRange&&i._compareDates(r.startRange,_),A=r.endRange&&i._compareDates(r.endRange,_),O=r.startRange&&r.endRange&&r.startRange<_&&_<r.endRange,M=r.minDate&&_<r.minDate||r.maxDate&&_>r.maxDate||r.disableWeekends&&i._isWeekend(_)||r.disableDayFn&&r.disableDayFn(_);T&&(g<a?(S=p+S,k=h,I=d):(S-=s,k=l,I=f));var x={day:S,month:k,year:I,hasEvent:C,isSelected:w,isToday:E,isDisabled:M,isEmpty:T,isStartRange:D,isEndRange:A,isInRange:O,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};c.push(this.renderDay(x)),7===++b&&(u.push(this.renderRow(c,r.isRTL,y)),c=[],b=0,y=!1)}return this.renderTable(r,u,n)}},{key:"renderDay",value:function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-year="'+t.year+'" data-month="'+t.month+'" data-day="'+t.day+'">'+t.day+"</button></td>"}},{key:"renderRow",value:function(t,e,n){return'<tr class="datepicker-row'+(n?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"}},{key:"renderTable",value:function(t,e,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(t)+this.renderBody(e)+"</table></div>"}},{key:"renderHead",value:function(t){var e=void 0,n=[];for(e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+this.renderDayName(t,e)+'">'+this.renderDayName(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(t){return"<tbody>"+t.join("")+"</tbody>"}},{key:"renderTitle",value:function(e,n,i,r,o,s){var a=void 0,u=void 0,c=void 0,h=this.options,l=i===h.minYear,d=i===h.maxYear,f='<div id="'+s+'" class="datepicker-controls" role="heading" aria-live="assertive">',p=void 0,v=void 0,m=!0,y=!0;for(c=[],a=0;a<12;a++)c.push('<option value="'+(i===o?a-n:12+a-n)+'"'+(a===r?' selected="selected"':"")+(l&&a<h.minMonth||d&&a>h.maxMonth?'disabled="disabled"':"")+">"+h.i18n.months[a]+"</option>");for(p='<select class="datepicker-select orig-select-month" tabindex="-1">'+c.join("")+"</select>",t.isArray(h.yearRange)?(a=h.yearRange[0],u=h.yearRange[1]+1):(a=i-h.yearRange,u=1+i+h.yearRange),c=[];a<u&&a<=h.maxYear;a++)a>=h.minYear&&c.push('<option value="'+a+'" '+(a===i?'selected="selected"':"")+">"+a+"</option>");v='<select class="datepicker-select orig-select-year" tabindex="-1">'+c.join("")+"</select>";var g='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';f+='<button class="month-prev'+(m?"":" is-disabled")+'" type="button">'+g+"</button>",f+='<div class="selects-container">',h.showMonthAfterYear?f+=v+p:f+=p+v,f+="</div>",l&&(0===r||h.minMonth>=r)&&(m=!1),d&&(11===r||h.maxMonth<=r)&&(y=!1);var b='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';return f+='<button class="month-next'+(y?"":" is-disabled")+'" type="button">'+b+"</button>",f+"</div>"}},{key:"draw",value:function(t){if(this.isOpen||t){var e=this.options,n=e.minYear,i=e.maxYear,r=e.minMonth,o=e.maxMonth,s="",a=void 0;this._y<=n&&(this._y=n,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=i&&(this._y=i,!isNaN(o)&&this._m>o&&(this._m=o)),a="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;u<1;u++)this._renderDateDisplay(),s+=this.renderTitle(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,a)+this.render(this.calendars[u].year,this.calendars[u].month,a);this.destroySelects(),this.calendarEl.innerHTML=s;var c=this.calendarEl.querySelector(".orig-select-year"),h=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(c,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(h,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),c.addEventListener("change",this._handleYearChange.bind(this)),h.addEventListener("change",this._handleMonthChange.bind(this)),"function"===typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var e=this;this.$modalEl=t(i._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return e.date.getDate()},dd:function(){var t=e.date.getDate();return(t<10?"0":"")+t},ddd:function(){return e.options.i18n.weekdaysShort[e.date.getDay()]},dddd:function(){return e.options.i18n.weekdays[e.date.getDay()]},m:function(){return e.date.getMonth()+1},mm:function(){var t=e.date.getMonth()+1;return(t<10?"0":"")+t},mmm:function(){return e.options.i18n.monthsShort[e.date.getMonth()]},mmmm:function(){return e.options.i18n.months[e.date.getMonth()]},yy:function(){return(""+e.date.getFullYear()).slice(2)},yyyy:function(){return e.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(t){t.which===M.keys.ENTER&&(t.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(e){if(this.isOpen){var n=t(e.target);n.hasClass("is-disabled")||(!n.hasClass("datepicker-day-button")||n.hasClass("is-empty")||n.parent().hasClass("is-disabled")?n.closest(".month-prev").length?this.prevMonth():n.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(e.target.getAttribute("data-year"),e.target.getAttribute("data-month"),e.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(t){this.gotoMonth(t.target.value)}},{key:"_handleYearChange",value:function(t){this.gotoYear(t.target.value)}},{key:"gotoMonth",value:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())}},{key:"gotoYear",value:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(t){var e=void 0;t.firedBy!==this&&(e=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),i._isDate(e)&&this.setDate(e))}},{key:"renderDayName",value:function(t,e,n){e+=t.firstDay;while(e>=7)e-=7;return n?t.i18n.weekdaysAbbrev[e]:t.i18n.weekdays[e]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"===typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"===typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"_isDate",value:function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())}},{key:"_isWeekend",value:function(t){var e=t.getDay();return 0===e||6===e}},{key:"_setToStartOfDay",value:function(t){i._isDate(t)&&t.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(t,e){return[31,i._isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}},{key:"_isLeapYear",value:function(t){return t%4===0&&t%100!==0||t%400===0}},{key:"_compareDates",value:function(t,e){return t.getTime()===e.getTime()}},{key:"_setToStartOfDay",value:function(t){i._isDate(t)&&t.setHours(0,0,0,0)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Datepicker}},{key:"defaults",get:function(){return e}}]),i}(h);n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(t){"use strict";var e={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_Timepicker=r,r.options=t.extend({},i.defaults,n),r.id=M.guid(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupVariables(),r._setupEventHandlers(),r._clockSetup(),r._pickerSetup(),r}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),t(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),t(this.spanHours).on("click",this.showView.bind(this,"hours")),t(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(t){t.which===M.keys.ENTER&&(t.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(t){t.preventDefault();var e=this.plate.getBoundingClientRect(),n={x:e.left,y:e.top};this.x0=n.x+this.options.dialRadius,this.y0=n.y+this.options.dialRadius,this.moved=!1;var r=i._Pos(t);this.dx=r.x-this.x0,this.dy=r.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(t){t.preventDefault();var e=i._Pos(t),n=e.x-this.x0,r=e.y-this.y0;this.moved=!0,this.setHand(n,r,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(e){var n=this;e.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var r=i._Pos(e),o=r.x-this.x0,s=r.y-this.y0;this.moved&&o===this.dx&&s===this.dy&&this.setHand(o,s),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(t(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){n.done()},this.options.duration/2)),"function"===typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=t(i._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var e=document.querySelector(this.options.container);this.options.container&&e?this.$modalEl.appendTo(e):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var t=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"===typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t),t.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var e=t('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&e.css({visibility:""});var n=t('<div class="confirmation-btns"></div>');t('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(n).on("click",this.close.bind(this)),t('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(n).on("click",this.done.bind(this)),n.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=t('<div class="am-btn">AM</div>'),this.$pmBtn=t('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var t=this.options.dialRadius,e=this.options.tickRadius,n=2*t,r=i._createSVGEl("svg");r.setAttribute("class","timepicker-svg"),r.setAttribute("width",n),r.setAttribute("height",n);var o=i._createSVGEl("g");o.setAttribute("transform","translate("+t+","+t+")");var s=i._createSVGEl("circle");s.setAttribute("class","timepicker-canvas-bearing"),s.setAttribute("cx",0),s.setAttribute("cy",0),s.setAttribute("r",4);var a=i._createSVGEl("line");a.setAttribute("x1",0),a.setAttribute("y1",0);var u=i._createSVGEl("circle");u.setAttribute("class","timepicker-canvas-bg"),u.setAttribute("r",e),o.appendChild(a),o.appendChild(u),o.appendChild(s),r.appendChild(o),this._canvas.appendChild(r),this.hand=a,this.bg=u,this.bearing=s,this.g=o}},{key:"_buildHoursView",value:function(){var e=t('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var n=1;n<13;n+=1){var i=e.clone(),r=n/6*Math.PI,o=this.options.outerRadius;i.css({left:this.options.dialRadius+Math.sin(r)*o-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*o-this.options.tickRadius+"px"}),i.html(0===n?"00":n),this.hoursView.appendChild(i[0])}else for(var s=0;s<24;s+=1){var a=e.clone(),u=s/6*Math.PI,c=s>0&&s<13,h=c?this.options.innerRadius:this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(u)*h-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(u)*h-this.options.tickRadius+"px"}),a.html(0===s?"00":s),this.hoursView.appendChild(a[0])}}},{key:"_buildMinutesView",value:function(){for(var e=t('<div class="timepicker-tick"></div>'),n=0;n<60;n+=5){var r=e.clone(),o=n/30*Math.PI;r.css({left:this.options.dialRadius+Math.sin(o)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(o)*this.options.outerRadius-this.options.tickRadius+"px"}),r.html(i._addLeadingZero(n)),this.minutesView.appendChild(r[0])}}},{key:"_handleAmPmClick",value:function(e){var n=t(e.target);this.amOrPm=n.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var t=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&"undefined"!==typeof t[1]&&(t[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",t[1]=t[1].replace("AM","").replace("PM","")),"now"===t[0]){var e=new Date(+new Date+this.options.fromNow);t=[e.getHours(),e.getMinutes()],this.options.twelveHour&&(this.amOrPm=t[0]>=12&&t[0]<24?"PM":"AM")}this.hours=+t[0]||0,this.minutes=+t[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=i._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(e,n){"minutes"===e&&t(this.hoursView).css("visibility");var i="hours"===e,r=i?this.hoursView:this.minutesView,o=i?this.minutesView:this.hoursView;this.currentView=e,t(this.spanHours).toggleClass("text-primary",i),t(this.spanMinutes).toggleClass("text-primary",!i),o.classList.add("timepicker-dial-out"),t(r).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){t(o).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(e){var n=this.currentView,i=this[n],r="hours"===n,o=Math.PI/(r?6:30),s=i*o,a=r&&i>0&&i<13?this.options.innerRadius:this.options.outerRadius,u=Math.sin(s)*a,c=-Math.cos(s)*a,h=this;e?(t(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){t(h.canvas).removeClass("timepicker-canvas-out"),h.setHand(u,c)},e)):this.setHand(u,c)}},{key:"setHand",value:function(t,e,n){var r=this,o=Math.atan2(t,-e),s="hours"===this.currentView,a=Math.PI/(s||n?6:30),u=Math.sqrt(t*t+e*e),c=s&&u<(this.options.outerRadius+this.options.innerRadius)/2,h=c?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(h=this.options.outerRadius),o<0&&(o=2*Math.PI+o);var l=Math.round(o/a);o=l*a,this.options.twelveHour?s?0===l&&(l=12):(n&&(l*=5),60===l&&(l=0)):s?(12===l&&(l=0),l=c?0===l?12:l:0===l?0:l+12):(n&&(l*=5),60===l&&(l=0)),this[this.currentView]!==l&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){r.vibrateTimer=null},100))),this[this.currentView]=l,s?this["spanHours"].innerHTML=l:this["spanMinutes"].innerHTML=i._addLeadingZero(l);var d=Math.sin(o)*(h-this.options.tickRadius),f=-Math.cos(o)*(h-this.options.tickRadius),p=Math.sin(o)*h,v=-Math.cos(o)*h;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(t,e){var n=this.el.value,r=e?"":i._addLeadingZero(this.hours)+":"+i._addLeadingZero(this.minutes);this.time=r,!e&&this.options.twelveHour&&(r=r+" "+this.amOrPm),this.el.value=r,r!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"_addLeadingZero",value:function(t){return(t<10?"0":"")+t}},{key:"_createSVGEl",value:function(t){var e="http://www.w3.org/2000/svg";return document.createElementNS(e,t)}},{key:"_Pos",value:function(t){return t.targetTouches&&t.targetTouches.length>=1?{x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY}:{x:t.clientX,y:t.clientY}}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Timepicker}},{key:"defaults",get:function(){return e}}]),i}(h);n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(t){"use strict";var e={},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_CharacterCounter=r,r.options=t.extend({},i.defaults,n),r.isInvalid=!1,r.isValidLength=!1,r._setupCounter(),r._setupEventHandlers(),r}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),t(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){t(this.counterEl).remove()}},{key:"updateCounter",value:function(){var e=+this.$el.attr("data-length"),n=this.el.value.length;this.isValidLength=n<=e;var i=n;e&&(i+="/"+e,this._validateInput()),t(this.counterEl).html(i)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_CharacterCounter}},{key:"defaults",get:function(){return e}}]),i}(h);M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(t){"use strict";var e={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_Carousel=r,r.options=t.extend({},i.defaults,n),r.hasMultipleSlides=r.$el.find(".carousel-item").length>1,r.showIndicators=r.options.indicators&&r.hasMultipleSlides,r.noWrap=r.options.noWrap||!r.hasMultipleSlides,r.pressed=!1,r.dragged=!1,r.offset=r.target=0,r.images=[],r.itemWidth=r.$el.find(".carousel-item").first().innerWidth(),r.itemHeight=r.$el.find(".carousel-item").first().innerHeight(),r.dim=2*r.itemWidth+r.options.padding||1,r._autoScrollBound=r._autoScroll.bind(r),r._trackBound=r._track.bind(r),r.options.fullWidth&&(r.options.dist=0,r._setCarouselHeight(),r.showIndicators&&r.$el.find(".carousel-fixed-item").addClass("with-indicators")),r.$indicators=t('<ul class="indicators"></ul>'),r.$el.find(".carousel-item").each(function(e,n){if(r.images.push(e),r.showIndicators){var i=t('<li class="indicator-item"></li>');0===n&&i[0].classList.add("active"),r.$indicators.append(i)}}),r.showIndicators&&r.$el.append(r.$indicators),r.count=r.images.length,r.options.numVisible=Math.min(r.count,r.options.numVisible),r.xform="transform",["webkit","Moz","O","ms"].every(function(t){var e=t+"Transform";return"undefined"===typeof document.body.style[e]||(r.xform=e,!1)}),r._setupEventHandlers(),r._scroll(r.offset),r}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),"undefined"!==typeof window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(e,n){e.addEventListener("click",t._handleIndicatorClickBound)}));var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var t=this;"undefined"!==typeof window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(e,n){e.removeEventListener("click",t._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(e){"mousedown"===e.type&&t(e.target).is("img")&&e.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(e),this.referenceY=this._ypos(e),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(t){var e=void 0,n=void 0,i=void 0,r=void 0;if(this.pressed)if(e=this._xpos(t),n=this._ypos(t),i=this.reference-e,r=Math.abs(this.referenceY-n),r<30&&!this.verticalDragged)(i>2||i<-2)&&(this.dragged=!0,this.reference=e,this._scroll(this.offset+i));else{if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(t){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(e){if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;if(!this.options.fullWidth){var n=t(e.target).closest(".carousel-item").index(),i=this._wrap(this.center)-n;0!==i&&(e.preventDefault(),e.stopPropagation()),this._cycleTo(n)}}},{key:"_handleIndicatorClick",value:function(e){e.stopPropagation();var n=t(e.target).closest(".indicator-item");n.length&&this._cycleTo(n.index())}},{key:"_handleResize",value:function(t){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(t){var e=this,n=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete){var r=i.height();if(r>0)this.$el.css("height",r+"px");else{var o=i[0].naturalWidth,s=i[0].naturalHeight,a=this.$el.width()/o*s;this.$el.css("height",a+"px")}}else i.one("load",function(t,n){e.$el.css("height",t.offsetHeight+"px")});else if(!t){var u=n.height();this.$el.css("height",u+"px")}}},{key:"_xpos",value:function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}},{key:"_ypos",value:function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}},{key:"_wrap",value:function(t){return t>=this.count?t%this.count:t<0?this._wrap(this.count+t%this.count):t}},{key:"_track",value:function(){var t=void 0,e=void 0,n=void 0,i=void 0;t=Date.now(),e=t-this.timestamp,this.timestamp=t,n=this.offset-this.frame,this.frame=this.offset,i=1e3*n/(1+e),this.velocity=.8*i+.2*this.velocity}},{key:"_autoScroll",value:function(){var t=void 0,e=void 0;this.amplitude&&(t=Date.now()-this.timestamp,e=this.amplitude*Math.exp(-t/this.options.duration),e>2||e<-2?(this._scroll(this.target-e),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(e){var n=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){n.$el.removeClass("scrolling")},this.options.duration);var i=void 0,r=void 0,o=void 0,s=void 0,a=void 0,u=void 0,c=void 0,h=void 0,l=void 0,d=void 0,f=this.center,p=1/this.options.numVisible;if(this.offset="number"===typeof e?e:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),o=this.offset-this.center*this.dim,s=o<0?1:-1,a=-s*o*2/this.dim,r=this.count>>1,this.options.fullWidth?(c="translateX(0)",d=1):(c="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",c+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",d=1-p*a),this.showIndicators){var v=this.center%this.count,m=this.$indicators.find(".indicator-item.active");m.index()!==v&&(m.removeClass("active"),this.$indicators.find(".indicator-item").eq(v)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){u=this.images[this._wrap(this.center)],t(u).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),u.classList.add("active"));var y=c+" translateX("+-o/2+"px) translateX("+s*this.options.shift*a*i+"px) translateZ("+this.options.dist*a+"px)";this._updateItemStyle(u,d,0,y)}for(i=1;i<=r;++i){if(this.options.fullWidth?(h=this.options.dist,l=i===r&&o<0?1-a:1):(h=this.options.dist*(2*i+a*s),l=1-p*(2*i+a*s)),!this.noWrap||this.center+i<this.count){u=this.images[this._wrap(this.center+i)];var g=c+" translateX("+(this.options.shift+(this.dim*i-o)/2)+"px) translateZ("+h+"px)";this._updateItemStyle(u,l,-i,g)}if(this.options.fullWidth?(h=this.options.dist,l=i===r&&o>0?1-a:1):(h=this.options.dist*(2*i-a*s),l=1-p*(2*i-a*s)),!this.noWrap||this.center-i>=0){u=this.images[this._wrap(this.center-i)];var b=c+" translateX("+(-this.options.shift+(-this.dim*i-o)/2)+"px) translateZ("+h+"px)";this._updateItemStyle(u,l,-i,b)}}if(!this.noWrap||this.center>=0&&this.center<this.count){u=this.images[this._wrap(this.center)];var _=c+" translateX("+-o/2+"px) translateX("+s*this.options.shift*a+"px) translateZ("+this.options.dist*a+"px)";this._updateItemStyle(u,d,0,_)}var w=this.$el.find(".carousel-item").eq(this._wrap(this.center));f!==this.center&&"function"===typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,w[0],this.dragged),"function"===typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,w[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(t,e,n,i){t.style[this.xform]=i,t.style.zIndex=n,t.style.opacity=e,t.style.visibility="visible"}},{key:"_cycleTo",value:function(t,e){var n=this.center%this.count-t;this.noWrap||(n<0?Math.abs(n+this.count)<Math.abs(n)&&(n+=this.count):n>0&&Math.abs(n-this.count)<n&&(n-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),n<0?this.target+=this.dim*Math.abs(n):n>0&&(this.target-=this.dim*n),"function"===typeof e&&(this.oneTimeCallback=e),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(t){(void 0===t||isNaN(t))&&(t=1);var e=this.center+t;if(e>=this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e)}},{key:"prev",value:function(t){(void 0===t||isNaN(t))&&(t=1);var e=this.center-t;if(e>=this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e)}},{key:"set",value:function(t,e){if((void 0===t||isNaN(t))&&(t=0),t>this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t,e)}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Carousel}},{key:"defaults",get:function(){return e}}]),i}(h);M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(t){"use strict";var e={onOpen:void 0,onClose:void 0},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.el.M_TapTarget=r,r.options=t.extend({},i.defaults,n),r.isOpen=!1,r.$origin=t("#"+r.$el.attr("data-target")),r._setup(),r._calculatePositioning(),r._setupEventHandlers(),r}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(t){this.open()}},{key:"_handleOriginClick",value:function(t){this.close()}},{key:"_handleResize",value:function(t){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(e){t(e.target).closest(".tap-target-wrapper").length||(this.close(),e.preventDefault(),e.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=t(this.wrapper).find(".tap-target-wave")[0],this.originEl=t(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],t(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(t(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var e="fixed"===this.$origin.css("position");if(!e)for(var n=this.$origin.parents(),i=0;i<n.length;i++)if(e="fixed"==t(n[i]).css("position"),e)break;var r=this.$origin.outerWidth(),o=this.$origin.outerHeight(),s=e?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,a=e?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,u=window.innerWidth,c=window.innerHeight,h=u/2,l=c/2,d=a<=h,f=a>h,p=s<=l,v=s>l,m=a>=.25*u&&a<=.75*u,y=this.$el.outerWidth(),g=this.$el.outerHeight(),b=s+o/2-g/2,_=a+r/2-y/2,w=e?"fixed":"absolute",E=m?y:y/2+r,C=g/2,T=p?g/2:0,S=0,k=d&&!m?y/2-r:0,I=0,D=r,A=v?"bottom":"top",O=2*r,x=O,L=g/2-x/2,N=y/2-O/2,R={};R.top=p?b+"px":"",R.right=f?u-_-y+"px":"",R.bottom=v?c-b-g+"px":"",R.left=d?_+"px":"",R.position=w,t(this.wrapper).css(R),t(this.contentEl).css({width:E+"px",height:C+"px",top:T+"px",right:I+"px",bottom:S+"px",left:k+"px",padding:D+"px",verticalAlign:A}),t(this.waveEl).css({top:L+"px",left:N+"px",width:O+"px",height:x+"px"})}},{key:"open",value:function(){this.isOpen||("function"===typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"===typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_TapTarget}},{key:"defaults",get:function(){return e}}]),i}(h);M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(t){"use strict";var e={classes:"",dropdownOptions:{}},n=function(n){function i(e,n){c(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,e,n));return r.$el.hasClass("browser-default")?a(r):(r.el.M_FormSelect=r,r.options=t.extend({},i.defaults,n),r.isMultiple=r.$el.prop("multiple"),r.el.tabIndex=-1,r._keysSelected={},r._valueDict={},r._setupDropdown(),r._setupEventHandlers(),r)}return u(i,n),s(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),t(this.dropdownOptions).find("li:not(.optgroup)").each(function(t){t.addEventListener("click",e._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var e=this;t(this.dropdownOptions).find("li:not(.optgroup)").each(function(t){t.removeEventListener("click",e._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(t){this._setValueToInput()}},{key:"_handleOptionClick",value:function(e){e.preventDefault();var n=t(e.target).closest("li")[0],i=n.id;if(!t(n).hasClass("disabled")&&!t(n).hasClass("optgroup")&&i.length){var r=!0;if(this.isMultiple){var o=t(this.dropdownOptions).find("li.disabled.selected");o.length&&(o.removeClass("selected"),o.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(o[0].id)),r=this._toggleEntryFromArray(i)}else t(this.dropdownOptions).find("li").removeClass("selected"),t(n).toggleClass("selected",r);var s=t(this._valueDict[i].el).prop("selected");s!==r&&(t(this._valueDict[i].el).prop("selected",r),this.$el.trigger("change"))}e.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var e=this;this.wrapper=document.createElement("div"),t(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(t(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),t(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(n){if(t(n).is("option")){var i=void 0;i=e.isMultiple?e._appendOptionWithIcon(e.$el,n,"multiple"):e._appendOptionWithIcon(e.$el,n),e._addOptionToValueDict(n,i)}else if(t(n).is("optgroup")){var r=t(n).children("option");t(e.dropdownOptions).append(t('<li class="optgroup"><span>'+n.getAttribute("label")+"</span></li>")[0]),r.each(function(t){var n=e._appendOptionWithIcon(e.$el,t,"optgroup-option");e._addOptionToValueDict(t,n)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),t(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&t(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=t('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(n[0]),!this.el.disabled){var i=t.extend({},this.options.dropdownOptions);i.onOpenEnd=function(n){var i=t(e.dropdownOptions).find(".selected").first();if(i.length&&(M.keyDown=!0,e.dropdown.focusedIndex=i.index(),e.dropdown._focusFocusedItem(),M.keyDown=!1,e.dropdown.isScrollable)){var r=i[0].getBoundingClientRect().top-e.dropdownOptions.getBoundingClientRect().top;r-=e.dropdownOptions.clientHeight/2,e.dropdownOptions.scrollTop=r}},this.isMultiple&&(i.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,i)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(t,e){var n=Object.keys(this._valueDict).length,i=this.dropdownOptions.id+n,r={};e.id=i,r.el=t,r.optionEl=e,this._valueDict[i]=r}},{key:"_removeDropdown",value:function(){t(this.wrapper).find(".caret").remove(),t(this.input).remove(),t(this.dropdownOptions).remove(),t(this.wrapper).before(this.$el),t(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(e,n,i){var r=n.disabled?"disabled ":"",o="optgroup-option"===i?"optgroup-option ":"",s=this.isMultiple?'<label><input type="checkbox"'+r+'"/><span>'+n.innerHTML+"</span></label>":n.innerHTML,a=t("<li></li>"),u=t("<span></span>");u.html(s),a.addClass(r+" "+o),a.append(u);var c=n.getAttribute("data-icon");if(c){var h=t('<img alt="" src="'+c+'">');a.prepend(h)}return t(this.dropdownOptions).append(a[0]),a[0]}},{key:"_toggleEntryFromArray",value:function(e){var n=!this._keysSelected.hasOwnProperty(e),i=t(this._valueDict[e].optionEl);return n?this._keysSelected[e]=!0:delete this._keysSelected[e],i.toggleClass("selected",n),i.find('input[type="checkbox"]').prop("checked",n),i.prop("selected",n),n}},{key:"_setValueToInput",value:function(){var e=[],n=this.$el.find("option");if(n.each(function(n){if(t(n).prop("selected")){var i=t(n).text();e.push(i)}}),!e.length){var i=this.$el.find("option:disabled").eq(0);i.length&&""===i[0].value&&e.push(i.text())}this.input.value=e.join(", ")}},{key:"_setSelectedStates",value:function(){for(var e in this._keysSelected={},this._valueDict){var n=this._valueDict[e],i=t(n.el).prop("selected");t(n.optionEl).find('input[type="checkbox"]').prop("checked",i),i?(this._activateOption(t(this.dropdownOptions),t(n.optionEl)),this._keysSelected[e]=!0):t(n.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(e,n){if(n){this.isMultiple||e.find("li.selected").removeClass("selected");var i=t(n);i.addClass("selected")}}},{key:"getSelectedValues",value:function(){var t=[];for(var e in this._keysSelected)t.push(this._valueDict[e].el.value);return t}}],[{key:"init",value:function(t,e){return o(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_FormSelect}},{key:"defaults",get:function(){return e}}]),i}(h);M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(t,e){"use strict";var n={},i=function(i){function r(e,n){c(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,e,n));return i.el.M_Range=i,i.options=t.extend({},r.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return u(r,i),s(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){t(this.value).html(this.$el.val()),t(this.thumb).hasClass("active")||this._showRangeBubble();var e=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",e+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(e){if(t(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),t(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==e.type){var n=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",n+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){t(this.thumb).hasClass("active")||this._showRangeBubble();var e=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",e+"px"),t(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var n=parseInt(this.$el.css("padding-left")),i=7+n+"px";t(this.thumb).hasClass("active")&&(e.remove(this.thumb),e({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:i,duration:100})),t(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),t(this.thumb).addClass("thumb"),t(this.value).addClass("value"),t(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){t(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var n=parseInt(t(this.thumb).parent().css("padding-left")),i=-7+n+"px";e.remove(this.thumb),e({targets:this.thumb,height:30,width:30,top:-30,marginLeft:i,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var t=this.$el.width()-15,e=parseFloat(this.$el.attr("max"))||100,n=parseFloat(this.$el.attr("min"))||0,i=(parseFloat(this.$el.val())-n)/(e-n);return i*t}}],[{key:"init",value:function(t,e){return o(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,t,e)}},{key:"getInstance",value:function(t){var e=t.jquery?t[0]:t;return e.M_Range}},{key:"defaults",get:function(){return n}}]),r}(h);M.Range=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"range","M_Range"),i.init(t("input[type=range]"))}(cash,M.anime)}).call(this,n("c8ba"))},"4ddf":function(t,e,n){"use strict";var i=n("f0be"),r=n("235a"),o=n("4c35"),s=n("1982"),a=n("42d9"),u=n("2622"),c=n("03ed"),h=n("6b91"),l=n("8d98")("iterator"),d=!([].keys&&"next"in[].keys()),f="@@iterator",p="keys",v="values",m=function(){return this};t.exports=function(t,e,n,y,g,b,_){u(n,e,y);var w,E,C,T=function(t){if(!d&&t in D)return D[t];switch(t){case p:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",k=g==v,I=!1,D=t.prototype,A=D[l]||D[f]||g&&D[g],O=A||T(g),M=g?k?T("entries"):O:void 0,x="Array"==e&&D.entries||A;if(x&&(C=h(x.call(new t)),C!==Object.prototype&&C.next&&(c(C,S,!0),i||"function"==typeof C[l]||s(C,l,m))),k&&A&&A.name!==v&&(I=!0,O=function(){return A.call(this)}),i&&!_||!d&&!I&&D[l]||s(D,l,O),a[e]=O,a[S]=m,g)if(w={values:k?O:T(v),keys:b?O:T(p),entries:M},_)for(E in w)E in D||o(D,E,w[E]);else r(r.P+r.F*(d||I),e,w);return w}},5051:function(t,e,n){var i=n("669d");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},"50e6":function(t,e){e.f={}.propertyIsEnumerable},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"52fe":function(t,e){(function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=function(t){return t&&DataView.prototype.isPrototypeOf(t)},r=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=a(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},h.prototype["delete"]=function(t){delete this.map[a(t)]},h.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},h.prototype.set=function(t,e){this.map[a(t)]=u(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];E.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=b,t.Response=E,t.fetch=function(t,n){return new Promise(function(i,r){var o=new b(t,n),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:w(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new E(e,t))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!==typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function f(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function p(t){var e=new FileReader,n=d(e);return e.readAsText(t),n}function v(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&i(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!r(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t){var e=t.toUpperCase();return o.indexOf(e)>-1?e:t}function b(t,e){e=e||{};var n=e.body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=g(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function _(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function w(t){var e=new h,n=t.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}})("undefined"!==typeof self?self:this)},"53c9":function(t,e,n){"use strict";var i=n("74d1"),r=n("3b03"),o=n("42d9"),s=n("ad20");t.exports=n("4ddf")(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"53ff":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},"54f1":function(t,e,n){n("e9df"),t.exports=n("02eb").Array.findIndex},"551c":function(t,e,n){"use strict";var i,r,o,s,a=n("2d00"),u=n("7726"),c=n("9b43"),h=n("23c6"),l=n("5ca1"),d=n("d3f4"),f=n("d8e8"),p=n("f605"),v=n("4a59"),m=n("ebd6"),y=n("1991").set,g=n("8079")(),b=n("a5b8"),_=n("9c80"),w=n("a25f"),E=n("bcaa"),C="Promise",T=u.TypeError,S=u.process,k=S&&S.versions,I=k&&k.v8||"",D=u[C],A="process"==h(S),O=function(){},M=r=b.f,x=!!function(){try{var t=D.resolve(1),e=(t.constructor={})[n("2b4c")("species")]=function(t){t(O,O)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e&&0!==I.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(i){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s,a=r?e.ok:e.fail,u=e.resolve,c=e.reject,h=e.domain;try{a?(r||(2==t._h&&B(t),t._h=1),!0===a?n=i:(h&&h.enter(),n=a(i),h&&(h.exit(),s=!0)),n===e.promise?c(T("Promise-chain cycle")):(o=L(n))?o.call(n,u,c):u(n)):c(i)}catch(l){h&&!s&&h.exit(),c(l)}};while(n.length>o)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){y.call(u,function(){var e,n,i,r=t._v,o=P(t);if(o&&(e=_(function(){A?S.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=A||P(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},P=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){y.call(u,function(){var e;A?S.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},q=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw T("Promise can't be resolved itself");(e=L(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,c(q,i,1),c(F,i,1))}catch(r){F.call(i,r)}}):(n._v=t,n._s=1,N(n,!1))}catch(i){F.call({_w:n,_d:!1},i)}}};x||(D=function(t){p(this,D,C,"_h"),f(t),i.call(this);try{t(c(q,this,1),c(F,this,1))}catch(e){F.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n("dcbc")(D.prototype,{then:function(t,e){var n=M(m(this,D));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(q,t,1),this.reject=c(F,t,1)},b.f=M=function(t){return t===D||t===s?new o(t):r(t)}),l(l.G+l.W+l.F*!x,{Promise:D}),n("7f20")(D,C),n("7a56")(C),s=n("8378")[C],l(l.S+l.F*!x,C,{reject:function(t){var e=M(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(a||!x),C,{resolve:function(t){return E(a&&this===s?D:this,t)}}),l(l.S+l.F*!(x&&n("5cc5")(function(t){D.all(t)["catch"](O)})),C,{all:function(t){var e=this,n=M(e),i=n.resolve,r=n.reject,o=_(function(){var n=[],o=0,s=1;v(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=M(e),i=n.reject,r=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},5537:function(t,e,n){var i=n("8378"),r=n("7726"),o="__core-js_shared__",s=r[o]||(r[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"56a9":function(t,e,n){var i=n("b10d"),r=n("f28b");t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},"59ca":function(t,e,n){"use strict";function i(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}n("95c6");var r=i(n("c23d"));t.exports=r},"5be3":function(t,e,n){n("2813"),t.exports=n("02eb").String.startsWith},"5ca1":function(t,e,n){var i=n("7726"),r=n("8378"),o=n("32e9"),s=n("2aba"),a=n("9b43"),u="prototype",c=function(t,e,n){var h,l,d,f,p=t&c.F,v=t&c.G,m=t&c.S,y=t&c.P,g=t&c.B,b=v?i:m?i[e]||(i[e]={}):(i[e]||{})[u],_=v?r:r[e]||(r[e]={}),w=_[u]||(_[u]={});for(h in v&&(n=e),n)l=!p&&b&&void 0!==b[h],d=(l?b:n)[h],f=g&&l?a(d,i):y&&"function"==typeof d?a(Function.call,d):d,b&&s(b,h,d,t&c.U),_[h]!=d&&o(_,h,f),y&&w[h]!=d&&(w[h]=d)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},"5cc5":function(t,e,n){var i=n("2b4c")("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(s){}return n}},"613b":function(t,e,n){var i=n("5537")("keys"),r=n("ca5a");t.exports=function(t){return i[t]||(i[t]=r(t))}},"626a":function(t,e,n){var i=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},6619:function(t,e,n){n("bb4d")("observable")},"669d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},6821:function(t,e,n){var i=n("626a"),r=n("be13");t.exports=function(t){return i(r(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var i=n("d3f4");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"6b91":function(t,e,n){var i=n("8343"),r=n("8ffe"),o=n("89fc")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"6ca5":function(t,e,n){var i=n("50e6"),r=n("c46b"),o=n("ad20"),s=n("2223"),a=n("8343"),u=n("ab4f"),c=Object.getOwnPropertyDescriptor;e.f=n("948a")?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(n){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},"6ff2":function(t,e,n){var i=n("ad20"),r=n("7346"),o=n("8cf7");t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),h=o(s,c);if(t&&n!=n){while(c>h)if(a=u[h++],a!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},7333:function(t,e,n){"use strict";var i=n("0d58"),r=n("2621"),o=n("52a7"),s=n("4bf8"),a=n("626a"),u=Object.assign;t.exports=!u||n("79e5")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){var n=s(t),u=arguments.length,c=1,h=r.f,l=o.f;while(u>c){var d,f=a(arguments[c++]),p=h?i(f).concat(h(f)):i(f),v=p.length,m=0;while(v>m)l.call(f,d=p[m++])&&(n[d]=f[d])}return n}:u},7346:function(t,e,n){var i=n("b10d"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"74d1":function(t,e,n){var i=n("8d98")("unscopables"),r=Array.prototype;void 0==r[i]&&n("1982")(r,i,{}),t.exports=function(t){r[i][t]=!0}},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var i=n("4588"),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},"78a3":function(t,e,n){e.f=n("8d98")},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7a56":function(t,e,n){"use strict";var i=n("7726"),r=n("86cc"),o=n("9e1e"),s=n("2b4c")("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},"7b3a":function(t,e,n){var i=n("aad8"),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},"7e54":function(t,e,n){var i=n("3df3"),r=n("f28b");t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},"7f20":function(t,e,n){var i=n("86cc").f,r=n("69a8"),o=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},"7f7f":function(t,e,n){var i=n("86cc").f,r=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in r||n("9e1e")&&i(r,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8079:function(t,e,n){var i=n("7726"),r=n("1991").set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n("2d95")(s);t.exports=function(){var t,e,n,c=function(){var i,r;u&&(i=s.domain)&&i.exit();while(t){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,i&&i.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var h=a.resolve(void 0);n=function(){h.then(c)}}else n=function(){r.call(i,c)};else{var l=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},8115:function(t,e,n){"use strict";var i=n("b10d"),r=n("f28b");t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},8187:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},8343:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},8378:function(t,e){var n=t.exports={version:"2.6.4"};"number"==typeof __e&&(__e=n)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var i=n("cb7c"),r=n("c69a"),o=n("6a99"),s=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"89fc":function(t,e,n){var i=n("7b3a")("keys"),r=n("53ff");t.exports=function(t){return i[t]||(i[t]=r(t))}},"8cf7":function(t,e,n){var i=n("b10d"),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},"8d98":function(t,e,n){var i=n("7b3a")("wks"),r=n("53ff"),o=n("aad8").Symbol,s="function"==typeof o,a=t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))};a.store=i},"8ffe":function(t,e,n){var i=n("f28b");t.exports=function(t){return Object(i(t))}},9129:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"948a":function(t,e,n){t.exports=!n("eb5a")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"95c6":function(t,e,n){"use strict";n.r(e);n("52fe"),n("a59c"),n("34f6"),n("54f1"),n("4c63"),n("5be3"),n("2629"),n("011f"),n("b665")},"96ff":function(t,e){e.f=Object.getOwnPropertySymbols},"998f":function(t,e,n){var i=n("e821"),r=n("1f50"),o=n("8ffe"),s=n("7346"),a=n("b25f");t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,h=4==t,l=6==t,d=5==t||l,f=e||a;return function(e,a,p){for(var v,m,y=o(e),g=r(y),b=i(a,p,3),_=s(g.length),w=0,E=n?f(e,_):u?f(e,0):void 0;_>w;w++)if((d||w in g)&&(v=g[w],m=b(v,w,y),t))if(n)E[w]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(h)return!1;return l?-1:c||h?h:E}}},"9b43":function(t,e,n){var i=n("d8e8");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var i=n("2b4c")("unscopables"),r=Array.prototype;void 0==r[i]&&n("32e9")(r,i,{}),t.exports=function(t){r[i][t]=!0}},"9c80":function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"9def":function(t,e,n){var i=n("4588"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a109:function(t,e,n){"use strict";var i=n("56a9")(!0);n("4ddf")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},a25f:function(t,e,n){var i=n("7726"),r=i.navigator;t.exports=r&&r.userAgent||""},a2cd:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return r}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return v}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return y}),n.d(e,"__asyncDelegator",function(){return g}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function s(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n}function a(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,i){e(n,i,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(e){o(e)}}function a(t){try{u(i["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})}function l(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(i=o.next()).done)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){r[t]&&(i[t]=function(e){return new Promise(function(n,i){o.push([t,e,n,i])>1||a(t,e)})})}function a(t,e){try{u(r[t](e))}catch(n){l(o[0][3],n)}}function u(t){t.value instanceof m?Promise.resolve(t.value.v).then(c,h):l(o[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function g(t){var e,n;return e={},i("next"),i("throw",function(t){throw t}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){t[i]&&(e[i]=function(e){return(n=!n)?{value:m(t[i](e)),done:"return"===i}:r?r(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"===typeof f?f(t):t[Symbol.iterator]()}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},a313:function(t,e,n){var i=n("8187");t.exports=Array.isArray||function(t){return"Array"==i(t)}},a59c:function(t,e,n){"use strict";(function(t){var e=setTimeout;function n(){}function i(t,e){return function(){t.apply(e,arguments)}}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function o(t,e){while(3===t._state)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(r){return void a(e.promise,r)}s(e.promise,i)}else(1===t._state?s:a)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void u(t);if("function"===typeof n)return void h(i(n,e),t)}t._state=1,t._value=e,u(t)}catch(o){a(t,o)}}function a(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,a(e,t))})}catch(i){if(n)return;n=!0,a(e,i)}}r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var i=new this.constructor(n);return o(this,new c(t,e,i)),i},r.prototype["finally"]=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},r.all=function(t){return new r(function(e,n){if(!t||"undefined"===typeof t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var r=i.length;function o(t,s){try{if(s&&("object"===typeof s||"function"===typeof s)){var a=s.then;if("function"===typeof a)return void a.call(s,function(e){o(t,e)},n)}i[t]=s,0===--r&&e(i)}catch(u){n(u)}}for(var s=0;s<i.length;s++)o(s,i[s])})},r.resolve=function(t){return t&&"object"===typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)})},r._immediateFn="function"===typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},r._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();l.Promise||(l.Promise=r)}).call(this,n("c8ba"))},a5b8:function(t,e,n){"use strict";var i=n("d8e8");function r(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}t.exports.f=function(t){return new r(t)}},aad8:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},ab4f:function(t,e,n){t.exports=!n("948a")&&!n("eb5a")(function(){return 7!=Object.defineProperty(n("cba9")("div"),"a",{get:function(){return 7}}).a})},abfd:function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return a}),n.d(e,"LogLevel",function(){return i});var i,r=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(i||(i={}));var o=i.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},a=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=s,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},ac6a:function(t,e,n){for(var i=n("cadf"),r=n("0d58"),o=n("2aba"),s=n("7726"),a=n("32e9"),u=n("84f2"),c=n("2b4c"),h=c("iterator"),l=c("toStringTag"),d=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(f),v=0;v<p.length;v++){var m,y=p[v],g=f[y],b=s[y],_=b&&b.prototype;if(_&&(_[h]||a(_,h,d),_[l]||a(_,l,y),u[y]=d,g))for(m in i)_[m]||o(_,m,i[m],!0)}},ad20:function(t,e,n){var i=n("1f50"),r=n("f28b");t.exports=function(t){return i(r(t))}},b10d:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},b25f:function(t,e,n){var i=n("3358");t.exports=function(t,e){return new(i(t))(e)}},b3a3:function(t,e,n){"use strict";var i=n("235a"),r=n("998f")(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("74d1")(o)},b4b7:function(t,e,n){var i=n("8d98")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(r){}}return!0}},b54a:function(t,e,n){"use strict";n("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},b665:function(t,e,n){n("a109"),n("cc61"),t.exports=n("78a3").f("iterator")},bb4d:function(t,e,n){var i=n("aad8"),r=n("02eb"),o=n("f0be"),s=n("78a3"),a=n("cad0").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},bcaa:function(t,e,n){var i=n("cb7c"),r=n("d3f4"),o=n("a5b8");t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t),s=n.resolve;return s(e),n.promise}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c23d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("cd51"),r=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",s=[],a=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=i.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){s.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){s=s.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(i){e.push(t.services_[n][i])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,i=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=i}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;i.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(s.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),s=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&c("app-deleted",{name:this.name_})},t}();function u(){var t={},e={},n={},s={__esModule:!0,initializeApp:d,app:l,apps:null,Promise:Promise,SDK_VERSION:"5.8.1",INTERNAL:{registerService:p,createFirebaseNamespace:u,extendNamespace:v,createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,removeApp:h,factories:e,useAsService:y,Promise:Promise,deepExtend:i.deepExtend}};function h(e){var n=t[e];m(n,"delete"),delete t[e]}function l(e){return e=e||o,r(t,e)||c("no-app",{name:e}),t[e]}function d(e,n){if(void 0===n&&(n={}),"object"!==typeof n||null===n){var i=n;n={name:i}}var u=n;void 0===u.name&&(u.name=o);var h=u.name;"string"===typeof h&&h||c("bad-app-name",{name:h+""}),r(t,h)&&c("duplicate-app",{name:h});var l=new a(e,u,s);return t[h]=l,m(l,"create"),l}function f(){return Object.keys(t).map(function(e){return t[e]})}function p(t,r,o,u,h){e[t]&&c("duplicate-service",{name:t}),e[t]=r,u&&(n[t]=u,f().forEach(function(t){u("create",t)}));var d=function(e){return void 0===e&&(e=l()),"function"!==typeof e[t]&&c("invalid-app-argument",{name:t}),e[t]()};return void 0!==o&&i.deepExtend(d,o),s[t]=d,a.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this._getService.bind(this,t);return i.apply(this,h?e:[])},d}function v(t){i.deepExtend(s,t)}function m(t,i){Object.keys(e).forEach(function(e){var r=y(t,e);null!==r&&n[r]&&n[r](i,t)})}function y(t,e){if("serverAuth"===e)return null;var n=e;t.options;return n}return i.patchProperty(s,"default",s),Object.defineProperty(s,"apps",{get:f}),i.patchProperty(l,"App",a),s}function c(t,e){throw l.create(t,e)}a.prototype.name&&a.prototype.options||a.prototype.delete||console.log("dc");var h={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},l=new i.ErrorFactory("app","Firebase",h),d=u();e.firebase=d,e.default=d},c366:function(t,e,n){var i=n("6821"),r=n("9def"),o=n("77f1");t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),h=o(s,c);if(t&&n!=n){while(c>h)if(a=u[h++],a!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},c46b:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c6b0:function(t,e,n){var i=n("5051"),r=n("45ba"),o=n("9129"),s=n("89fc")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,e=n("cba9")("iframe"),i=o.length,r="<",s=">";e.style.display="none",n("c88d").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),c=t.F;while(i--)delete c[u][o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=i(t),n=new a,a[u]=null,n[s]=t):n=c(),void 0===e?n:r(n,e)}},c7b2:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"createWebChannelTransport",function(){return Gn}),n.d(e,"ErrorCode",function(){return Xn}),n.d(e,"EventType",function(){return Yn}),n.d(e,"WebChannel",function(){return Jn}),n.d(e,"XhrIoPool",function(){return Zn});var i,r="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},o=o||{},s=r;function a(t){return"string"==typeof t}function u(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(e=e[t[n]],null==e)return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function l(t){return"array"==h(t)}function d(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g,b.apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.mh=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function T(t,e){t=t.split("%s");for(var n="",i=t.length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");C.call(this,n+t[i])}function S(t,e){throw new T("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function k(){0!=I&&(D[this[v]||(this[v]=++m)]=this),this.Ka=this.Ka,this.Qa=this.Qa}E(C,Error),C.prototype.name="CustomError",E(T,C),T.prototype.name="AssertionError";var I=0,D={};k.prototype.Ka=!1,k.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=I)){var t=this[v]||(this[v]=++m);if(0!=I&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete D[t]}},k.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var A=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(0>n&&(n=Math.max(0,t.length+n)),a(t))return a(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=a(t)?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)},x=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=a(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function L(t){t:{for(var e=In,n=t.length,i=a(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}function N(t){if(!l(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function R(t,e){var n;return e=A(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function P(t){return Array.prototype.concat.apply([],arguments)}function B(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function F(t){return/^[\s\xa0]*$/.test(t)}var q,j=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function V(t,e){return t<e?-1:t>e?1:0}t:{var U=s.navigator;if(U){var $=U.userAgent;if($){q=$;break t}}q=""}function W(t){return-1!=q.indexOf(t)}function H(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function Q(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n}function K(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n}function z(t){var e,n={};for(e in t)n[e]=t[e];return n}var G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(var o=0;o<G.length;o++)n=G[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Y(t){return Y[" "](t),t}function J(t,e){var n=lt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Y[" "]=c;var Z,tt=W("Opera"),et=W("Trident")||W("MSIE"),nt=W("Edge"),it=nt||et,rt=W("Gecko")&&!(-1!=q.toLowerCase().indexOf("webkit")&&!W("Edge"))&&!(W("Trident")||W("MSIE"))&&!W("Edge"),ot=-1!=q.toLowerCase().indexOf("webkit")&&!W("Edge");function st(){var t=s.document;return t?t.documentMode:void 0}t:{var at="",ut=function(){var t=q;return rt?/rv:([^\);]+)(\)|;)/.exec(t):nt?/Edge\/([\d\.]+)/.exec(t):et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ot?/WebKit\/(\S+)/.exec(t):tt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ut&&(at=ut?ut[1]:""),et){var ct=st();if(null!=ct&&ct>parseFloat(at)){Z=String(ct);break t}}Z=at}var ht,lt={};function dt(t){return J(t,function(){for(var e=0,n=j(String(Z)).split("."),i=j(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var s=n[o]||"",a=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=V(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||V(0==s[2].length,0==a[2].length)||V(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ft=s.document;ht=ft&&et?st()||("CSS1Compat"==ft.compatMode?parseInt(Z,10):5):void 0;var pt=Object.freeze||function(t){return t},vt=!et||9<=Number(ht),mt=et&&!dt("9"),yt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(n){}return t}();function gt(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Be=!0}function bt(t,e){gt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,t&&this.Kf(t,e)}gt.prototype.stopPropagation=function(){this.Ea=!0},gt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},E(bt,gt);var _t=pt({2:"touch",3:"pen",4:"mouse"});bt.prototype.Kf=function(t,e){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(rt){t:{try{Y(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===i?(this.offsetX=ot||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=ot||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:_t[t.pointerType]||"",this.state=t.state,this.fb=t,t.defaultPrevented&&this.preventDefault()},bt.prototype.stopPropagation=function(){bt.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},bt.prototype.preventDefault=function(){bt.L.preventDefault.call(this);var t=this.fb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,mt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var wt="closure_listenable_"+(1e6*Math.random()|0);function Et(t){return!(!t||!t[wt])}var Ct=0;function Tt(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Ob=r,this.key=++Ct,this.Sa=this.Eb=!1}function St(t){this.src=t,this.J={},this.xb=0}function kt(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Ob==i)return r}return-1}Tt.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},i=St.prototype,i.add=function(t,e,n,i,r){var o=t.toString();t=this.J[o],t||(t=this.J[o]=[],this.xb++);var s=kt(t,e,i,r);return-1<s?(e=t[s],n||(e.Eb=!1)):(e=new Tt(e,this.src,o,!!i,r),e.Eb=n,t.push(e)),e},i.remove=function(t,e,n,i){if(t=t.toString(),!(t in this.J))return!1;var r=this.J[t];return e=kt(r,e,n,i),-1<e&&(r[e].Vb(),Array.prototype.splice.call(r,e,1),0==r.length&&(delete this.J[t],this.xb--),!0)},i.ye=function(t){var e=t.type;e in this.J&&R(this.J[e],t)&&(t.Vb(),0==this.J[e].length&&(delete this.J[e],this.xb--))},i.pb=function(t){var e;for(e in t=t&&t.toString(),this.J)if(!t||e==t){for(var n=this.J[e],i=0;i<n.length;i++)n[i].Vb();delete this.J[e],this.xb--}},i.jb=function(t,e,n,i){t=this.J[t.toString()];var r=-1;return t&&(r=kt(t,e,n,i)),-1<r?t[r]:null};var It="closure_lm_"+(1e6*Math.random()|0),Dt={};function At(t,e,n,i,r){if(i&&i.once)return xt(t,e,n,i,r);if(l(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,i,r);return null}return n=Vt(n),Et(t)?t.nb(e,n,p(i)?!!i.capture:!!i,r):Ot(t,e,n,!1,i,r)}function Ot(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=p(r)?!!r.capture:!!r,a=qt(t);if(a||(t[It]=a=new St(t)),n=a.add(e,n,i,s,o),n.proxy)return n;if(i=Mt(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)yt||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Rt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Mt(){var t=Ft,e=vt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function xt(t,e,n,i,r){if(l(e)){for(var o=0;o<e.length;o++)xt(t,e[o],n,i,r);return null}return n=Vt(n),Et(t)?t.Oc(e,n,p(i)?!!i.capture:!!i,r):Ot(t,e,n,!0,i,r)}function Lt(t,e,n,i,r){if(l(e))for(var o=0;o<e.length;o++)Lt(t,e[o],n,i,r);else i=p(i)?!!i.capture:!!i,n=Vt(n),Et(t)?t.ed(e,n,i,r):t&&(t=qt(t))&&(e=t.jb(e,n,i,r))&&Nt(e)}function Nt(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(Et(e))e.Le(t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Rt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=qt(e))?(n.ye(t),0==n.xb&&(n.src=null,e[It]=null)):t.Vb()}}}function Rt(t){return t in Dt?Dt[t]:Dt[t]="on"+t}function Pt(t,e,n,i){var r=!0;if((t=qt(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=Bt(o,i),r=r&&!1!==o)}return r}function Bt(t,e){var n=t.listener,i=t.Ob||t.src;return t.Eb&&Nt(t),n.call(i,e)}function Ft(t,e){if(t.Sa)return!0;if(!vt){var n=e||u("window.event");e=new bt(n,this);var i=!0;if(!(0>n.keyCode||void 0!=n.returnValue)){t:{var r=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(s){r=!0}(r||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],r=e.currentTarget;r;r=r.parentNode)n.push(r);for(t=t.type,r=n.length-1;!e.Ea&&0<=r;r--){e.currentTarget=n[r];var o=Pt(n[r],t,!0,e);i=i&&o}for(r=0;!e.Ea&&r<n.length;r++)e.currentTarget=n[r],o=Pt(n[r],t,!1,e),i=i&&o}return i}return Bt(t,new bt(e,this))}function qt(t){return t=t[It],t instanceof St?t:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vt(t){return f(t)?t:(t[jt]||(t[jt]=function(e){return t.handleEvent(e)}),t[jt])}function Ut(){k.call(this),this.ka=new St(this),this.Pe=this,this.Uc=null}E(Ut,k),Ut.prototype[wt]=!0,i=Ut.prototype,i.addEventListener=function(t,e,n,i){At(this,t,e,n,i)},i.removeEventListener=function(t,e,n,i){Lt(this,t,e,n,i)},i.dispatchEvent=function(t){var e,n=this.Uc;if(n)for(e=[];n;n=n.Uc)e.push(n);n=this.Pe;var i=t.type||t;if(a(t))t=new gt(t,n);else if(t instanceof gt)t.target=t.target||n;else{var r=t;t=new gt(i,n),X(t,r)}if(r=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var s=t.currentTarget=e[o];r=s.Lb(i,!0,t)&&r}if(t.Ea||(s=t.currentTarget=n,r=s.Lb(i,!0,t)&&r,t.Ea||(r=s.Lb(i,!1,t)&&r)),e)for(o=0;!t.Ea&&o<e.length;o++)s=t.currentTarget=e[o],r=s.Lb(i,!1,t)&&r;return r},i.F=function(){Ut.L.F.call(this),this.pg(),this.Uc=null},i.nb=function(t,e,n,i){return this.ka.add(String(t),e,!1,n,i)},i.Oc=function(t,e,n,i){return this.ka.add(String(t),e,!0,n,i)},i.ed=function(t,e,n,i){this.ka.remove(String(t),e,n,i)},i.Le=function(t){this.ka.ye(t)},i.pg=function(){this.ka&&this.ka.pb(void 0)},i.Lb=function(t,e,n){if(t=this.ka.J[String(t)],!t)return!0;t=t.concat();for(var i=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.Sa&&o.capture==e){var s=o.listener,a=o.Ob||o.src;o.Eb&&this.Le(o),i=!1!==s.call(a,n)&&i}}return i&&0!=n.Be},i.jb=function(t,e,n,i){return this.ka.jb(String(t),e,n,i)};var $t=s.JSON.stringify;function Wt(t,e){this.Sf=100,this.ef=t,this.ug=e,this.Zb=0,this.Pb=null}function Ht(){this.lc=this.Va=null}Wt.prototype.get=function(){if(0<this.Zb){this.Zb--;var t=this.Pb;this.Pb=t.next,t.next=null}else t=this.ef();return t},Wt.prototype.put=function(t){this.ug(t),this.Zb<this.Sf&&(this.Zb++,t.next=this.Pb,this.Pb=t)};var Qt,Kt,zt=new Wt(function(){return new Gt},function(t){t.reset()});function Gt(){this.next=this.scope=this.Gc=null}function Xt(t){s.setTimeout(function(){throw t},0)}function Yt(){var t=s.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!W("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),"undefined"!==typeof t&&!W("Trident")&&!W("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.rd;n.rd=null,t()}},function(t){i.next={rd:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}function Jt(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Kt=function(){t.then(ee)}}else Kt=function(){var t=ee;!f(s.setImmediate)||s.Window&&s.Window.prototype&&!W("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Qt||(Qt=Yt()),Qt(t)):s.setImmediate(t)}}Ht.prototype.add=function(t,e){var n=this.Af();n.set(t,e),this.lc?this.lc.next=n:this.Va=n,this.lc=n},Ht.prototype.remove=function(){var t=null;return this.Va&&(t=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),t.next=null),t},Ht.prototype.wg=function(t){zt.put(t)},Ht.prototype.Af=function(){return zt.get()},Gt.prototype.set=function(t,e){this.Gc=t,this.scope=e,this.next=null},Gt.prototype.reset=function(){this.next=this.scope=this.Gc=null};var Zt=!1,te=new Ht;function ee(){for(var t;t=te.remove();){try{t.Gc.call(t.scope)}catch(e){Xt(e)}te.wg(t)}Zt=!1}function ne(t,e){Ut.call(this),this.Na=t||1,this.wb=e||s,this.nd=b(this.Rg,this),this.ie=w()}function ie(t,e,n){if(f(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function re(t,e,n){k.call(this),this.Uf=null!=n?b(t,n):t,this.Na=e,this.Xe=b(this.fg,this),this.qc=[]}function oe(t){k.call(this),this.i=t,this.o={}}E(ne,Ut),i=ne.prototype,i.enabled=!1,i.B=null,i.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},i.Rg=function(){if(this.enabled){var t=w()-this.ie;0<t&&t<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-t):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},i.ff=function(){this.dispatchEvent("tick")},i.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=w())},i.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},i.F=function(){ne.L.F.call(this),this.stop(),delete this.wb},E(re,k),i=re.prototype,i.Ta=!1,i.ob=0,i.B=null,i.mf=function(t){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},i.stop=function(){this.B&&(s.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},i.pause=function(){this.ob++},i.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},i.F=function(){re.L.F.call(this),this.stop()},i.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},i.Cc=function(){this.B=ie(this.Xe,this.Na),this.Uf.apply(null,this.qc)},E(oe,k);var se=[];function ae(t,e,n){this.reset(t,e,n,void 0,void 0)}function ue(t){this.pe=t,this.Zd=this.uc=this.mb=this.$b=null}function ce(t,e){this.name=t,this.value=e}i=oe.prototype,i.nb=function(t,e,n,i){return this.Tf(t,e,n,i)},i.Tf=function(t,e,n,i){l(e)||(e&&(se[0]=e.toString()),e=se);for(var r=0;r<e.length;r++){var o=At(t,e[r],n||this.handleEvent,i||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},i.Oc=function(t,e,n,i){return this.je(t,e,n,i)},i.je=function(t,e,n,i,r){if(l(e))for(var o=0;o<e.length;o++)this.je(t,e[o],n,i,r);else{if(t=xt(t,e,n||this.handleEvent,i,r||this.i||this),!t)return this;this.o[t.key]=t}return this},i.ed=function(t,e,n,i,r){if(l(e))for(var o=0;o<e.length;o++)this.ed(t,e[o],n,i,r);else n=n||this.handleEvent,i=p(i)?!!i.capture:!!i,r=r||this.i||this,n=Vt(n),i=!!i,e=Et(t)?t.jb(e,n,i,r):t&&(t=qt(t))?t.jb(e,n,i,r):null,e&&(Nt(e),delete this.o[e.key])},i.pb=function(){H(this.o,function(t,e){this.o.hasOwnProperty(e)&&Nt(t)},this),this.o={}},i.F=function(){oe.L.F.call(this),this.pb()},i.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ae.prototype.Md=null,ae.prototype.reset=function(t,e,n,i,r){this.mb=t,delete this.Md},ae.prototype.Bg=function(t){this.Md=t},ae.prototype.Ge=function(t){this.mb=t},ce.prototype.toString=function(){return this.name};var he=new ce("SEVERE",1e3),le=new ce("WARNING",900),de=new ce("INFO",800),fe=new ce("CONFIG",700),pe=new ce("FINE",500);i=ue.prototype,i.getName=function(){return this.pe},i.getParent=function(){return this.$b},i.pf=function(){return this.uc||(this.uc={}),this.uc},i.Ge=function(t){this.mb=t},i.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(S("Root logger has no level set."),null)},i.Pf=function(t){return t.value>=this.Qd().value},i.log=function(t,e,n){this.Pf(t)&&(f(e)&&(e=e()),this.gf(this.uf(t,e,n)))},i.uf=function(t,e,n){return t=new ae(t,String(e),this.pe),n&&t.Bg(n),t},i.ca=function(t,e){this.log(he,t,e)},i.T=function(t,e){this.log(le,t,e)},i.info=function(t,e){this.log(de,t,e)},i.lf=function(t){this.log(pe,t,void 0)},i.gf=function(t){for(var e=this;e;)e.We(t),e=e.getParent()},i.We=function(t){if(this.Zd)for(var e,n=0;e=this.Zd[n];n++)e(t)},i.Fg=function(t){this.$b=t},i.Qe=function(t,e){this.pf()[t]=e};var ve={},me=null;function ye(t){var e;if(me||(me=new ue(""),ve[""]=me,me.Ge(fe)),!(e=ve[t])){e=new ue(t);var n=t.lastIndexOf("."),i=t.substr(n+1);n=ye(t.substr(0,n)),n.Qe(i,e),e.Fg(n),ve[t]=e}return e}function ge(t,e){t&&t.info(e,void 0)}function be(t,e){t&&t.lf(e)}function _e(){this.s=ye("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}i=_e.prototype,i.Id=function(){this.Wc=!1},i.Tg=function(t,e,n,i,r){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+e+"\n"+o.Xf(r)})},i.Ug=function(t,e,n,i,r,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+r+" "+o})},i.Wa=function(t,e,n){var i=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+i.ng(e)+(n?" "+n:"")})},i.Sg=function(t){this.info(function(){return"TIMEOUT: "+t})},i.debug=function(t){be(this.s,t)},i.cb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},i.info=function(t){ge(this.s,t)},i.T=function(t){var e=this.s;e&&e.T(t,void 0)},i.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},i.ng=function(t){if(!this.Wc)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(var n=0;n<e.length;n++)l(e[n])&&this.Wf(e[n]);return $t(e)}catch(i){return this.debug("Exception parsing expected JS array - probably was not JS"),t}},i.Wf=function(t){if(!(2>t.length||(t=t[1],!l(t)||1>t.length))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},i.Xf=function(t){if(!this.Wc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].split("=");if(1<i.length){var r=i[0];i=i[1];var o=r.split("_");e=2<=o.length&&"type"==o[1]?e+(r+"=")+i+"&":e+(r+"=redacted&")}}return e};var we=new Ut;function Ee(t){gt.call(this,"serverreachability",t)}function Ce(t){we.dispatchEvent(new Ee(we,t))}function Te(t,e){gt.call(this,"statevent",t),this.stat=e}function Se(t){we.dispatchEvent(new Te(we,t))}function ke(t,e,n){gt.call(this,"timingevent",t),this.size=e,this.rtt=n}function Ie(t,e,n){we.dispatchEvent(new ke(we,t,e,n))}function De(t,e){if(!f(t))throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}E(Ee,gt),E(Te,gt),E(ke,gt);var Ae={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},Oe={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Me(){}function xe(){}Me.prototype.pd=null,Me.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var Le,Ne={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function Re(){gt.call(this,"d")}function Pe(){gt.call(this,"c")}function Be(){}function Fe(t,e,n,i,r){this.b=t,this.a=e,this.ra=n,this.R=i,this.Xc=r||1,this.Fc=new oe(this),this.Ua=qe,t=it?125:void 0,this.Vc=new ne(t),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}E(Re,gt),E(Pe,gt),E(Be,Me),Be.prototype.Dd=function(){var t=this.Wd();return t?new ActiveXObject(t):new XMLHttpRequest},Be.prototype.Mf=function(){var t={};return this.Wd()&&(t[0]=!0,t[1]=!0),t},Be.prototype.Wd=function(){if(!this.be&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.be=n}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.be},Le=new Be;var qe=45e3;function je(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}var Ve={},Ue={};function $e(t){if(t.H&&"function"==typeof t.H)return t.H();if(a(t))return t.split("");if(d(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}return Q(t)}function We(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(d(t)||a(t))M(t,e,n);else{if(t.W&&"function"==typeof t.W)var i=t.W();else if(t.H&&"function"==typeof t.H)i=void 0;else if(d(t)||a(t)){i=[];for(var r=t.length,o=0;o<r;o++)i.push(o)}else i=K(t);r=$e(t),o=r.length;for(var s=0;s<o;s++)e.call(n,r[s],i&&i[s],t)}}function He(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else t&&this.addAll(t)}function Qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}i=Fe.prototype,i.ga=function(t){this.A=t},i.setTimeout=function(t){this.Ua=t},i.He=function(t){this.Ra=t},i.Gg=function(t){this.ba=t},i.la=function(){return this.ba},i.kd=function(t,e){this.ic=1,this.ua=t.clone().Ub(),this.Da=e,this.yc=!0,this.Ce(null)},i.jd=function(t,e,n){this.ic=1,this.ua=t.clone().Ub(),this.Da=null,this.yc=e,this.Ce(n)},i.Ce=function(t){this.qb=w(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?t:null),0<this.Ra&&(this.ac=new re(b(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),t=this.A?z(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),Ce(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},i.mg=function(t){t=t.target;var e=this.ac;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.mf()):this.Me(t)},i.Me=function(t){try{t==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(n){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.cb(n,function(){return"ResponseText: "+e.h.ya()})}else this.a.cb(n,"No response text")}},i.hg=function(){var t=this.h.ma(),e=this.h.Ud(),n=this.h.za();if(!(3>t||3==t&&!it&&!this.h.ya())){this.Za||4!=t||7==e||Ce(8==e||0>=n?3:2),this.Fb();var i=this.h.za();if(this.w=i,e=this.h.ya(),!e){var r=this;this.a.debug(function(){return"No response text for uri "+r.pa+" status "+i})}if(this.S=200==i,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,t,i),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,Se(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(t,e),it&&this.S&&3==t&&this.Ng()):(this.a.Wa(this.R,e,null),this.Yc(e)),4==t&&this.Ia(),this.S&&!this.Za&&(4==t?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==i&&0<e.indexOf("Unknown SID")?(this.I=3,Se(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,Se(13),this.a.T("XMLHTTP Bad status "+i+" ("+this.R+")")),this.Ia(),this.Kb()}},i.Ig=function(){return this.Ed&&!this.lb},i.sf=function(){if(this.h){var t=this.h.kb("X-HTTP-Initial-Response");if(t&&!F(t))return t}return null},i.Ag=function(){this.Ed=!0},i.Fd=function(t,e){for(var n=!0;!this.Za&&this.Bb<e.length;){var i=this.vf(e);if(i==Ue){4==t&&(this.I=4,Se(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(i==Ve){this.I=4,Se(15),this.a.Wa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,i,null),this.Yc(i)}4==t&&0==e.length&&(this.I=1,Se(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},i.kg=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Bb<e.length&&(this.Fb(),this.Fd(t,e),this.S&&4!=t&&this.eb())}},i.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},i.vf=function(t){var e=this.Bb,n=t.indexOf("\n",e);return-1==n?Ue:(e=Number(t.substring(e,n)),isNaN(e)?Ve:(n+=1,n+e>t.length?Ue:(t=t.substr(n,e),this.Bb=n+e,t)))},i.yg=function(t){this.ic=2,this.ua=t.clone().Ub(),t=!1,s.navigator&&s.navigator.sendBeacon&&(t=s.navigator.sendBeacon(this.ua.toString(),"")),!t&&s.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=w(),this.eb()},i.cancel=function(){this.Za=!0,this.Ia()},i.tg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Fb(),this.eb())},i.eb=function(){this.hd=w()+this.Ua,this.Ke(this.Ua)},i.Ke=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=De(b(this.gg,this),t)},i.Fb=function(){this.Ga&&(s.clearTimeout(this.Ga),this.Ga=null)},i.gg=function(){this.Ga=null;var t=w();0<=t-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-t))},i.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(Ce(3),Se(17)),this.Ia(),this.I=2,this.Kb()},i.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},i.Ia=function(){this.Fb();var t=this.ac;t&&"function"==typeof t.bb&&t.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(t=this.h,this.h=null,t.abort(),t.bb())},i.Hc=function(){return this.I},i.Yc=function(t){try{this.b.ue(this,t),Ce(4)}catch(e){this.a.cb(e,"Error in httprequest callback")}},i=He.prototype,i.C=function(){return this.j},i.H=function(){this.wc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},i.W=function(){return this.wc(),this.o.concat()},i.va=function(t){return Qe(this.D,t)},i.X=function(){return 0==this.j},i.clear=function(){this.D={},this.j=this.o.length=0},i.remove=function(t){return!!Qe(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.wc(),!0)},i.wc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];Qe(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var i={};for(e=t=0;t<this.o.length;)n=this.o[t],Qe(i,n)||(this.o[e++]=n,i[n]=1),t++;this.o.length=e}},i.get=function(t,e){return Qe(this.D,t)?this.D[t]:e},i.set=function(t,e){Qe(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},i.addAll=function(t){if(t instanceof He)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},i.forEach=function(t,e){for(var n=this.W(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}},i.clone=function(){return new He(this)};var Ke=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ze(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ge(t,e){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,t instanceof Ge?(this.O=void 0!==e?e:t.O,this.tb(t.qa),this.cd(t.zb),this.rb(t.xa),this.sb(t.Ca),this.ec(t.K),this.bd(t.P.clone()),this.$c(t.ib)):t&&(n=String(t).match(Ke))?(this.O=!!e,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!e,this.P=new an(null,this.O))}function Xe(t){return t instanceof Ge?t.clone():new Ge(t,void 0)}function Ye(t,e,n,i){var r=new Ge(null,void 0);return t&&r.tb(t),e&&r.rb(e),n&&r.sb(n),i&&r.ec(i),r}function Je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ze(t,e,n){return a(t)?(t=encodeURI(t).replace(e,tn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}i=Ge.prototype,i.toString=function(){var t=[],e=this.qa;e&&t.push(Ze(e,en,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.zb)&&t.push(Ze(e,en,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.Ca,null!=n&&t.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ze(n,"/"==n.charAt(0)?rn:nn,!0))),(n=this.Rd())&&t.push("?",n),(n=this.ib)&&t.push("#",Ze(n,sn)),t.join("")},i.resolve=function(t){var e=this.clone(),n=t.Hf();n?e.tb(t.qa):n=t.If(),n?e.cd(t.zb):n=t.Ic(),n?e.rb(t.xa):n=t.Ff();var i=t.K;if(n)e.sb(t.Ca);else if(n=t.ae()){if("/"!=i.charAt(0))if(this.Ic()&&!this.ae())i="/"+i;else{var r=e.K.lastIndexOf("/");-1!=r&&(i=e.K.substr(0,r+1)+i)}if(r=i,".."==r||"."==r)i="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.ec(i):n=t.Gf(),n?e.bd(t.P.clone()):n=t.Ef(),n&&e.$c(t.ib),e},i.clone=function(){return new Ge(this)},i.tb=function(t,e){this.U(),(this.qa=e?Je(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},i.Hf=function(){return!!this.qa},i.cd=function(t,e){this.U(),this.zb=e?Je(t):t},i.If=function(){return!!this.zb},i.rb=function(t,e){this.U(),this.xa=e?Je(t,!0):t},i.Ic=function(){return!!this.xa},i.sb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},i.Ff=function(){return null!=this.Ca},i.ec=function(t,e){this.U(),this.K=e?Je(t,!0):t},i.ae=function(){return!!this.K},i.Gf=function(){return""!==this.P.toString()},i.bd=function(t,e){this.U(),t instanceof an?(this.P=t,this.P.ad(this.O)):(e||(t=Ze(t,on)),this.P=new an(t,this.O))},i.Rd=function(){return this.P.toString()},i.getQuery=function(){return this.Rd()},i.l=function(t,e){this.U(),this.P.set(t,e)},i.dc=function(t,e){this.U(),l(e)||(e=[String(e)]),this.P.Ie(t,e)},i.$c=function(t,e){this.U(),this.ib=e?Je(t):t},i.Ef=function(){return!!this.ib},i.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),this},i.removeParameter=function(t){return this.U(),this.P.remove(t),this},i.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},i.ad=function(t){this.O=t,this.P&&this.P.ad(t)};var en=/[#\/\?@]/g,nn=/[#\?:]/g,rn=/[#\?]/g,on=/[#\?@]/g,sn=/#/g;function an(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function un(){}function cn(){}function hn(t,e){this.b=t,this.a=e,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function ln(){this.od=this.$d=null}function dn(t){this.D=new He,t&&this.addAll(t)}function fn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[v]||(t[v]=++m)):e.substr(0,1)+t}function pn(t,e){this.Pc=t,this.map=e,this.context=null}function vn(t){this.me=t||mn,s.PerformanceNavigationTiming?(t=s.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(s.vc&&s.vc.ke&&s.vc.ke()&&s.vc.ke().nh),this.Xb=t?this.me:1,this.v=null,1<this.Xb&&(this.v=new dn),this.f=null,this.ba=[]}i=an.prototype,i.$=function(){if(!this.m&&(this.m=new He,this.j=0,this.ja)){var t=this;ze(this.ja,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},i.C=function(){return this.$(),this.j},i.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},i.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},i.clear=function(){this.Oa(),this.m=null,this.j=0},i.X=function(){return this.$(),0==this.j},i.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},i.forEach=function(t,e){this.$(),this.m.forEach(function(n,i){M(n,function(n){t.call(e,n,i,this)},this)},this)},i.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},i.H=function(t){this.$();var e=[];if(a(t))this.va(t)&&(e=P(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=P(e,t[n])}return e},i.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},i.get=function(t,e){return t?(t=this.H(t),0<t.length?String(t[0]):e):e},i.Ie=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),B(e)),this.j+=e.length)},i.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.H(i);for(var o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}}return this.ja=t.join("&")},i.Oa=function(){this.ja=null},i.clone=function(){var t=new an;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},i.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},i.ad=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Ie(n,t))},this)),this.O=t},i.extend=function(t){for(var e=0;e<arguments.length;e++)We(arguments[e],function(t,e){this.add(e,t)},this)},E(cn,un),i=hn.prototype,i.g=null,i.ga=function(t){this.A=t},i.connect=function(t){this.K=t,t=this.b.Sd(this.K),Se(3);var e=this.b.Ib.$d;null!=e?(this.na=this.b.$a(e[0]),this.g=1,this.xd()):(t.dc("MODE","init"),!this.b.ta&&this.b.aa&&t.dc("X-HTTP-Session-Id",this.b.aa),this.f=new Fe(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(t,!1,null),this.g=0)},i.xd=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Ib.od;if(null!=t)this.a.debug(function(){return"Buffered"}),Se(4),t?(Se(10),this.b.ub(this,!1)):(Se(11),this.b.ub(this,!0));else{this.f=new Fe(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Pd(this.na,this.K);Se(4),e.dc("TYPE","xmlhttp");var n=this.b.aa,i=this.b.Kc;n&&i&&e.l(n,i),this.f.jd(e,!1,this.na)}},i.Jb=function(t){return this.b.Jb(t)},i.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},i.de=function(){return!1},i.ue=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(t),e){try{var n=this.b.kc.zc(e)}catch(i){return this.a.cb(i),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?Se(6):"11111"==e?(Se(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),Se(11),this.b.ub(this,!0))):(Se(7),this.bc=!1))},i.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),Se(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),Se(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?Se(8):1==this.g&&Se(9),this.b.dd(this))},i.pc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");this.Ad=e||null,this.b.aa&&((t=t.kb("X-HTTP-Session-Id"))?this.b.Fe(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},i.fc=function(){return this.b.fc()},i.Ba=function(){return this.b.Ba()},i.Ze=function(){return!et||10<=Number(ht)},i=dn.prototype,i.C=function(){return this.D.C()},i.add=function(t){this.D.set(fn(t),t)},i.addAll=function(t){t=$e(t);for(var e=t.length,n=0;n<e;n++)this.add(t[n])},i.pb=function(t){t=$e(t);for(var e=t.length,n=0;n<e;n++)this.remove(t[n])},i.remove=function(t){return this.D.remove(fn(t))},i.clear=function(){this.D.clear()},i.X=function(){return this.D.X()},i.contains=function(t){return this.D.va(fn(t))},i.H=function(){return this.D.H()},i.clone=function(){return new dn(this)};var mn=10;function yn(){this.xg=this.rg=void 0}function gn(){this.jg=new yn}function bn(t,e){var n=new _e;n.debug("TestLoadImage: loading "+t);var i=new Image;i.onload=_(_n,n,i,"TestLoadImage: loaded",!0,e),i.onerror=_(_n,n,i,"TestLoadImage: error",!1,e),i.onabort=_(_n,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=_(_n,n,i,"TestLoadImage: timeout",!1,e),s.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}function _n(t,e,n,i,r){try{t.debug(n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(o){t.cb(o)}}i=vn.prototype,i.ld=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Xb=this.me,this.v=new dn,this.f&&(this.oc(this.f),this.f=null))},i.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},i.xf=function(){return this.f?1:this.v?this.v.C():0},i.Jc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},i.oc=function(t){this.v?this.v.add(t):this.f=t},i.ze=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},i.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(M(this.v.H(),function(t){t.cancel()}),this.v.clear())},i.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var t=this.ba;return M(this.v.H(),function(e){t=t.concat(e.la())}),t}return B(this.ba)},i.Re=function(t){this.ba=this.ba.concat(t)},i.$e=function(){this.ba.length=0},yn.prototype.stringify=function(t){return s.JSON.stringify(t,this.rg)},yn.prototype.parse=function(t){return s.JSON.parse(t,this.xg)},gn.prototype.hf=function(t,e,n){var i=n||"";try{We(t,function(t,n){var r=t;p(t)&&(r=$t(t)),e.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}},gn.prototype.jf=function(t,e,n){for(var i=-1;;){var r=["count="+e];-1==i?0<e?(i=t[0].Pc,r.push("ofs="+i)):i=0:r.push("ofs="+i);for(var o=!0,s=0;s<e;s++){var a=t[s].Pc,u=t[s].map;if(a-=i,0>a)i=Math.max(0,t[s].Pc-100),o=!1;else try{this.hf(u,r,"req"+a+"_")}catch(c){n&&n(u)}}if(o)return r.join("&")}},gn.prototype.zc=function(t){return this.jg.parse(t)};var wn=s.JSON.parse;function En(t){Ut.call(this),this.headers=new He,this.Xa=t||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=Cn,this.jc=this.lg=this.Ab=!1}E(En,Ut);var Cn="";En.prototype.s=ye("goog.net.XhrIo");var Tn=/^https?$/i,Sn=["POST","PUT"];function kn(t){return et&&dt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function In(t){return"content-type"==t.toLowerCase()}function Dn(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function An(t){var e="";return H(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function On(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}if(i)return t;if(n=An(n),a(t)){if(e=encodeURIComponent(String(e)),n=null!=n?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),i=t.indexOf("?"),0>i||i>n){i=n;var r=""}else r=t.substring(i+1,n);t=[t.substr(0,i),r,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function Mn(t){this.Bd=22,this.De=0,this.M=[],this.a=new _e,this.Ib=new ln,this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!u("internalChannelParams.failFast",t),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.vg=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.nf=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Od=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Xa=t&&t.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new vn(t&&t.concurrentRequestLimit),this.kc=new gn,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Nd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Id&&this.a.Id()}function xn(){}function Ln(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var i,r=arguments[n];if(0==r.lastIndexOf("/",0))e=r;else(i=""==e)||(i=e.length-1,i=0<=i&&e.indexOf("/",i)==i),e=i?e+r:e+"/"+r}return e}function Nn(){if(et&&!(10<=Number(ht)))throw Error("Environmental error: no available transport.")}function Rn(t,e){Ut.call(this),this.b=new Mn(e),this.yb=t,this.Qg=e&&e.testUrl?e.testUrl:Ln(this.yb,"test"),this.s=ye("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.zd&&(t?t["X-WebChannel-Client-Profile"]=e.zd:t={"X-WebChannel-Client-Profile":e.zd}),this.b.Eg(t),(t=e&&e.httpHeadersOverwriteParam)&&!F(t)&&this.b.Cg(t),this.Og=e&&e.supportsCrossDomainXhr||!1,this.zg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!F(e)&&(this.b.Dg(e),t=this.Rc,null!==t&&e in t&&(t=this.Rc,e in t&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.vd=new Fn(this)}function Pn(t){Re.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.ne=t)&&(t=this.ne,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Bn(t){Pe.call(this),this.status=1,this.errorCode=t}function Fn(t){this.b=t}i=En.prototype,i.Je=function(t){this.Ab=t},i.send=function(t,e,n,i){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Tb=t,this.I="",this.Pa=0,this.ge=e,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():Le.Vd(),this.c.onreadystatechange=b(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=b(function(t){this.re(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=b(this.re,this)));try{be(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(e,String(t),!0),this.Lc=!1}catch(o){return be(this.s,this.da("Error opening Xhr: "+o.message)),void this.Ld(o)}t=n||"";var r=this.headers.clone();i&&We(i,function(t,e){r.set(e,t)}),i=L(r.W()),n=s.FormData&&t instanceof s.FormData,!(0<=A(Sn,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=kn(this.c),be(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=b(this.Ua,this)):this.hc=ie(this.Ua,this.vb,this)),be(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(t),this.Qb=!1}catch(o){be(this.s,this.da("Send error: "+o.message)),this.Ld(o)}},i.df=function(){return this.Xa?this.Xa.Dd():Le.Dd()},i.Ua=function(){"undefined"!=typeof o&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,be(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},i.Ld=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Jd(),this.Gb()},i.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},i.abort=function(t){this.c&&this.ha&&(be(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},i.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),En.L.F.call(this)},i.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},i.eg=function(){this.se()},i.se=function(){if(this.ha&&"undefined"!=typeof o)if(this.mc[1]&&4==this.ma()&&2==this.za())be(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())ie(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){be(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},i.re=function(t,e){this.dispatchEvent(Dn(t,"progress")),this.dispatchEvent(Dn(t,e?"downloadprogress":"uploadprogress"))},i.Gb=function(t){if(this.c){this.yd();var e=this.c,n=this.mc[0]?c:null;this.mc=this.c=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(i){(t=this.s)&&t.ca("Problem encountered resetting onreadystatechange: "+i.message,void 0)}}},i.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(s.clearTimeout(this.hc),this.hc=null)},i.Ba=function(){return!!this.c},i.Mc=function(){return 4==this.ma()},i.Rf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Of()},i.Of=function(){var t=String(this.Tb).match(Ke)[1]||null;return!t&&s.self&&s.self.location&&(t=s.self.location.protocol,t=t.substr(0,t.length-1)),Tn.test(t?t.toLowerCase():"")},i.ma=function(){return this.c?this.c.readyState:0},i.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(t){return-1}},i.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(t){return be(this.s,"Can not get status: "+t.message),""}},i.ya=function(){try{return this.c?this.c.responseText:""}catch(t){return be(this.s,"Can not get responseText: "+t.message),""}},i.yf=function(t){if(this.c){var e=this.c.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wn(e)}},i.getResponseHeader=function(t){if(this.c&&this.Mc())return t=this.c.getResponseHeader(t),null===t?void 0:t},i.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},i.kb=function(t){return this.c?this.c.getResponseHeader(t):null},i.Ud=function(){return this.Pa},i.Hc=function(){return a(this.I)?this.I:String(this.I)},i.da=function(t){return t+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},i=Mn.prototype,i.tc=8,i.g=1,i.connect=function(t,e,n,i,r){this.a.debug("connect()"),Se(0),this.K=e,this.gb=n||{},i&&void 0!==r&&(this.gb.OSID=i,this.gb.OAID=r),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(t)},i.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var t=this.Yb++,e=this.hb.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Ya(e),new Fe(this,this.a,this.ra,t,void 0).yg(e)}this.qe()},i.bf=function(t){this.a.debug("connectTest_()"),this.Ja=new hn(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=On(t,this.N,this.A)),this.Ja.connect(e)},i.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},i.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(s.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(s.clearTimeout(this.ea),this.ea=null)},i.ga=function(t){this.A=t},i.Eg=function(t){this.Rb=t},i.Cg=function(t){this.N=t},i.Dg=function(t){this.aa=t},i.Fe=function(t){this.Kc=t},i.He=function(t){this.Ra=t},i.Hg=function(){this.gc=!0},i.Ee=function(t){this.i=t},i.Nf=function(){return!this.fd},i.Zc=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+$t(t)}),this.M.push(new pn(this.ag++,t)),3==this.g&&this.Dc()},i.qf=function(){return this.kf?0:this.nf},i.de=function(){return 0==this.g},i.getState=function(){return this.g},i.Dc=function(){this.G.ee()||this.ea||(this.ea=De(b(this.we,this),0),this.La=0)},i.Yf=function(t){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf())&&(this.a.debug("Going to retry POST"),this.ea=De(b(this.we,this,t),this.Xd(this.La)),this.La++,!0)},i.we=function(t){this.ea=null,this.Mg(t)},i.Mg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(t?this.le(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},i.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var t=this.Yb++,e=new Fe(this,this.a,"",t,void 0),n=this.A;this.Rb&&(n?(n=z(n),X(n,this.Rb)):n=this.Rb),null===this.N&&e.ga(n);var i=this.Hd(e),r=this.hb.clone();r.l("RID",t),0<this.Bd&&r.l("CVER",this.Bd),this.ta&&this.aa&&r.l("X-HTTP-Session-Id",this.aa),this.Ya(r),this.N&&n&&On(r,this.N,n),this.G.oc(e),this.Nd?(r.l("$req",i),r.l("SID","null"),e.Ag(),e.kd(r,null)):e.kd(r,i)},i.le=function(t){var e=t?t.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&On(n,this.N,this.A),e=new Fe(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.sg(t),t=this.Hd(e),e.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(e),e.kd(n,t)},i.Ya=function(t){this.i&&We({},function(e,n){t.l(n,e)})},i.Hd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?b(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,e,n),t.Gg(this.M.splice(0,e)),n},i.sg=function(t){this.M=t.la().concat(this.M)},i.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var t=this.ve;Kt||Jt(),Zt||(Kt(),Zt=!0),te.add(t,this),this.Ha=0}},i.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha)&&(this.a.debug("Going to retry GET"),this.rc++,this.ia=De(b(this.ve,this),this.Xd(this.Ha)),this.Ha++,!0)},i.ve=function(){this.ia=null,this.Kg()},i.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new Fe(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var t=this.md.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.fd?"0":"1"),t.l("AID",this.Sb),this.Ya(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&On(t,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(t,!0,this.na),this.a.debug("New Request created")},i.ub=function(t,e){this.a.debug("Test Connection Finished");var n=t.Ad;n&&this.G.ld(n),this.fd=this.Se&&e,this.w=t.w,this.af()},i.dd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},i.ue=function(t,e){if(0!=this.g&&(this.u==t||this.G.Jc(t)))if(this.w=t.w,!t.lb&&this.G.Jc(t)&&3==this.g){try{var n=this.kc.zc(e)}catch(i){n=null}l(n)&&3==n.length?this.Cf(n,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.lb||this.u==t)&&this.Hb(),F(e)||(n=this.kc.zc(e),this.dg(n,t))},i.Cf=function(t,e){0==t[0]?this.Bf(e):(this.he=t[1],e=this.he-this.Sb,0<e&&(t=t[2],this.a.debug(t+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Jg(t)&&!this.wa&&(this.wa=De(b(this.bg,this),6e3))))},i.Bf=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<t.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),Se(18)}},i.Jg=function(t){return 37500>t&&!this.Nf()&&0==this.Ha},i.$a=function(t){return this.Te?this.i?this.i.$a(t):t:null},i.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),Se(19))},i.Hb=function(){null!=this.wa&&(s.clearTimeout(this.wa),this.wa=null)},i.Tc=function(t){this.a.debug("Request complete");var e=null;if(this.u==t){this.Hb(),this.u=null;var n=2}else{if(!this.G.Jc(t))return;e=t.la(),this.G.ze(t),n=1}if(this.w=t.w,0!=this.g)if(t.S)1==n?(Ie(t.Da?t.Da.length:0,w()-t.qb,this.La),this.Dc()):this.Kd();else{var i=t.Hc();if(3==i||0==i&&0<this.w)this.a.debug("Not retrying due to error type");else{var r=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+je(i,r.w)}),1==n&&this.Yf(t)||2==n&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(e&&0<e.length&&this.G.Re(e),this.a.debug("Error: HTTP request failed"),i){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},i.Xd=function(t){var e=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},i.pc=function(t){if(this.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");e&&this.G.ld(e),this.aa&&((t=t.kb("X-HTTP-Session-Id"))?(this.Fe(t),this.hb.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},i.dg=function(t,e){for(var n=this.i&&this.i.sc?[]:null,i=0;i<t.length;i++){var r=t[i];if(this.Sb=r[0],r=r[1],2==this.g)if("c"==r[0]){this.ra=r[1],this.na=this.$a(r[2]);var o=r[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),o=r[4],null!=o&&(this.De=o,this.a.info("SVER="+this.De)),r=r[5],null!=r&&"number"==typeof r&&0<r&&(this.Db=r*=1.5,this.a.info("backChannelRequestTimeoutMs_="+r)),this.pc(e),this.g=3,this.i&&this.i.wd(),this.Lg(e)}else"stop"!=r[0]&&"close"!=r[0]||this.sa(7);else 3==this.g&&("stop"==r[0]||"close"==r[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==r[0]?this.sa(7):this.disconnect()):"noop"!=r[0]&&(n?n.push(r):this.i&&this.i.ud(r)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},i.Lg=function(t){this.md=this.Pd(this.na,this.K),t.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(t),t.tg(this.Db),this.u=t):this.Kd()},i.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=b(this.Pg,this);e||(e=new Ge("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||e.tb("https"),e.Ub()),bn(e.toString(),n)}else Se(2);this.cg(t)},i.Pg=function(t){t?(this.a.info("Successfully pinged google.com"),Se(2)):(this.a.info("Failed to ping google.com"),Se(1))},i.cg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.td(t),this.qe(),this.qd()},i.qe=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.$e(),B(this.M),this.M.length=0}this.i.sd()}},i.Sd=function(t){return t=this.Cd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},i.Pd=function(t,e){return t=this.Cd(this.fc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},i.Cd=function(t,e){var n=Xe(e);if(""!=n.xa)t&&n.rb(t+"."+n.xa),n.sb(n.Ca);else{var i=s.location;n=Ye(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return this.gb&&H(this.gb,function(t,e){n.l(e,t)}),t=this.aa,e=this.Kc,t&&e&&n.l(t,e),n.l("VER",this.tc),this.Ya(n),n},i.Jb=function(t){if(t&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return t=new En(this.Xa),t.Je(this.gc),t},i.Ba=function(){return!!this.i&&this.i.Ba()},i.fc=function(){return this.gc},i=xn.prototype,i.sc=null,i.wd=function(){},i.ud=function(){},i.td=function(){},i.sd=function(){},i.Ba=function(){return!0},i.Ue=function(){},i.$a=function(t){return t},Nn.prototype.cf=function(t,e){return new Rn(t,e)},E(Rn,Ut),i=Rn.prototype,i.addEventListener=function(t,e,n,i){Rn.L.addEventListener.call(this,t,e,n,i)},i.removeEventListener=function(t,e,n,i){Rn.L.removeEventListener.call(this,t,e,n,i)},i.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},i.close=function(){this.b.disconnect()},i.send=function(t){if(a(t)){var e={};e.__data__=t,this.b.Zc(e)}else this.zg?(e={},e.__data__=$t(t),this.b.Zc(e)):this.b.Zc(t)},i.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,Rn.L.F.call(this)},E(Pn,Re),E(Bn,Pe),E(Fn,xn),Fn.prototype.wd=function(){ge(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},Fn.prototype.ud=function(t){this.b.dispatchEvent(new Pn(t))},Fn.prototype.td=function(t){ge(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+t),this.b.dispatchEvent(new Bn(t))},Fn.prototype.sd=function(){ge(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var qn=_(function(t,e){function n(){}n.prototype=t.prototype;var i=new n;return t.apply(i,Array.prototype.slice.call(arguments,1)),i},Nn);function jn(){this.V=[],this.Z=[]}function Vn(t,e){if(k.call(this),this.oe=t||0,this.Wb=e||10,this.oe>this.Wb)throw Error(Un);this.fa=new jn,this.oa=new dn,this.Ac=0,this.Nc=null,this.Cb()}i=jn.prototype,i.Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},i.enqueue=function(t){this.Z.push(t)},i.ab=function(){return this.Vf(),this.V.pop()},i.C=function(){return this.V.length+this.Z.length},i.X=function(){return 0==this.V.length&&0==this.Z.length},i.clear=function(){this.V=[],this.Z=[]},i.contains=function(t){return 0<=A(this.V,t)||0<=A(this.Z,t)},i.remove=function(t){var e=this.V,n=O(e,t);return 0<=n?(Array.prototype.splice.call(e,n,1),e=!0):e=!1,e||R(this.Z,t)},i.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},E(Vn,k);var Un="[goog.structs.Pool] Min can not be greater than max";function $n(t,e){this.fe=t,this.gd=e}function Wn(t){this.Y=[],t&&this.Lf(t)}function Hn(){Wn.call(this)}function Qn(t,e){this.Gd=void 0,this.cc=new Hn,Vn.call(this,t,e)}function Kn(t,e,n,i){this.Jf=t,this.Ab=!!i,Qn.call(this,e,n)}i=Vn.prototype,i.Mb=function(){var t=w();if(!(null!=this.Nc&&t-this.Nc<this.Ac)){var e=this.qg();return e&&(this.Nc=t,this.oa.add(e)),e}},i.og=function(t){return!!this.oa.remove(t)&&(this.nc(t),!0)},i.qg=function(){for(var t;0<this.Td()&&(t=this.fa.ab(),!this.Sc(t));)this.Cb();return!t&&this.C()<this.Wb&&(t=this.xc()),t},i.nc=function(t){this.oa.remove(t),this.Sc(t)&&this.C()<this.Wb?this.fa.enqueue(t):this.Bc(t)},i.Cb=function(){for(var t=this.fa;this.C()<this.oe;)t.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(t.ab())},i.xc=function(){return{}},i.Bc=function(t){if("function"==typeof t.bb)t.bb();else for(var e in t)t[e]=null},i.Sc=function(t){return"function"!=typeof t.Ye||t.Ye()},i.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},i.C=function(){return this.fa.C()+this.oa.C()},i.rf=function(){return this.oa.C()},i.Td=function(){return this.fa.C()},i.X=function(){return this.fa.X()&&this.oa.X()},i.F=function(){if(Vn.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Bc(t.ab());delete this.fa},$n.prototype.getKey=function(){return this.fe},$n.prototype.clone=function(){return new $n(this.fe,this.gd)},i=Wn.prototype,i.ce=function(t,e){var n=this.Y;n.push(new $n(t,e)),this.$f(n.length-1)},i.Lf=function(t){if(t instanceof Wn){var e=t.W();if(t=t.H(),0>=this.C()){for(var n=this.Y,i=0;i<e.length;i++)n.push(new $n(e[i],t[i]));return}}else e=K(t),t=Q(t);for(i=0;i<e.length;i++)this.ce(e[i],t[i])},i.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(0>=e))return 1==e?N(t):(t[0]=t.pop(),this.Zf()),n.gd},i.Zf=function(){for(var t=0,e=this.Y,n=e.length,i=e[t];t<n>>1;){var r=this.tf(t),o=this.zf(t);if(r=o<n&&e[o].getKey()<e[r].getKey()?o:r,e[r].getKey()>i.getKey())break;e[t]=e[r],t=r}e[t]=i},i.$f=function(t){for(var e=this.Y,n=e[t];0<t;){var i=this.wf(t);if(!(e[i].getKey()>n.getKey()))break;e[t]=e[i],t=i}e[t]=n},i.tf=function(t){return 2*t+1},i.zf=function(t){return 2*t+2},i.wf=function(t){return t-1>>1},i.H=function(){for(var t=this.Y,e=[],n=t.length,i=0;i<n;i++)e.push(t[i].gd);return e},i.W=function(){for(var t=this.Y,e=[],n=t.length,i=0;i<n;i++)e.push(t[i].getKey());return e},i.va=function(t){return x(this.Y,function(e){return e.getKey()==t})},i.clone=function(){return new Wn(this)},i.C=function(){return this.Y.length},i.X=function(){return 0==this.Y.length},i.clear=function(){N(this.Y)},E(Hn,Wn),Hn.prototype.enqueue=function(t,e){this.ce(t,e)},Hn.prototype.ab=function(){return this.remove()},E(Qn,Vn),i=Qn.prototype,i.Mb=function(t,e){if(!t)return(t=Qn.L.Mb.call(this))&&this.Ac&&(this.Gd=s.setTimeout(b(this.Nb,this),this.Ac)),t;this.cc.enqueue(void 0!==e?e:100,t),this.Nb()},i.Nb=function(){for(var t=this.cc;0<t.C();){var e=this.Mb();if(!e)break;t.ab().apply(this,[e])}},i.nc=function(t){Qn.L.nc.call(this,t),this.Nb()},i.Cb=function(){Qn.L.Cb.call(this),this.Nb()},i.F=function(){Qn.L.F.call(this),s.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},E(Kn,Qn),Kn.prototype.xc=function(){var t=new En,e=this.Jf;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.Ab&&t.Je(!0),t},Kn.prototype.Sc=function(t){return!t.Ka&&!t.Ba()},Nn.prototype.createWebChannel=Nn.prototype.cf,Rn.prototype.send=Rn.prototype.send,Rn.prototype.open=Rn.prototype.open,Rn.prototype.close=Rn.prototype.close,Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Oe.COMPLETE="complete",xe.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",Ut.prototype.listen=Ut.prototype.nb,Kn.prototype.getObject=Kn.prototype.Mb,Kn.prototype.releaseObject=Kn.prototype.og,En.prototype.listenOnce=En.prototype.Oc,En.prototype.getLastError=En.prototype.Hc,En.prototype.getLastErrorCode=En.prototype.Ud,En.prototype.getStatus=En.prototype.za,En.prototype.getStatusText=En.prototype.Yd,En.prototype.getResponseJson=En.prototype.yf,En.prototype.getResponseText=En.prototype.ya,En.prototype.getResponseText=En.prototype.ya,En.prototype.send=En.prototype.send;var zn={createWebChannelTransport:qn,ErrorCode:Ae,EventType:Oe,WebChannel:xe,XhrIoPool:Kn},Gn=zn.createWebChannelTransport,Xn=zn.ErrorCode,Yn=zn.EventType,Jn=zn.WebChannel,Zn=zn.XhrIoPool;e["default"]=zn}.call(this,n("c8ba"))},c88d:function(t,e,n){var i=n("aad8").document;t.exports=i&&i.documentElement},c8b8:function(t,e,n){n("bb4d")("asyncIterator")},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},ca5a:function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},cad0:function(t,e,n){var i=n("5051"),r=n("ab4f"),o=n("2223"),s=Object.defineProperty;e.f=n("948a")?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},cadf:function(t,e,n){"use strict";var i=n("9c6c"),r=n("d53b"),o=n("84f2"),s=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},cb7c:function(t,e,n){var i=n("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},cba9:function(t,e,n){var i=n("669d"),r=n("aad8").document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},cc61:function(t,e,n){for(var i=n("53c9"),r=n("f40b"),o=n("4c35"),s=n("aad8"),a=n("1982"),u=n("42d9"),c=n("8d98"),h=c("iterator"),l=c("toStringTag"),d=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(f),v=0;v<p.length;v++){var m,y=p[v],g=f[y],b=s[y],_=b&&b.prototype;if(_&&(_[h]||a(_,h,d),_[l]||a(_,l,y),u[y]=d,g))for(m in i)_[m]||o(_,m,i[m],!0)}},cd51:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fbb0"),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},u=function(t){var e=[],n=0,i=0;while(n<t.length){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){o=t[n++];var s=t[n++],a=t[n++],u=((7&r)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],s=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],s=r+1<t.length,a=s?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,h=o>>2,l=(3&o)<<4|a>>4,d=(15&a)<<2|c>>6,f=63&c;u||(f=64,s||(d=64)),i.push(n[h],n[l],n[d],n[f])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],s=r<t.length,a=s?n[t.charAt(r)]:0;++r;var u=r<t.length,c=u?n[t.charAt(r)]:64;++r;var h=r<t.length,l=h?n[t.charAt(r)]:64;if(++r,null==o||null==a||null==c||null==l)throw Error();var d=o<<2|a>>4;if(i.push(d),64!=c){var f=a<<4&240|c>>2;if(i.push(f),64!=l){var p=c<<6&192|l;i.push(p)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){var e=a(t);return c.encodeByteArray(e,!0)},l=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var i in e)e.hasOwnProperty(i)&&(t[i]=f(t[i],e[i]));return t}function p(t,e,n){t[e]=n}var v=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"===typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,i))}},t}(),m=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""},y=function(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())},g=function(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]},b=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},_="FirebaseError",w=Error.captureStackTrace;function E(t){var e=w;return w=t,e}var C=function(){function t(t,e){if(this.code=t,this.message=e,w)w(this,T.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name=_,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}return t}();C.prototype=Object.create(Error.prototype),C.prototype.constructor=C,C.prototype.name=_;var T=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,i=this.errors[t],r=this.service+"/"+t;n=void 0===i?"Error":i.replace(this.pattern,function(t,n){var i=e[n];return void 0!==i?i.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+r+").";var o=new C(r,n);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=e[s]);return o},t}();function S(t){return JSON.parse(t)}function k(t){return JSON.stringify(t)}var I=function(t){var e={},n={},i={},r="";try{var o=t.split(".");e=S(l(o[0])||""),n=S(l(o[1])||""),r=o[2],i=n["d"]||{},delete n["d"]}catch(s){}return{header:e,claims:n,data:i,signature:r}},D=function(t){var e,n,i=I(t).claims,r=Math.floor((new Date).getTime()/1e3);return"object"===typeof i&&(i.hasOwnProperty("nbf")?e=i["nbf"]:i.hasOwnProperty("iat")&&(e=i["iat"]),n=i.hasOwnProperty("exp")?i["exp"]:e+86400),r&&e&&n&&r>=e&&r<=n},A=function(t){var e=I(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e["iat"]:null},O=function(t){var e=I(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},M=function(t){var e=I(t).claims;return"object"===typeof e&&!0===e["admin"]},x=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},L=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},N=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},R=function(t,e){return N(e,function(e,n){t[e]=n}),t},P=function(t){return R({},t)},B=function(t){return"object"===typeof t&&null!==t},F=function(t){for(var e in t)return!1;return!0},q=function(t){var e=0;for(var n in t)e++;return e},j=function(t,e,n){var i={};for(var r in t)i[r]=e.call(n,t[r],r,t);return i},V=function(t,e,n){for(var i in t)if(e.call(n,t[i],i,t))return i},U=function(t,e,n){var i=V(t,e,n);return i&&t[i]},$=function(t){for(var e in t)return e},W=function(t){var e=[],n=0;for(var i in t)e[n++]=t[i];return e},H=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},Q=function(t){var e=[];return N(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},K=function(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},z=function(){function t(){this.blockSize=-1}return t}(),G=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return i.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):i<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);r=(a<<5|a>>>27)+o+l+s+n[i]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;while(i<e){if(0==o)while(i<=n)this.compress_(t,i),i+=this.blockSize;if("string"===typeof t){while(i<e)if(r[o]=t.charCodeAt(i),++o,++i,o==this.blockSize){this.compress_(r),o=0;break}}else while(i<e)if(r[o]=t[i],++o,++i,o==this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},e}(z);function X(t,e){var n=new Y(t,e);return n.subscribe.bind(n)}var Y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=Z(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=tt),void 0===i.error&&(i.error=tt),void 0===i.complete&&(i.complete=tt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}}),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(i){"undefined"!==typeof console&&console.error&&console.error(i)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function J(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function Z(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r in t&&"function"===typeof t[r])return!0}return!1}function tt(){}var et=function(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r){var o=t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".";throw new Error(o)}};function nt(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var r=t+" failed: ";return r+=i+" argument ",r}function it(t,e,n,i){if((!i||n)&&"string"!==typeof n)throw new Error(nt(t,e,i)+"must be a valid firebase namespace.")}function rt(t,e,n,i){if((!i||n)&&"function"!==typeof n)throw new Error(nt(t,e,i)+"must be a valid function.")}function ot(t,e,n,i){if((!i||n)&&("object"!==typeof n||null===n))throw new Error(nt(t,e,i)+"must be a valid context object.")}var st=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var s=r-55296;i++,o(i<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(i)-56320;r=65536+(s<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},at=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};e.assert=o,e.assertionError=s,e.base64=c,e.base64Decode=l,e.base64Encode=h,e.CONSTANTS=r,e.deepCopy=d,e.deepExtend=f,e.patchProperty=p,e.Deferred=v,e.getUA=m,e.isMobileCordova=y,e.isNodeSdk=b,e.isReactNative=g,e.ErrorFactory=T,e.FirebaseError=C,e.patchCapture=E,e.jsonEval=S,e.stringify=k,e.decode=I,e.isAdmin=M,e.issuedAtTime=A,e.isValidFormat=O,e.isValidTimestamp=D,e.clone=P,e.contains=x,e.every=H,e.extend=R,e.findKey=V,e.findValue=U,e.forEach=N,e.getAnyKey=$,e.getCount=q,e.getValues=W,e.isEmpty=F,e.isNonNullObject=B,e.map=j,e.safeGet=L,e.querystring=Q,e.querystringDecode=K,e.Sha1=G,e.async=J,e.createSubscribe=X,e.errorPrefix=nt,e.validateArgCount=et,e.validateCallback=rt,e.validateContextObject=ot,e.validateNamespace=it,e.stringLength=at,e.stringToByteArray=st},ce10:function(t,e,n){var i=n("69a8"),r=n("6821"),o=n("c366")(!1),s=n("613b")("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);while(e.length>u)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},dc53:function(t,e,n){},dcbc:function(t,e,n){var i=n("2aba");t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e1fb:function(t,e,n){var i=n("ad20"),r=n("18cc").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}},e71f:function(t,e,n){"use strict";n("e89a")},e821:function(t,e,n){var i=n("2fde");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},e89a:function(t,e,n){"use strict";function i(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(n("c23d")),s=n("abfd"),a=n("a2cd"),u=n("c7b2"),c=n("cd51"),h=o.SDK_VERSION,l=new s.Logger("@firebase/firestore");function d(){return l.logLevel===s.LogLevel.DEBUG?r.DEBUG:l.logLevel===s.LogLevel.SILENT?r.SILENT:r.ERROR}function f(t){switch(t){case r.DEBUG:l.logLevel=s.LogLevel.DEBUG;break;case r.ERROR:l.logLevel=s.LogLevel.ERROR;break;case r.SILENT:l.logLevel=s.LogLevel.SILENT;break;default:l.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function p(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(l.logLevel<=s.LogLevel.DEBUG){var r=n.map(m);l.debug.apply(l,["Firestore ("+h+") ["+t+"]: "+e].concat(r))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=s.LogLevel.ERROR){var i=e.map(m);l.error.apply(l,["Firestore ("+h+"): "+t].concat(i))}}function m(t){if("string"===typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function y(t){var e="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function g(t,e){t||y(e)}(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["ERROR"]=1]="ERROR",t[t["SILENT"]=2]="SILENT"})(r||(r={}));var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&y("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||y("Platform not set"),t.platform},t}();function _(){return b.getPlatform().emptyByteString}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=function(t){function e(e,n){var i=t.call(this,n)||this;return i.code=e,i.message=n,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return a.__extends(e,t),e}(Error);function C(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new E(w.INVALID_ARGUMENT,t)}for(var i in n.prototype=t.prototype,t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){return void 0!==t?t:e}function k(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Number(n);isNaN(i)||e(i,t[n])}}function I(t){var e=[];return D(t,function(t,n){return e.push(n)}),e}function D(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A(t){for(var e in g(null!=t&&"object"===typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function O(t){g(t&&"object"===typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function M(t,e,n){if(e.length!==n)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires "+Y(n,"argument")+", but was called with "+Y(e.length,"argument")+".")}function x(t,e,n){if(e.length<n)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Y(n,"argument")+", but was called with "+Y(e.length,"argument")+".")}function L(t,e,n,i){if(e.length<n||e.length>i)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+i+" arguments, but was called with "+Y(e.length,"argument")+".")}function N(t,e,n,i){if(!(e instanceof Array)||e.length<i)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+Y(i,"element")+".")}function R(t,e,n,i){$(t,e,X(n)+" argument",i)}function P(t,e,n,i){void 0!==i&&R(t,e,n,i)}function B(t,e,n,i){$(t,e,n+" option",i)}function F(t,e,n,i){void 0!==i&&B(t,e,n,i)}function q(t,e,n,i,r){if(!(i instanceof Array))throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+H(i));for(var o=0;o<i.length;++o)if(!r(i[o]))throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+H(i[o]))}function j(t,e,n,i,r){void 0!==i&&q(t,e,n,i,r)}function V(t,e,n,i,r){for(var o=[],s=0,a=r;s<a.length;s++){var u=a[s];if(u===i)return;o.push(H(u))}var c=H(i);throw new E(w.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function U(t,e,n,i,r){void 0!==i&&V(t,e,n,i,r)}function $(t,e,n,i){var r=!1;if(r="object"===e?W(i):"non-empty string"===e?"string"===typeof i&&""!==i:typeof i===e,!r){var o=H(i);throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+o)}}function W(t){return"object"===typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function H(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"===typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"===typeof t||"boolean"===typeof t)return""+t;if("object"===typeof t){if(t instanceof Array)return"an array";var e=Q(t);return e?"a custom "+e+" object":"an object"}return"function"===typeof t?"a function":y("Unknown wrong type: "+typeof t)}function Q(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/,n=e.exec(t.constructor.toString());if(n&&n.length>1)return n[1]}return null}function K(t,e,n){if(void 0===n)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+X(e)+" argument, but it was undefined.")}function z(t,e,n){D(e,function(e,i){if(n.indexOf(e)<0)throw new E(w.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function G(t,e,n,i){var r=H(i);return new E(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+X(n)+" argument to be a "+e+", but it was: "+r)}function X(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Y(t,e){return t+" "+e+(1===t?"":"s")}var J=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return g(20===e.length,"Invalid auto ID: "+e),e},t}();function Z(t,e){return t<e?-1:t>e?1:0}function tt(t,e){return null!==t&&void 0!==t?!(!e||!t.isEqual(e)):t===e}function et(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function nt(t){return t+"\0"}function it(){if("undefined"===typeof Uint8Array)throw new E(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rt(){if(!b.getPlatform().base64Available)throw new E(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ot,st,at=function(){function t(t){rt(),this._binaryString=t}return t.fromBase64String=function(e){M("Blob.fromBase64String",arguments,1),R("Blob.fromBase64String","string",1,e),rt();try{var n=b.getPlatform().atob(e);return new t(n)}catch(i){throw new E(w.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+i)}},t.fromUint8Array=function(e){if(M("Blob.fromUint8Array",arguments,1),it(),!(e instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join("");return new t(n)},t.prototype.toBase64=function(){return M("Blob.toBase64",arguments,0),rt(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){M("Blob.toUint8Array",arguments,0),it();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Z(this._binaryString,t._binaryString)},t}(),ut=C(at,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ct=function(){function t(t,e){if(M("GeoPoint",arguments,2),R("GeoPoint","number",1,t),R("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new E(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new E(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Z(this._lat,t._lat)||Z(this._long,t._long)},t}(),ht=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new E(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new E(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new E(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new E(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3),i=1e6*(e-1e3*n);return new t(n,i)},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Z(this.nanoseconds,t.nanoseconds):Z(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),lt=function(){function t(t,e,n,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=i}return t}(),dt="(default)",ft=function(){function t(t,e){this.projectId=t,this.database=e||dt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===dt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Z(this.projectId,t.projectId)||Z(this.database,t.database)},t}(),pt="__name__",vt=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&y("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&y("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var i=Object.create(Object.getPrototypeOf(this));return i.init(t,e,n),i},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"===typeof e?n.push(e):y("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,g(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return g(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return g(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return g(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return g(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new E(w.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");var n=t.split("/").filter(function(t){return t.length>0});return new e(n)},e.EMPTY_PATH=new e([]),e}(vt),yt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.isValidIdentifier=function(t){return yt.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===pt},e.keyField=function(){return new e([pt])},e.fromServerFormat=function(t){var n=[],i="",r=0,o=function(){if(0===i.length)throw new E(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(i),i=""},s=!1;while(r<t.length){var a=t[r];if("\\"===a){if(r+1===t.length)throw new E(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new E(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new E(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(vt),bt=function(){function t(e){this.path=e,g(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===mt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return mt.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2===0},t.fromSegments=function(e){return new t(new mt(e.slice()))},t.fromPathString=function(e){return new t(mt.fromString(e))},t.EMPTY=new t(new mt([])),t}(),_t=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return bt.comparator(t.key,e.key)},t}(),wt=function(t){function e(e,n,i,r,o){var s=t.call(this,e,n)||this;return s.data=i,s.proto=o,s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var i=e.field(t),r=n.field(t);return void 0!==i&&void 0!==r?i.compareTo(r):y("Trying to compare documents on fields that don't exist")},e}(_t),Et=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.hasCommittedMutations=!(!i||!i.hasCommittedMutations),r}return a.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(_t),Ct=function(t){function e(e,n){return t.call(this,e,n)||this}return a.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(_t),Tt=function(){function t(t,e){this.comparator=t,this.root=e||kt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))},t.prototype.get=function(t){var e=this.root;while(!e.isEmpty()){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){var e=0,n=this.root;while(!n.isEmpty()){var i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new St(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new St(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new St(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new St(this.root,t,this.comparator,!0)},t}(),St=function(){function t(t,e,n,i){this.isReverse=i,this.nodeStack=[];var r=1;while(!t.isEmpty())if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){g(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse){t=t.left;while(!t.isEmpty())this.nodeStack.push(t),t=t.right}else{t=t.right;while(!t.isEmpty())this.nodeStack.push(t),t=t.left}return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),kt=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()},t.prototype.remove=function(e,n){var i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(e,r.key)){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw y("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw y("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),It=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new kt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();kt.EMPTY=new It,function(t){t[t["NullValue"]=0]="NullValue",t[t["BooleanValue"]=1]="BooleanValue",t[t["NumberValue"]=2]="NumberValue",t[t["TimestampValue"]=3]="TimestampValue",t[t["StringValue"]=4]="StringValue",t[t["BlobValue"]=5]="BlobValue",t[t["RefValue"]=6]="RefValue",t[t["GeoPointValue"]=7]="GeoPointValue",t[t["ArrayValue"]=8]="ArrayValue",t[t["ObjectValue"]=9]="ObjectValue"}(ot||(ot={})),function(t){t[t["Default"]=0]="Default",t[t["Estimate"]=1]="Estimate",t[t["Previous"]=2]="Previous"}(st||(st={}));var Dt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(st.Estimate,n);case"previous":return new t(st.Previous,n);case"none":case void 0:return new t(st.Default,n);default:return y("fromSnapshotOptions() called with invalid options.")}},t}(),At=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){g(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type.");var e=Z(this.typeOrder,t.typeOrder);return e},t}(),Ot=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=ot.NullValue,e.internalValue=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(At),Mt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.BooleanValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Z(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(At),xt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.NumberValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Lt(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(At);function Lt(t,e){return t<e?-1:t>e?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}function Nt(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}var Rt=function(t){function e(e){return t.call(this,e)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Nt(this.internalValue,t.internalValue)},e}(xt),Pt=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Nt(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(xt),Bt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.StringValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Z(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(At),Ft=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.TimestampValue,n}return a.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof qt?-1:this.defaultCompareTo(t)},e}(At),qt=function(t){function e(e,n){var i=t.call(this)||this;return i.localWriteTime=e,i.previousValue=n,i.typeOrder=ot.TimestampValue,i}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===st.Estimate?new Ft(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===st.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Ft?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(At),jt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.BlobValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(At),Vt=function(t){function e(e,n){var i=t.call(this)||this;return i.databaseId=e,i.key=n,i.typeOrder=ot.RefValue,i}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:bt.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(At),Ut=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.GeoPointValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(At),$t=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.ObjectValue,n}return a.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,i){e[n]=i.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){var n=this.internalValue.getIterator(),i=t.internalValue.getIterator();while(n.hasNext()&&i.hasNext()){var r=n.getNext(),o=i.getNext();if(r.key!==o.key||!r.value.isEqual(o.value))return!1}return!n.hasNext()&&!i.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.internalValue.getIterator(),i=t.internalValue.getIterator();while(n.hasNext()&&i.hasNext()){var r=n.getNext(),o=i.getNext(),s=Z(r.key,o.key)||r.value.compareTo(o.value);if(s)return s}return Z(n.hasNext(),i.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(g(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var i=this.child(t.firstSegment());i instanceof e||(i=e.EMPTY);var r=i.set(t.popFirst(),n);return this.setChild(t.firstSegment(),r)},e.prototype.delete=function(t){if(g(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var i=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),i))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){g(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Tt(Z)),e}(At),Wt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ot.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(t.internalValue[i]);if(r)return r}return Z(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(At),Ht=Number,Qt=Ht.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Kt=Ht.MAX_SAFE_INTEGER||Math.pow(2,53)-1,zt=Ht.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t};function Gt(t){return null===t||void 0===t}function Xt(t){return zt(t)&&t<=Kt&&t>=Qt}var Yt,Jt=function(){function t(t,e,n,i,r,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=i,this.startAt=r,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[ae]:this.memoizedOrderBy=[new se(t),ae];else{g(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,i=0,r=this.explicitOrderBy;i<r.length;i++){var o=r[i];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var s=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:re.ASCENDING;this.memoizedOrderBy.push(s===re.ASCENDING?ae:ue)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){g(null==this.getInequalityFilterField()||!(e instanceof ee)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),g(!bt.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){g(!bt.isDocumentKey(this.path),"No ordering allowed for document query"),g(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){var i=n[e];t+=i.canonicalId(),t+=","}t+="|ob:";for(var r=0,o=this.orderBy;r<o.length;r++){var s=o[r];t+=s.canonicalId(),t+=","}Gt(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Gt(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt))},t.prototype.docComparator=function(t,e){for(var n=!1,i=0,r=this.orderBy;i<r.length;i++){var o=r[i],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return g(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!Gt(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ee&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof ee&&t.op===te.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return bt.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return bt.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var i=n[e];if(!i.field.isKeyField()&&void 0===t.field(i.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){var i=n[e];if(!i.matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){g(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Zt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(Ot.INSTANCE)){if(e!==te.EQUAL)throw new E(w.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new ne(t)}if(n.isEqual(Pt.NAN)){if(e!==te.EQUAL)throw new E(w.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new ie(t)}return new ee(t,e,n)},t}(),te=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return y("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),ee=function(t){function e(e,n,i){var r=t.call(this)||this;return r.field=e,r.op=n,r.value=i,r}return a.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){g(this.value instanceof Vt,"Comparing on key, but filter value not a RefValue"),g(this.op!==te.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=bt.comparator(t.key,e.key);return this.matchesComparison(n)}var i=t.field(this.field);return void 0!==i&&this.matchesValue(i)},e.prototype.matchesValue=function(t){var e=this;return this.op===te.ARRAY_CONTAINS?t instanceof Wt&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case te.LESS_THAN:return t<0;case te.LESS_THAN_OR_EQUAL:return t<=0;case te.EQUAL:return 0===t;case te.GREATER_THAN:return t>0;case te.GREATER_THAN_OR_EQUAL:return t>=0;default:return y("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==te.EQUAL&&this.op!==te.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Zt),ne=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Zt),ie=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"===typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Zt),re=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),oe=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){var i=n[e];t+=i.toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){g(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=t[i],o=this.position[i];if(r.field.isKeyField())g(o instanceof Vt,"Bound has a non-key value where the key path is being used."),n=bt.comparator(o.key,e.key);else{var s=e.field(r.field);g(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(r.dir===re.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],i=t.position[e];return n.isEqual(i)}return!0},t}(),se=function(){function t(t,e){this.field=t,void 0===e&&(e=re.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?wt.compareByKey(t,e):wt.compareByField(this.field,t,e);switch(this.dir){case re.ASCENDING:return n;case re.DESCENDING:return-1*n;default:return y("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ae=new se(gt.keyField(),re.ASCENDING),ue=new se(gt.keyField(),re.DESCENDING),ce=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6),i=e%1e6*1e3;return new t(new ht(n,i))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new ht(0,0)),t}();(function(t){t[t["Listen"]=0]="Listen",t[t["ExistenceFilterMismatch"]=1]="ExistenceFilterMismatch",t[t["LimboResolution"]=2]="LimboResolution"})(Yt||(Yt={}));var he,le=function(){function t(t,e,n,i,r,o){void 0===r&&(r=ce.MIN),void 0===o&&(o=_()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),de=function(){function t(t){this.comparator=t,this.data=new Tt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){var n=this.data.getIteratorFrom(t[0]);while(n.hasNext()){var i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}},t.prototype.forEachWhile=function(t,e){var n;n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();while(n.hasNext()){var i=n.getNext(),r=t(i.key);if(!r)return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new fe(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new fe(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;var n=this.data.getIterator(),i=e.data.getIterator();while(n.hasNext()){var r=n.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),fe=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),pe=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new de(gt.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ve=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),me=function(){function t(t,e){this.version=t,this.transformResults=e}return t}();(function(t){t[t["Set"]=0]="Set",t[t["Patch"]=1]="Patch",t[t["Transform"]=2]="Transform",t[t["Delete"]=3]="Delete"})(he||(he={}));var ye=function(){function t(t,e){this.updateTime=t,this.exists=e,g(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof wt&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof wt:(g(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return tt(this.updateTime,t.updateTime)&&this.exists===t.exists},t.NONE=new t,t}(),ge=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&g(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof wt?t.version:ce.MIN},t}(),be=function(t){function e(e,n,i){var r=t.call(this)||this;return r.key=e,r.value=n,r.precondition=i,r.type=he.Set,r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),g(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new wt(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var i=ge.getPostMutationVersion(t);return new wt(this.key,i,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ge),_e=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=i,o.precondition=r,o.type=he.Patch,o}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),g(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Ct(this.key,e.version);var n=this.patchDocument(t);return new wt(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var i=ge.getPostMutationVersion(t),r=this.patchDocument(t);return new wt(this.key,i,r,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof wt?t.data:$t.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var i=e.data.field(n);t=void 0!==i?t.set(n,i):t.delete(n)}}),t},e}(ge),we=function(t){function e(e,n){var i=t.call(this)||this;return i.key=e,i.fieldTransforms=n,i.type=he.Transform,i.precondition=ye.exists(!0),i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),g(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Ct(this.key,e.version);var n=this.requireDocument(t),i=this.serverTransformResults(t,e.transformResults),r=e.version,o=this.transformObject(n.data,i);return new wt(this.key,r,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var i=this.requireDocument(t),r=this.localTransformResults(n,e),o=this.transformObject(i.data,r);return new wt(this.key,i.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&et(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){g(t instanceof wt,"Unknown MaybeDocument type "+t);var e=t;return g(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];g(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<e.length;i++){var r=this.fieldTransforms[i],o=r.transform,s=null;t instanceof wt&&(s=t.field(r.field)||null),n.push(o.applyToRemoteDocument(s,e[i]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],i=0,r=this.fieldTransforms;i<r.length;i++){var o=r[i],s=o.transform,a=null;e instanceof wt&&(a=e.field(o.field)||null),n.push(s.applyToLocalView(a,t))}return n},e.prototype.transformObject=function(t,e){g(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var i=this.fieldTransforms[n],r=i.field;t=t.set(r,e[n])}return t},e}(ge),Ee=function(t){function e(e,n){var i=t.call(this)||this;return i.key=e,i.precondition=n,i.type=he.Delete,i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),g(null==e.transformResults,"Transform results received by DeleteMutation."),new Et(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&g(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Et(this.key,ce.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ge),Ce=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new qt(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),Te=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ke(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},i=0,r=this.elements;i<r.length;i++){var o=r[i];n(o)}return new Wt(e)},t.prototype.isEqual=function(e){return e instanceof t&&et(e.elements,this.elements)},t}(),Se=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ke(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},i=0,r=this.elements;i<r.length;i++){var o=r[i];n(o)}return new Wt(e)},t.prototype.isEqual=function(e){return e instanceof t&&et(e.elements,this.elements)},t}();function ke(t){return t instanceof Wt?t.internalValue.slice():[]}var Ie,De=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Ae(t){switch(t){case w.OK:return y("Treated status OK as error");case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return y("Unknown status code: "+t)}}function Oe(t){return Ae(t)&&t!==w.ABORTED}function Me(t){var e=Ie[t];if(void 0!==e)return xe(e)}function xe(t){if(void 0===t)return v("GRPC error has no .code"),w.UNKNOWN;switch(t){case Ie.OK:return w.OK;case Ie.CANCELLED:return w.CANCELLED;case Ie.UNKNOWN:return w.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return w.INTERNAL;case Ie.UNAVAILABLE:return w.UNAVAILABLE;case Ie.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Ie.NOT_FOUND:return w.NOT_FOUND;case Ie.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Ie.ABORTED:return w.ABORTED;case Ie.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Ie.DATA_LOSS:return w.DATA_LOSS;default:return y("Unknown status code: "+t)}}function Le(t){if(void 0===t)return Ie.OK;switch(t){case w.OK:return Ie.OK;case w.CANCELLED:return Ie.CANCELLED;case w.UNKNOWN:return Ie.UNKNOWN;case w.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case w.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case w.INTERNAL:return Ie.INTERNAL;case w.UNAVAILABLE:return Ie.UNAVAILABLE;case w.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case w.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case w.NOT_FOUND:return Ie.NOT_FOUND;case w.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case w.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case w.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case w.ABORTED:return Ie.ABORTED;case w.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case w.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case w.DATA_LOSS:return Ie.DATA_LOSS;default:return y("Unknown status code: "+t)}}function Ne(t){switch(t){case 200:return w.OK;case 400:return w.INVALID_ARGUMENT;case 401:return w.UNAUTHENTICATED;case 403:return w.PERMISSION_DENIED;case 404:return w.NOT_FOUND;case 409:return w.ABORTED;case 416:return w.OUT_OF_RANGE;case 429:return w.RESOURCE_EXHAUSTED;case 499:return w.CANCELLED;case 500:return w.UNKNOWN;case 501:return w.UNIMPLEMENTED;case 503:return w.UNAVAILABLE;case 504:return w.DEADLINE_EXCEEDED;default:return t>=200&&t<300?w.OK:t>=400&&t<500?w.FAILED_PRECONDITION:t>=500&&t<600?w.INTERNAL:w.UNKNOWN}}(function(t){t[t["OK"]=0]="OK",t[t["CANCELLED"]=1]="CANCELLED",t[t["UNKNOWN"]=2]="UNKNOWN",t[t["INVALID_ARGUMENT"]=3]="INVALID_ARGUMENT",t[t["DEADLINE_EXCEEDED"]=4]="DEADLINE_EXCEEDED",t[t["NOT_FOUND"]=5]="NOT_FOUND",t[t["ALREADY_EXISTS"]=6]="ALREADY_EXISTS",t[t["PERMISSION_DENIED"]=7]="PERMISSION_DENIED",t[t["UNAUTHENTICATED"]=16]="UNAUTHENTICATED",t[t["RESOURCE_EXHAUSTED"]=8]="RESOURCE_EXHAUSTED",t[t["FAILED_PRECONDITION"]=9]="FAILED_PRECONDITION",t[t["ABORTED"]=10]="ABORTED",t[t["OUT_OF_RANGE"]=11]="OUT_OF_RANGE",t[t["UNIMPLEMENTED"]=12]="UNIMPLEMENTED",t[t["INTERNAL"]=13]="INTERNAL",t[t["UNAVAILABLE"]=14]="UNAVAILABLE",t[t["DATA_LOSS"]=15]="DATA_LOSS"})(Ie||(Ie={}));var Re=new Tt(bt.comparator);function Pe(){return Re}function Be(){return Pe()}var Fe=new Tt(bt.comparator);function qe(){return Fe}var je=new Tt(bt.comparator);function Ve(){return je}var Ue=new de(bt.comparator);function $e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ue,i=0,r=t;i<r.length;i++){var o=r[i];n=n.add(o)}return n}var We=new de(Z);function He(){return We}var Qe,Ke,ze=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bt.comparator(e.key,n.key)}:function(t,e){return bt.comparator(t.key,e.key)},this.keyedMap=qe(),this.sortedSet=new Tt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;var n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();while(n.hasNext()){var r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i},t}();(function(t){t[t["Added"]=0]="Added",t[t["Removed"]=1]="Removed",t[t["Modified"]=2]="Modified",t[t["Metadata"]=3]="Metadata"})(Qe||(Qe={})),function(t){t[t["Local"]=0]="Local",t[t["Synced"]=1]="Synced"}(Ke||(Ke={}));var Ge,Xe=function(){function t(){this.changeMap=new Tt(bt.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Qe.Added&&n.type===Qe.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Qe.Metadata&&n.type!==Qe.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Qe.Modified&&n.type===Qe.Modified?this.changeMap=this.changeMap.insert(e,{type:Qe.Modified,doc:t.doc}):t.type===Qe.Modified&&n.type===Qe.Added?this.changeMap=this.changeMap.insert(e,{type:Qe.Added,doc:t.doc}):t.type===Qe.Removed&&n.type===Qe.Added?this.changeMap=this.changeMap.remove(e):t.type===Qe.Removed&&n.type===Qe.Modified?this.changeMap=this.changeMap.insert(e,{type:Qe.Removed,doc:n.doc}):t.type===Qe.Added&&n.type===Qe.Removed?this.changeMap=this.changeMap.insert(e,{type:Qe.Modified,doc:t.doc}):y("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ye=function(){function t(t,e,n,i,r,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,i,r){var o=[];return n.forEach(function(t){o.push({type:Qe.Added,doc:t})}),new t(e,n,ze.emptySet(n),o,i,r,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(this.fromCache!==t.fromCache||this.syncStateChanged!==t.syncStateChanged||!this.mutatedKeys.isEqual(t.mutatedKeys)||!this.query.isEqual(t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},t}(),Je=function(){function t(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var i,r=(i={},i[e]=Ze.createSynthesizedTargetChangeForCurrentChange(e,n),i);return new t(ce.MIN,r,He(),Pe(),$e())},t}(),Ze=function(){function t(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(_(),n,$e(),$e(),$e())},t}(),tn=function(){function t(t,e,n,i){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=i}return t}(),en=function(){function t(t,e){this.targetId=t,this.existenceFilter=e}return t}();(function(t){t[t["NoChange"]=0]="NoChange",t[t["Added"]=1]="Added",t[t["Removed"]=2]="Removed",t[t["Current"]=3]="Current",t[t["Reset"]=4]="Reset"})(Ge||(Ge={}));var nn=function(){function t(t,e,n,i){void 0===n&&(n=_()),void 0===i&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}return t}(),rn=function(){function t(){this.pendingResponses=0,this.documentChanges=an(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=$e(),e=$e(),n=$e();return this.documentChanges.forEach(function(i,r){switch(r){case Qe.Added:t=t.add(i);break;case Qe.Modified:e=e.add(i);break;case Qe.Removed:n=n.add(i);break;default:y("Encountered invalid change type: "+r)}}),new Ze(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=an()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),on=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=sn(),this.pendingTargetResets=new de(Z)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var i=n[e];t.newDoc instanceof wt?this.addDocumentToTarget(i,t.newDoc):t.newDoc instanceof Et&&this.removeDocumentFromTarget(i,t.key,t.newDoc)}for(var r=0,o=t.removedTargetIds;r<o.length;r++){i=o[r];this.removeDocumentFromTarget(i,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var i=e.ensureTargetState(n);switch(t.state){case Ge.NoChange:e.isActiveTarget(n)&&i.updateResumeToken(t.resumeToken);break;case Ge.Added:i.recordTargetResponse(),i.isPending||i.clearPendingChanges(),i.updateResumeToken(t.resumeToken);break;case Ge.Removed:i.recordTargetResponse(),i.isPending||e.removeTarget(n),g(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Ge.Current:e.isActiveTarget(n)&&(i.markCurrent(),i.updateResumeToken(t.resumeToken));break;case Ge.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),i.updateResumeToken(t.resumeToken));break;default:y("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):k(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,i=this.queryDataForActiveTarget(e);if(i){var r=i.query;if(r.isDocumentQuery())if(0===n){var o=new bt(r.path);this.removeDocumentFromTarget(e,o,new Et(o,ce.forDeletedDoc()))}else g(1===n,"Single document existence filter with count: "+n);else{var s=this.getCurrentDocumentCountForTarget(e);s!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}}},t.prototype.createRemoteEvent=function(t){var e=this,n={};k(this.targetStates,function(i,r){var o=e.queryDataForActiveTarget(i);if(o){if(r.current&&o.query.isDocumentQuery()){var s=new bt(o.query.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(i,s)||e.removeDocumentFromTarget(i,s,new Et(s,t))}r.hasPendingChanges&&(n[i]=r.toTargetChange(),r.clearPendingChanges())}});var i=$e();this.pendingDocumentTargetMapping.forEach(function(t,n){var r=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Yt.LimboResolution||(r=!1,!1)}),r&&(i=i.add(t))});var r=new Je(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,i);return this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=sn(),this.pendingTargetResets=new de(Z),r},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Qe.Modified:Qe.Added,i=this.ensureTargetState(t);i.addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var i=this.ensureTargetState(t);this.targetContainsDocument(t,e)?i.addDocumentChange(e,Qe.Removed):i.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t),n=e.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){var e=this.ensureTargetState(t);e.recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new rn),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new de(Z),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;g(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new rn;var n=this.metadataProvider.getRemoteKeysForTarget(t);n.forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){var n=this.metadataProvider.getRemoteKeysForTarget(t);return n.has(e)},t}();function sn(){return new Tt(bt.comparator)}function an(){return new Tt(bt.comparator)}var un=function(){var t={};return t[re.ASCENDING.name]="ASCENDING",t[re.DESCENDING.name]="DESCENDING",t}(),cn=function(){var t={};return t[te.LESS_THAN.name]="LESS_THAN",t[te.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",t[te.GREATER_THAN.name]="GREATER_THAN",t[te.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",t[te.EQUAL.name]="EQUAL",t[te.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",t}(),hn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ln(t,e){g(!Gt(t),e+" is missing")}function dn(t){return"number"===typeof t?t:"string"===typeof t?Number(t):y("can't parse "+t)}var fn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?w.UNKNOWN:xe(t.code);return new E(e,t.message||"")},t.prototype.toInt32Value=function(t){return Gt(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return e="object"===typeof t?t.value:t,Gt(e)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"===typeof t)return this.fromIso8601String(t);g(!!t,"Cannot deserialize null or undefined timestamp.");var e=dn(t.seconds||"0"),n=t.nanos||0;return new ht(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=hn.exec(t);if(g(!!n,"invalid timestamp: "+t),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}var r=new Date(t),o=Math.floor(r.getTime()/1e3);return new ht(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"===typeof t?(g(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),at.fromBase64String(t)):(g(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),at.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return g(!!t,"Trying to deserialize version that isn't set"),ce.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=mt.fromString(t);return g(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return g(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),g(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new bt(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?mt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){var t=new mt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]);return t.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new mt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return g(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Ot)return{nullValue:"NULL_VALUE"};if(t instanceof Mt)return{booleanValue:t.value()};if(t instanceof Rt)return{integerValue:""+t.value()};if(t instanceof Pt){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Bt?{stringValue:t.value()}:t instanceof $t?{mapValue:this.toMapValue(t)}:t instanceof Wt?{arrayValue:this.toArrayValue(t)}:t instanceof Ft?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Ut?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof jt?{bytesValue:this.toBytes(t.value())}:t instanceof Vt?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:y("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t["value_type"];if(pn(t,n,"nullValue"))return Ot.INSTANCE;if(pn(t,n,"booleanValue"))return Mt.of(t.booleanValue);if(pn(t,n,"integerValue"))return new Rt(dn(t.integerValue));if(pn(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Pt.NAN;if("Infinity"===t.doubleValue)return Pt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Pt.NEGATIVE_INFINITY}return new Pt(t.doubleValue)}if(pn(t,n,"stringValue"))return new Bt(t.stringValue);if(pn(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(pn(t,n,"arrayValue")){ln(t.arrayValue,"arrayValue");var i=t.arrayValue.values||[];return new Wt(i.map(function(t){return e.fromValue(t)}))}if(pn(t,n,"timestampValue"))return ln(t.timestampValue,"timestampValue"),new Ft(this.fromTimestamp(t.timestampValue));if(pn(t,n,"geoPointValue")){ln(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new Ut(new ct(r,o))}if(pn(t,n,"bytesValue")){ln(t.bytesValue,"bytesValue");var s=this.fromBlob(t.bytesValue);return new jt(s)}if(pn(t,n,"referenceValue")){ln(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),u=new ft(a.get(1),a.get(3)),c=new bt(this.extractLocalPathFromResourceName(a));return new Vt(u,c)}return y("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return g(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new wt(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,i){n[t]=e.toValue(i)}),n},t.prototype.fromFields=function(t){var e=this,n=t,i=$t.EMPTY;return D(n,function(t,n){i=i.set(new gt([t]),e.fromValue(n))}),i},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){g(!!t.found,"Tried to deserialize a found document from a missing document."),ln(t.found.name,"doc.found.name"),ln(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),i=this.fromFields(t.found.fields||{});return new wt(e,n,i,{},t.found)},t.prototype.fromMissing=function(t){g(!!t.missing,"Tried to deserialize a missing document from a found document."),g(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Et(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t["result"];return pn(t,e,"found")?this.fromFound(t):pn(t,e,"missing")?this.fromMissing(t):y("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Ge.Added:return"ADD";case Ge.Current:return"CURRENT";case Ge.NoChange:return"NO_CHANGE";case Ge.Removed:return"REMOVE";case Ge.Reset:return"RESET";default:return y("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof en)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof tn){if(t.newDoc instanceof wt){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof Et){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof nn){var n=void 0;return t.cause&&(n={code:Le(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return y("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t["response_type"];if(pn(t,n,"targetChange")){ln(t.targetChange,"targetChange");var i=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new nn(i,r,o,a||null)}else if(pn(t,n,"documentChange")){ln(t.documentChange,"documentChange"),ln(t.documentChange.document,"documentChange.name"),ln(t.documentChange.document.name,"documentChange.document.name"),ln(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),h=this.fromVersion(u.document.updateTime),l=this.fromFields(u.document.fields||{}),d=new wt(c,h,l,{},u.document),f=u.targetIds||[],p=u.removedTargetIds||[];e=new tn(f,p,d.key,d)}else if(pn(t,n,"documentDelete")){ln(t.documentDelete,"documentDelete"),ln(t.documentDelete.document,"documentDelete.document");var v=t.documentDelete;c=this.fromName(v.document),h=v.readTime?this.fromVersion(v.readTime):ce.forDeletedDoc(),d=new Et(c,h),p=v.removedTargetIds||[];e=new tn([],p,d.key,d)}else if(pn(t,n,"documentRemove")){ln(t.documentRemove,"documentRemove"),ln(t.documentRemove.document,"documentRemove");var m=t.documentRemove;c=this.fromName(m.document),p=m.removedTargetIds||[];e=new tn([],p,c,null)}else{if(!pn(t,n,"filter"))return y("Unknown change type "+JSON.stringify(t));ln(t.filter,"filter"),ln(t.filter.targetId,"filter.targetId");var g=t.filter,b=g.count||0,_=new De(b),w=g.targetId;e=new en(w,_)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Ge.NoChange:"ADD"===t?Ge.Added:"REMOVE"===t?Ge.Removed:"CURRENT"===t?Ge.Current:"RESET"===t?Ge.Reset:y("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){var e=t["response_type"];if(!pn(t,e,"targetChange"))return ce.MIN;var n=t.targetChange;return n.targetIds&&n.targetIds.length?ce.MIN:n.readTime?this.fromVersion(n.readTime):ce.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof be)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Ee)e={delete:this.toName(t.key)};else if(t instanceof _e)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof we))return y("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ye.NONE;if(t.update){ln(t.update.name,"name");var i=this.fromName(t.update.name),r=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new _e(i,r,o,n)}return new be(i,r,n)}if(t.delete){i=this.fromName(t.delete);return new Ee(i,n)}if(t.transform){i=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return g(!0===n.exists,'Transforms only support precondition "exists == true"'),new we(i,s)}return y("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return g(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ye.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ye.exists(t.exists):ye.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,i=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map(function(t){return n.fromValue(t)})),new me(i,r)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(g(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Ce)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Te)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof Se)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw y("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t["transform_type"],i=null;if(pn(t,n,"setToServerValue"))g("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),i=Ce.instance;else if(pn(t,n,"appendMissingElements")){var r=t.appendMissingElements.values||[];i=new Te(r.map(function(t){return e.fromValue(t)}))}else if(pn(t,n,"removeAllFromArray")){r=t.removeAllFromArray.values||[];i=new Se(r.map(function(t){return e.fromValue(t)}))}else y("Unknown transform proto: "+JSON.stringify(t));var o=gt.fromServerFormat(t.fieldPath);return new ve(o,i)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;g(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Jt.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(mt.EMPTY_PATH);else{var n=t.path;g(n.length%2!==0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var i=this.toFilter(t.filters);i&&(e.structuredQuery.where=i);var r=this.toOrder(t.orderBy);r&&(e.structuredQuery.orderBy=r);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0;if(i>0){g(1===i,"StructuredQuery.from with more than one collection is not supported.");var r=n.from[0];e=e.child(r.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Jt(e,s,o,a,u,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Yt.Listen:return null;case Yt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Yt.LimboResolution:return"limbo-document";default:return y("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},e.targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof ee?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):y("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,i=t.values.map(function(t){return e.fromValue(t)});return new oe(i,n)},t.prototype.toDirection=function(t){return un[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return re.ASCENDING;case"DESCENDING":return re.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return cn[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return te.EQUAL;case"GREATER_THAN":return te.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return te.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return te.LESS_THAN;case"LESS_THAN_OR_EQUAL":return te.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return te.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return y("Unspecified relation");default:return y("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return gt.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new se(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof ee?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:y("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new ee(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof ie?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof ne?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:y("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new ie(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new ne(n);case"OPERATOR_UNSPECIFIED":return y("Unspecified filter");default:return y("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=t.fieldPaths||[],n=e.map(function(t){return gt.fromServerFormat(t)});return pe.fromArray(n)},t}();function pn(t,e,n){return e===n||!e&&n in t}var vn=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){g(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){g(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){g(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){g(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){g(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){g(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),mn="Connection",yn="google.firestore.v1.Firestore",gn="v1",bn={BatchGetDocuments:"batchGet",Commit:"commit"},_n="gl-js/ fire/"+h,wn=15,En=function(){function t(t){this.databaseId=t.databaseId,this.pool=new u.XhrIoPool;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=_n},t.prototype.invokeRPC=function(t,e,n){var i=this,r=this.makeUrl(t);return new Promise(function(o,s){i.pool.getObject(function(a){a.listenOnce(u.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=a.getResponseJson();p(mn,"XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:p(mn,'RPC "'+t+'" timed out'),s(new E(w.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=a.getStatus();p(mn,'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0?s(new E(Ne(n),"Server responded with status "+a.getStatusText())):(p(mn,'RPC "'+t+'" failed'),s(new E(w.UNAVAILABLE,"Connection failed.")));break;default:y('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{p(mn,'RPC "'+t+'" completed.'),i.pool.releaseObject(a)}});var c=JSON.stringify(e);p(mn,"XHR sending: ",r+" "+c);var h={"Content-Type":"text/plain"};i.modifyHeadersForRequest(h,n),a.send(r,"POST",c,h,wn)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/",yn,"/",t,"/channel"],i=u.createWebChannelTransport(),r={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(r.initMessageHeaders,e),c.isReactNative()||(r["httpHeadersOverwriteParam"]="$httpHeaders");var o=n.join("");p(mn,"Creating WebChannel: "+o+" "+r);var s=i.createWebChannel(o,r),a=!1,h=!1,l=new vn({sendFn:function(t){h?p(mn,"Not sending because WebChannel is closed:",t):(a||(p(mn,"Opening WebChannel transport."),s.open(),a=!0),p(mn,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),d=function(t,e){s.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return d(u.WebChannel.EventType.OPEN,function(){h||p(mn,"WebChannel transport opened.")}),d(u.WebChannel.EventType.CLOSE,function(){h||(h=!0,p(mn,"WebChannel transport closed"),l.callOnClose())}),d(u.WebChannel.EventType.ERROR,function(t){h||(h=!0,p(mn,"WebChannel transport errored:",t),l.callOnClose(new E(w.UNAVAILABLE,"The operation could not be completed")))}),d(u.WebChannel.EventType.MESSAGE,function(t){if(!h){var e=t.data[0];g(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){p(mn,"WebChannel received error:",n);var i=n.status,r=Me(i),o=n.message;void 0===r&&(r=w.INTERNAL,o="Unknown error status: "+i+" with message "+n.message),h=!0,l.callOnClose(new E(r,o)),s.close()}else p(mn,"WebChannel received:",e),l.callOnMessage(e)}}),setTimeout(function(){l.callOnOpen()},0),l},t.prototype.makeUrl=function(t){var e=bn[t];g(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/",gn];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),Cn=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new En(t))},t.prototype.newSerializer=function(t){return new fn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();b.setPlatform(new Cn);var Tn,Sn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),kn=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}();(function(t){t["All"]="all",t["ListenStreamIdle"]="listen_stream_idle",t["ListenStreamConnectionBackoff"]="listen_stream_connection_backoff",t["WriteStreamIdle"]="write_stream_idle",t["WriteStreamConnectionBackoff"]="write_stream_connection_backoff",t["OnlineStateTimeout"]="online_state_timeout",t["ClientMetadataRefresh"]="client_metadata_refresh",t["LruGarbageCollection"]="lru_garbage_collection"})(Tn||(Tn={}));var In=function(){function t(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,i,r,o){var s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),Dn=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw v("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var i=this;this.verifyNotFailed(),g(e>=0,"Attempted to schedule an operation with a negative delay of "+e),g(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var r=In.createAndSchedule(this,t,e,n,function(t){return i.removeDelayedOperation(t)});return this.delayedOperations.push(r),r},t.prototype.verifyNotFailed=function(){this.failure&&y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){g(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){var i=n[e];if(i.timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){g(t===Tn.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,i=e.delayedOperations;n<i.length;n++){var r=i[n];if(r.skipDelay(),t!==Tn.All&&r.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);g(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),An="",On="",Mn="",xn="";function Ln(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Rn(e)),e=Nn(t.get(n),e);return Rn(e)}function Nn(t,e){for(var n=e,i=t.length,r=0;r<i;r++){var o=t.charAt(r);switch(o){case"\0":n+=An+Mn;break;case An:n+=An+xn;break;default:n+=o}}return n}function Rn(t){return t+An+On}function Pn(t){var e=t.length;if(g(e>=2,"Invalid path "+t),2===e)return g(t.charAt(0)===An&&t.charAt(1)===On,"Non-empty path "+t+" had length 2"),mt.EMPTY_PATH;for(var n=e-2,i=[],r="",o=0;o<e;){var s=t.indexOf(An,o);(s<0||s>n)&&y('Invalid encoded resource path: "'+t+'"');var a=t.charAt(s+1);switch(a){case On:var u=t.substring(o,s),c=void 0;0===r.length?c=u:(r+=u,c=r,r=""),i.push(c);break;case Mn:r+=t.substring(o,s),r+="\0";break;case xn:r+=t.substring(o,s+1);break;default:y('Invalid encoded resource path: "'+t+'"')}o=s+2}return new mt(i)}var Bn,Fn=-1,qn=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n,g(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&g(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var i=n.mutationResults;g(i.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+i.length+").");for(var r=0;r<this.mutations.length;r++){var o=this.mutations[r];if(o.key.isEqual(t)){var s=i[r];e=o.applyToRemoteDocument(e,s)}}return e},t.prototype.applyToLocalView=function(t,e){e&&g(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,i=0;i<this.mutations.length;i++){var r=this.mutations[i];r.key.isEqual(t)&&(e=r.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=$e(),e=0,n=this.mutations;e<n.length;e++){var i=n[e];t=t.add(i.key)}return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&et(this.mutations,t.mutations)},t}(),jn=function(){function t(t,e,n,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=i,this.docVersions=r}return t.from=function(e,n,i,r){g(e.mutations.length===i.length,"Mutations sent "+e.mutations.length+" must equal results received "+i.length);for(var o=Ve(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,i[a].version);return new t(e,n,i,r,o)},t}(),Vn=1;(function(t){t[t["QueryCache"]=0]="QueryCache",t[t["SyncEngine"]=1]="SyncEngine"})(Bn||(Bn={}));var Un=function(){function t(t,e){this.generatorId=t,g((t&Vn)===t,"Generator ID "+t+" contains more than "+Vn+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<Vn,t},t.prototype.after=function(t){return this.seek(t+(1<<Vn)),this.next()},t.prototype.seek=function(t){g((t&Vn)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){var e=new t(Bn.QueryCache,2);return e},t.forSyncEngine=function(){return new t(Bn.SyncEngine)},t}(),$n=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var i=this;return this.callbackAttached&&y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,r){i.nextCallback=function(n){i.wrapSuccess(e,n).next(t,r)},i.catchCallback=function(e){i.wrapFailure(n,e).next(t,r)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(i){return t.reject(i)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var i=0,r=0,o=!1;e.forEach(function(e){++i,e.next(function(){++r,o&&r===i&&t()},function(t){return n(t)})}),o=!0,r===i&&t()})},t.or=function(e){for(var n=t.resolve(!1),i=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},r=0,o=e;r<o.length;r++){var s=o[r];i(s)}return n},t.forEach=function(t,e){var n=this,i=[];return t.forEach(function(t,r){i.push(e.call(n,t,r))}),this.waitFor(i)},t}(),Wn="SimpleDb",Hn=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,i){return g(t.isAvailable(),"IndexedDB not supported in current environment."),p(Wn,"Opening database:",e),new $n(function(r,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;r(new t(n))},s.onblocked=function(){o(new E(w.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new E(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){p(Wn,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,r=new Kn(s.transaction);i.createOrUpgrade(n,r,t.oldVersion,fi).next(function(){p(Wn,"Database upgrade to version "+fi+" complete")})}}).toPromise()},t.delete=function(t){return p(Wn,"Removing database:",t),Gn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",BASE_URL:"/"}).USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var i=Kn.open(this.db,t,e),r=n(i).catch(function(t){return i.abort(t),$n.reject(t)}).toPromise();return i.completionPromise.then(function(){return r})},t.prototype.close=function(){this.db.close()},t}(),Qn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Gn(this.dbCursor.delete())},t}(),Kn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new kn,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,i){return new t(e.transaction(i,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(p(Wn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return g(!!e,"Object store not part of transaction: "+t),new zn(e)},t}(),zn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p(Wn,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(p(Wn,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Gn(n)},t.prototype.add=function(t){p(Wn,"ADD",this.store.name,t,t);var e=this.store.add(t);return Gn(e)},t.prototype.get=function(t){var e=this,n=this.store.get(t);return Gn(n).next(function(n){return void 0===n&&(n=null),p(Wn,"GET",e.store.name,t,n),n})},t.prototype.delete=function(t){p(Wn,"DELETE",this.store.name,t);var e=this.store.delete(t);return Gn(e)},t.prototype.count=function(){p(Wn,"COUNT",this.store.name);var t=this.store.count();return Gn(t)},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),i=[];return this.iterateCursor(n,function(t,e){i.push(e)}).next(function(){return i})},t.prototype.deleteAll=function(t,e){p(Wn,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var i=this.cursor(n);return this.iterateCursor(i,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var i=this.cursor(n);return this.iterateCursor(i,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new $n(function(n,i){e.onerror=function(t){i(t.target.error)},e.onsuccess=function(e){var i=e.target.result;i?t(i.primaryKey,i.value).next(function(t){t?i.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new $n(function(i,r){t.onerror=function(t){r(t.target.error)},t.onsuccess=function(t){var r=t.target.result;if(r){var o=new Qn(r),s=e(r.primaryKey,r.value,o);if(s instanceof $n){var a=s.catch(function(t){return o.done(),$n.reject(t)});n.push(a)}o.isDone?i():null===o.skipToKey?r.continue():r.continue(o.skipToKey)}else i()}}).next(function(){return $n.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"===typeof t?n=t:(g(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Gn(t){return new $n(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){n(t.target.error)}})}var Xn=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Un.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return ce.fromTimestamp(new ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return ti(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var i=this;return this.retrieveMetadata(t).next(function(r){return r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),i.saveMetadata(t,r)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(i){return i.targetCount+=1,n.updateMetadataFromQueryData(e,i),n.saveMetadata(t,i)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Yn(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return g(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var i=this,r=0,o=[];return Yn(t).iterate(function(s,a){var u=i.serializer.fromDbTarget(a);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(r++,o.push(i.removeQueryData(t,u)))}).next(function(){return $n.waitFor(o)}).next(function(){return r})},t.prototype.forEachTarget=function(t,e){var n=this;return Yn(t).iterate(function(t,i){var r=n.serializer.fromDbTarget(i);e(r)})},t.prototype.retrieveMetadata=function(t){return Zn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return Jn(t).put(xi.key,e)},t.prototype.saveQueryData=function(t,e){return Yn(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,i=e.canonicalId(),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return Yn(t).iterate({range:r,index:Oi.queryTargetsIndexName},function(t,i,r){var s=n.serializer.fromDbTarget(i);e.isEqual(s.query)&&(o=s,r.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var i=this,r=[],o=ei(t);return e.forEach(function(e){var s=Ln(e.path);r.push(o.put(new Mi(n,s))),r.push(i.referenceDelegate.addReference(t,e))}),$n.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){var i=this,r=ei(t);return $n.forEach(e,function(e){var o=Ln(e.path);return $n.waitFor([r.delete([n,o]),i.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ei(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),i=ei(t),r=$e();return i.iterate({range:n,keysOnly:!0},function(t,e,n){var i=Pn(t[1]),o=new bt(i);r=r.add(o)}).next(function(){return r})},t.prototype.containsKey=function(t,e){var n=Ln(e.path),i=IDBKeyRange.bound([n],[nt(n)],!1,!0),r=0;return ei(t).iterate({index:Mi.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){var i=t[0];t[1];0!==i&&(r++,n.done())}).next(function(){return r>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Yn(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function Yn(t){return br.getStore(t,Oi.store)}function Jn(t){return br.getStore(t,xi.store)}function Zn(t){var e=Hn.getStore(t,xi.store);return e.get(xi.key).next(function(t){return g(null!==t,"Missing metadata row."),t})}function ti(t){return Zn(t).next(function(t){return t.highestListenSequenceNumber})}function ei(t){return br.getStore(t,Mi.store)}var ni=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[0],a=o[1];if(s.isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(i[r][0].isEqual(t))return void(i[r]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1},t.prototype.forEach=function(t){D(this.inner,function(e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[0],a=o[1];t(s,a)}})},t.prototype.isEmpty=function(){return A(this.inner)},t}(),ii=function(){function t(){this.changes=Pe(),this.documentSizes=new ni(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,i=this.assertChanges(),r=i.get(e);return r?$n.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.getEntries=function(t,e){var n=this;return this.getAllFromCache(t,e).next(function(t){var e=t.maybeDocuments,i=t.sizeMap;return i.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return g(null!==this.changes,"Changes have already been applied."),this.changes},t}(),ri="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",oi=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Hn.getStore(t,Pi.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var i=[];if(e.length>0){for(var r=ci(t),o=$e(),s=0,a=e;s<a.length;s++){var u=a[s],c=u.key,h=u.doc;i.push(r.put(li(c),h)),o=o.add(c)}this.keepDocumentChangeLog&&i.push(hi(t).put({changes:this.serializer.toDbResourcePaths(o)})),i.push(this.updateSize(t,n))}return $n.waitFor(i)},t.prototype.removeEntry=function(t,e){var n=ci(t),i=li(e);return n.get(i).next(function(t){return t?n.delete(i).next(function(){return di(t)}):$n.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return ci(t).get(li(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return ci(t).get(li(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:di(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,i=Be();return this.forEachDbEntry(t,e,function(t,e){i=e?i.insert(t,n.serializer.fromDbRemoteDocument(e)):i.insert(t,null)}).next(function(){return i})},t.prototype.getSizedEntries=function(t,e){var n=this,i=Be(),r=new Tt(bt.comparator);return this.forEachDbEntry(t,e,function(t,e){e?(i=i.insert(t,n.serializer.fromDbRemoteDocument(e)),r=r.insert(t,di(e))):(i=i.insert(t,null),r=r.insert(t,0))}).next(function(){return{maybeDocuments:i,sizeMap:r}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return $n.resolve();var i=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),r=e.getIterator(),o=r.getNext();return ci(t).iterate({range:i},function(t,e,i){var s=bt.fromSegments(t);while(o&&bt.comparator(o,s)<0)n(o,null),o=r.getNext();o&&o.isEqual(s)&&(n(o,e),o=r.hasNext()?r.getNext():null),o?i.skip(o.path.toArray()):i.done()}).next(function(){while(o)n(o,null),o=r.hasNext()?r.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,i=qe(),r=e.path.toArray(),o=IDBKeyRange.lowerBound(r);return ci(t).iterate({range:o},function(t,r,o){var s=n.serializer.fromDbRemoteDocument(r);e.path.isPrefixOf(s.key.path)?s instanceof wt&&e.matches(s)&&(i=i.insert(s.key,s)):o.done()}).next(function(){return i})},t.prototype.getNewDocumentChanges=function(t){var e=this;g(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=$e(),i=Pe(),r=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=hi(t);return s.iterate({range:r},function(t,i){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==i.id))return e.synchronizeLastDocumentChangeId(s).next(function(){return $n.reject(new E(w.DATA_LOSS,ri))});n=n.unionWith(e.serializer.fromDbResourcePaths(i.changes)),e._lastProcessedDocumentChangeId=i.id}).next(function(){var r=[];return n.forEach(function(n){r.push(e.getEntry(t,n).next(function(t){var e=t||new Et(n,ce.forDeletedDoc());i=i.insert(n,e)}))}),$n.waitFor(r)}).next(function(){return i})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return hi(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,i){e._lastProcessedDocumentChangeId=t,i.done()})},t.prototype.newChangeBuffer=function(){return new ai(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return si(t).get(Di.key).next(function(t){return g(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return si(t).put(Di.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(i){return i.byteSize+=e,n.setMetadata(t,i)})},t}();function si(t){return br.getStore(t,Di.store)}var ai=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),i=0,r=[];return n.forEach(function(t,n){var o=e.documentCache.serializer.toDbRemoteDocument(n),s=e.documentSizes.get(t);g(void 0!==s,"Attempting to change document "+t.toString()+" without having read it first");var a=di(o);i+=a-s,r.push({key:t,doc:o})}),this.documentCache.addEntries(t,r,i)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(ii);function ui(t){return t.code===w.DATA_LOSS&&t.message===ri}function ci(t){return br.getStore(t,Ii.store)}function hi(t){return br.getStore(t,Pi.store)}function li(t){return t.path.toArray()}function di(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var fi=7,pi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,i){var r=this;g(n<i&&n>=0&&i<=fi,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&i>=1&&(gi(t),wi(t),Li(t),Ti(t));var o=$n.resolve();return n<3&&i>=3&&(0!==n&&(Ni(t),Li(t)),o=o.next(function(){return Ri(e)})),n<4&&i>=4&&(0!==n&&(o=o.next(function(){return Ei(t,e)})),o=o.next(function(){qi(t),Bi(t)})),n<5&&i>=5&&(o=o.next(function(){return r.removeAcknowledgedMutations(e)})),n<6&&i>=6&&(o=o.next(function(){return Ai(t),r.addDocumentGlobal(e)})),n<7&&i>=7&&(o=o.next(function(){return r.ensureSequenceNumbers(e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Ii.store).iterate(function(t,n){e+=di(n)}).next(function(){var n=new Di(e);return t.store(Di.store).put(Di.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(bi.store),i=t.store(_i.store);return n.loadAll().next(function(n){return $n.forEach(n,function(n){var r=IDBKeyRange.bound([n.userId,Fn],[n.userId,n.lastAcknowledgedBatchId]);return i.loadAll(_i.userMutationsIndex,r).next(function(i){return $n.forEach(i,function(i){g(i.userId===n.userId,"Cannot process batch "+i.batchId+" from unexpected user");var r=e.serializer.fromDbMutationBatch(i);return zi(t,n.userId,r).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Mi.store),n=t.store(Ii.store);return ti(t).next(function(t){var i=function(n){return e.put(new Mi(0,Ln(n),t))},r=[];return n.iterate(function(t,n){var o=new mt(t),s=vi(o);r.push(e.get(s).next(function(t){return t?$n.resolve():i(o)}))}).next(function(){return $n.waitFor(r)})})},t}();function vi(t){return[0,Ln(t)]}var mi=function(){function t(t,e){this.seconds=t,this.nanoseconds=e}return t}(),yi=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();function gi(t){t.createObjectStore(yi.store)}var bi=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),_i=function(){function t(t,e,n,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();function wi(t){t.createObjectStore(bi.store,{keyPath:bi.keyPath});var e=t.createObjectStore(_i.store,{keyPath:_i.keyPath,autoIncrement:!0});e.createIndex(_i.userMutationsIndex,_i.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ci.store)}function Ei(t,e){var n=e.store(_i.store);return n.loadAll().next(function(n){t.deleteObjectStore(_i.store);var i=t.createObjectStore(_i.store,{keyPath:_i.keyPath,autoIncrement:!0});i.createIndex(_i.userMutationsIndex,_i.userMutationsKeyPath,{unique:!0});var r=e.store(_i.store),o=n.map(function(t){return r.put(t)});return $n.waitFor(o)})}var Ci=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ln(e)]},t.key=function(t,e,n){return[t,Ln(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();function Ti(t){t.createObjectStore(Ii.store)}var Si=function(){function t(t,e){this.path=t,this.readTime=e}return t}(),ki=function(){function t(t,e){this.path=t,this.version=e}return t}(),Ii=function(){function t(t,e,n,i){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i}return t.store="remoteDocuments",t}(),Di=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();function Ai(t){t.createObjectStore(Di.store)}var Oi=function(){function t(t,e,n,i,r,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Mi=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,g(0===t===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),xi=function(){function t(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function Li(t){var e=t.createObjectStore(Mi.store,{keyPath:Mi.keyPath});e.createIndex(Mi.documentTargetsIndex,Mi.documentTargetsKeyPath,{unique:!0});var n=t.createObjectStore(Oi.store,{keyPath:Oi.keyPath});n.createIndex(Oi.queryTargetsIndexName,Oi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xi.store)}function Ni(t){t.deleteObjectStore(Mi.store),t.deleteObjectStore(Oi.store),t.deleteObjectStore(xi.store)}function Ri(t){var e=t.store(xi.store),n=new xi(0,0,ce.MIN.toTimestamp(),0);return e.put(xi.key,n)}var Pi=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}();function Bi(t){t.createObjectStore(Pi.store,{keyPath:"id",autoIncrement:!0})}var Fi=function(){function t(t,e,n,i,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i,this.lastProcessedDocumentChangeId=r}return t.store="clientMetadata",t.keyPath="clientId",t}();function qi(t){t.createObjectStore(Fi.store,{keyPath:Fi.keyPath})}var ji=[bi.store,_i.store,Ci.store,Ii.store,Oi.store,yi.store,xi.store,Mi.store],Vi=ji,Ui=Vi.concat([Fi.store,Pi.store]),$i=Ui.concat([Di.store]),Wi=$i,Hi=function(){function t(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return t.forUser=function(e,n,i){g(""!==e.uid,"UserID must not be an empty string.");var r=e.isAuthenticated()?e.uid:"";return new t(r,n,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xi(t).iterate({index:_i.userMutationsIndex,range:n},function(t,n,i){e=!1,i.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Gi(n),Ji(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=Gi(e),Ji(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n){var i=this,r=Yi(t),o=Xi(t);return o.add({}).next(function(t){g("number"===typeof t,"Auto-generated key is not a number");var s=new qn(t,e,n),a=i.serializer.toDbMutationBatch(i.userId,s);i.documentKeysByBatchId[t]=s.keys();for(var u=[],c=0,h=n;c<h.length;c++){var l=h[c],d=Ci.key(i.userId,l.key.path,t);u.push(o.put(a)),u.push(r.put(d,Ci.PLACEHOLDER))}return $n.waitFor(u).next(function(){return s})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Xi(t).get(e).next(function(t){return t?(g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?$n.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var i=t.keys();return n.documentKeysByBatchId[e]=i,i}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(i){var r=e+1,o=IDBKeyRange.lowerBound([n.userId,r]),s=null;return Xi(t).iterate({index:_i.userMutationsIndex,range:o},function(t,e,i){e.userId===n.userId&&(g(e.batchId>=r,"Should have found mutation after "+r),s=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return s})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,Fn],[this.userId,Number.POSITIVE_INFINITY]);return Xi(t).loadAll(_i.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,i=Ci.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return Yi(t).iterate({range:r},function(i,r,s){var a=i[0],u=i[1],c=i[2],h=Pn(u);if(a===n.userId&&e.path.isEqual(h))return Xi(t).get(c).next(function(t){if(!t)throw y("Dangling document-mutation reference found: "+i+" which points to "+c);g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,i=new de(Z),r=[];return e.forEach(function(e){var o=Ci.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Yi(t).iterate({range:s},function(t,r,o){var s=t[0],a=t[1],u=t[2],c=Pn(a);s===n.userId&&e.path.isEqual(c)?i=i.add(u):o.done()});r.push(a)}),$n.waitFor(r).next(function(){return n.lookupMutationBatches(t,i)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;g(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var i=e.path,r=i.length+1,o=Ci.prefixForPath(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new de(Z);return Yi(t).iterate({range:s},function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Pn(u);s===n.userId&&i.isPrefixOf(h)?h.length===r&&(a=a.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(t,a)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,i=[],r=[];return e.forEach(function(e){r.push(Xi(t).get(e).next(function(t){if(null===t)throw y("Dangling document-mutation reference found, which points to "+e);g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),i.push(n.serializer.fromDbMutationBatch(t))}))}),$n.waitFor(r).next(function(){return i})},t.prototype.removeMutationBatch=function(t,e){var n=this;return zi(t.simpleDbTransaction,this.userId,e).next(function(i){return n.removeCachedMutationKeys(e.batchId),$n.forEach(i,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return $n.resolve();var i=IDBKeyRange.lowerBound(Ci.prefixForUser(e.userId)),r=[];return Yi(t).iterate({range:i},function(t,n,i){var o=t[0];if(o===e.userId){var s=Pn(t[1]);r.push(s)}else i.done()}).next(function(){g(0===r.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+r.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return Qi(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return Ji(t).get(this.userId).next(function(t){return t||new bi(e.userId,Fn,"")})},t}();function Qi(t,e,n){var i=Ci.prefixForPath(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return Yi(t).iterate({range:o,keysOnly:!0},function(t,n,i){var o=t[0],a=t[1];t[2];o===e&&a===r&&(s=!0),i.done()}).next(function(){return s})}function Ki(t,e){var n=!1;return Ji(t).iterateSerial(function(i){return Qi(t,i,e).next(function(t){return t&&(n=!0),$n.resolve(!t)})}).next(function(){return n})}function zi(t,e,n){var i=t.store(_i.store),r=t.store(Ci.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=i.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){g(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var d=l[h],f=Ci.key(e,d.key.path,n.batchId);o.push(r.delete(f)),c.push(d.key)}return $n.waitFor(o).next(function(){return c})}function Gi(t){return t instanceof Uint8Array?(g("YES"===Object({NODE_ENV:"production",BASE_URL:"/"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Xi(t){return br.getStore(t,_i.store)}function Yi(t){return br.getStore(t,Ci.store)}function Ji(t){return br.getStore(t,bi.store)}var Zi=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=bt.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new Et(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=bt.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new Ct(e,n)}return y("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof wt){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new Ii(null,null,e,n)}if(t instanceof Et){var i=t.key.path.toArray(),r=this.toDbTimestamp(t.version);n=t.hasCommittedMutations;return new Ii(null,new Si(i,r),null,n)}if(t instanceof Ct){i=t.key.path.toArray(),r=this.toDbTimestamp(t.version);return new Ii(new ki(i,r),null,null,!0)}return y("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new mi(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new ht(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new _i(t,e.batchId,e.localWriteTime.toMillis(),i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=ht.fromMillis(t.localWriteTimeMs);return new qn(t.batchId,i,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(Ln(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=$e(),n=0,i=t;n<i.length;n++){var r=i[n];e=e.add(new bt(Pn(r)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=tr(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new le(e,t.targetId,Yt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){g(Yt.Listen===t.purpose,"Only queries with purpose "+Yt.Listen+" may be stored, got "+t.purpose);var e,n,i=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(g("YES"===Object({NODE_ENV:"production",BASE_URL:"/"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new Oi(t.targetId,t.query.canonicalId(),i,n,t.sequenceNumber,e)},t}();function tr(t){return void 0!==t.documents}function er(t,e){var n=t[0],i=t[1],r=e[0],o=e[1],s=Z(n,r);return 0===s?Z(i,o):s}var nr=function(){function t(t){this.maxElements=t,this.buffer=new de(er),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();er(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),ir={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),or=6e4,sr=3e5,ar=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){g(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==rr.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;g(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?sr:or;p("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Tn.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(wr)})},t}(),ur=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return $n.resolve(Sn.INVALID);var i=new nr(e);return this.delegate.forEachTarget(t,function(t){return i.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return i.addElement(t)})}).next(function(){return i.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===rr.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),$n.resolve(ir)):this.getCacheSize(t).next(function(i){return i<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ir):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,i,o,s,a,u,c,h,l=this;return s=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>l.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),i=l.params.maximumSequenceNumbersToCollect):i=e,a=Date.now(),l.nthSequenceNumber(t,i)}).next(function(i){return n=i,u=Date.now(),l.removeTargets(t,n,e)}).next(function(e){return o=e,c=Date.now(),l.removeOrphanedDocuments(t,n)}).next(function(t){if(h=Date.now(),d()<=r.DEBUG){var e="LRU Garbage Collection\n\tCounted targets in "+(a-s)+"ms\n\tDetermined least recently used "+i+" in "+(u-a)+"ms\n\tRemoved "+o+" targets in "+(c-u)+"ms\n\tRemoved "+t+" documents in "+(h-c)+"ms\nTotal Duration: "+(h-s)+"ms";p("LruGarbageCollector",e)}return $n.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},t}(),cr=function(){function t(){}return t}(),hr="IndexedDbPersistence",lr=18e5,dr=5e3,fr=4e3,pr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",mr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",yr="firestore_zombie",gr=function(t){function e(e,n){var i=t.call(this)||this;return i.simpleDbTransaction=e,i.currentSequenceNumber=n,i}return a.__extends(e,t),e}(cr),br=function(){function t(e,n,i,r,o,s,a){if(this.persistenceKey=e,this.clientId=n,this.queue=r,this.multiClientParams=a,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new E(w.UNIMPLEMENTED,mr);if(this.referenceDelegate=new Tr(this,s),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Zi(o),this.document=i.document,this.allowTabSynchronization=void 0!==a,this.queryCache=new Xn(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new oi(this.serializer,this.allowTabSynchronization),!i.window||!i.window.localStorage)throw new E(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof gr)return Hn.getStore(t.simpleDbTransaction,e);throw y("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,i,r,o,s){return a.__awaiter(this,void 0,void 0,function(){var u;return a.__generator(this,function(a){switch(a.label){case 0:return u=new t(e,n,i,r,o,s),[4,u.start()];case 1:return a.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,i,r,o,s,u){return a.__awaiter(this,void 0,void 0,function(){var c;return a.__generator(this,function(a){switch(a.label){case 0:return c=new t(e,n,i,r,o,s,u),[4,c.start()];case 1:return a.sent(),[2,c]}})})},t.prototype.start=function(){var t=this;return g(!this.started,"IndexedDbPersistence double-started!"),g(null!==this.window,"Expected 'window' to be defined"),Hn.openOrCreate(this.dbName,fi,new pi(this.serializer)).then(function(e){t.simpleDb=e}).then(function(){return t.startRemoteDocumentCache()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return t.simpleDb.runTransaction("readonly",[xi.store],function(e){return ti(e).next(function(e){var n=t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0;t.listenSequence=new Sn(e,n)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Wi,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",Wi,function(e){var n=Cr(e);return n.put(new Fi(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var i=t.isPrimary;return t.isPrimary=n,i!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),i&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this,n=Er(t);return n.get(yi.key).next(function(t){return $n.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){var e=Cr(t);return e.delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,i=this;return a.__generator(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,lr)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var o=t.getStore(r,Fi.store);return o.loadAll().next(function(t){e=i.filterActiveClients(t,lr),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return $n.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if(e=e.filter(function(t){return t.clientId!==i.clientId}),e.length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return i.remoteDocumentCache.removeDocumentChangesThroughChangeId(r,n)}})})]);case 1:r.sent(),n.forEach(function(t){i.window.localStorage.removeItem(i.zombiedClientLocalStorageKey(t.clientId))}),r.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Tn.ClientMetadataRefresh,fr,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this,n=Er(t);return n.get(yi.key).next(function(n){var i=null!==n&&e.isWithinAge(n.leaseTimestampMs,dr)&&!e.isClientZombied(n.ownerId);if(i){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,vr);return!1}}return!(!e.networkEnabled||!e.inForeground)||Cr(t).loadAll().next(function(t){var n=e.filterActiveClients(t,dr).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,i=!e.inForeground&&t.inForeground,r=e.networkEnabled===t.networkEnabled;if(n||i&&r)return!0}return!1});return void 0===n})}).next(function(t){return e.isPrimary!==t&&p(hr,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[yi.store,Fi.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,Hn.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Fi.store],function(e){return Cr(e).loadAll().next(function(e){return t.filterActiveClients(e,lr).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return g(this.started,"Cannot initialize MutationQueue before persistence is started."),Hi.forUser(t,this.serializer,this.referenceDelegate)},t.prototype.getQueryCache=function(){return g(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return g(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var i=this;return p(hr,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Wi,function(r){return"readwrite-primary"===e?i.verifyPrimaryLease(r).next(function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new E(w.FAILED_PRECONDITION,pr);return n(new gr(r,i.listenSequence.next()))}).next(function(t){return i.acquireOrExtendPrimaryLease(r).next(function(){return t})}):i.verifyAllowTabSynchronization(r).next(function(){return n(new gr(r,i.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this,n=Er(t);return n.get(yi.key).next(function(t){var n=null!==t&&e.isWithinAge(t.leaseTimestampMs,dr)&&!e.isClientZombied(t.ownerId);if(n&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new E(w.FAILED_PRECONDITION,vr)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new yi(this.clientId,this.allowTabSynchronization,Date.now());return Er(t).put(yi.key,e)},t.isAvailable=function(){return Hn.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Er(t);return n.get(yi.key).next(function(t){return e.isLocalClient(t)?(p(hr,"Releasing primary lease."),n.delete(yi.key)):$n.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now(),i=n-e,r=n;return!(t<i)&&(!(t>r)||(v("Detected an update time that is in the future: "+t+" > "+r),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(g(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(g("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return p(hr,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return v(hr,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){v("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return yr+"_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function _r(t){return t.code===w.FAILED_PRECONDITION&&t.message===pr}function wr(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){if(!_r(t))throw t;return p(hr,"Unexpectedly lost primary lease"),[2]})})}function Er(t){return t.store(yi.store)}function Cr(t){return t.store(Fi.store)}var Tr=function(){function t(t,e){this.db=t,this.garbageCollector=new ur(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t),n=this.db.getQueryCache().getQueryCount(t);return n.next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Ir(t,e)},t.prototype.removeReference=function(t,e){return Ir(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Ir(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?$n.resolve(!0):Ki(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,i=0,r=0,o=[],s=this.forEachOrphanedDocument(t,function(s,a){if(a<=e){var u=n.isPinned(t,s).next(function(e){if(!e)return i++,n.removeOrphanedDocument(t,s).next(function(t){r+=t})});o.push(u)}});return s.next(function(){return $n.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-r)}).next(function(){return i})},t.prototype.removeOrphanedDocument=function(t,e){var n=0,i=this.db.getRemoteDocumentCache();return $n.waitFor([ei(t).delete(Sr(e)),i.removeEntry(t,e).next(function(t){n+=t})]).next(function(){return n})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ir(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,i=ei(t),r=Sn.INVALID;return i.iterate({index:Mi.documentTargetsIndex},function(t,i){var o=t[0],s=(t[1],i.path),a=i.sequenceNumber;0===o?(r!==Sn.INVALID&&e(new bt(Pn(n)),r),r=a,n=s):r=Sn.INVALID}).next(function(){r!==Sn.INVALID&&e(new bt(Pn(n)),r)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Sr(t){return[0,Ln(t.path)]}function kr(t,e){return new Mi(0,Ln(t.path),e)}function Ir(t,e){return ei(t).put(kr(e,t.currentSequenceNumber))}var Dr=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(i){return n.getDocumentInternal(t,e,i)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var i=0,r=n;i<r.length;i++){var o=r[i];t=o.applyToLocalView(e,t)}return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var i=Be();return e.forEach(function(t,e){for(var r=0,o=n;r<o.length;r++){var s=o[r];e=s.applyToLocalView(t,e)}i=i.insert(t,e)}),i},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(i){var r=n.applyLocalMutationsToDocuments(t,e,i),o=Pe();return r.forEach(function(t,e){e||(e=new Et(t,ce.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e){return bt.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new bt(e)).next(function(t){var e=qe();return t instanceof wt&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var i=0,r=t;i<r.length;i++)for(var o=r[i],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key;if(e.path.isImmediateParentOf(c.path)){var h=n.get(c),l=u.applyToLocalView(h,h,o.localWriteTime);n=l instanceof wt?n.insert(c,l):n.remove(c)}}}).next(function(){return n.forEach(function(t,i){e.matches(i)||(n=n.remove(t))}),n})},t}(),Ar=function(){function t(){this.refsByKey=new de(Or.compareByKey),this.refsByTarget=new de(Or.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Or(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Or(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=bt.EMPTY,i=new Or(n,t),r=new Or(n,t+1),o=[];return this.refsByTarget.forEachInRange([i,r],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=bt.EMPTY,n=new Or(e,t),i=new Or(e,t+1),r=$e();return this.refsByTarget.forEachInRange([n,i],function(t){r=r.add(t.key)}),r},t.prototype.containsKey=function(t){var e=new Or(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Or=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return bt.comparator(t.key,e.key)||Z(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Z(t.targetOrBatchId,e.targetOrBatchId)||bt.comparator(t.key,e.key)},t}(),Mr="LocalStore",xr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Ar,this.queryDataByTarget={},g(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Dr(this.remoteDocuments,this.mutationQueue)}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var i;return e.mutationQueue.getAllMutationBatches(n).next(function(r){return i=r,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Dr(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var r=[],o=[],s=$e(),a=0,u=i;a<u.length;a++){var c=u[a];r.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var d=l[h];s=s.add(d.key)}}for(var f=0,p=t;f<p.length;f++){c=p[f];o.push(c.batchId);for(var v=0,m=c.mutations;v<m.length;v++){d=m[v];s=s.add(d.key)}}return e.localDocuments.getDocuments(n,s).next(function(t){return{affectedDocuments:t,removedBatchIds:r,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var i,r=ht.now();return e.mutationQueue.addMutationBatch(n,r,t).next(function(t){i=t;var r=i.keys();return e.localDocuments.getDocuments(n,r)}).next(function(t){return{batchId:i.batchId,changes:t}})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):$n.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var i=t.batch.keys(),r=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,r)}).next(function(){return r.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,i)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var i;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return g(null!==t,"Attempt to reject nonexistent batch!"),i=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,i)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,i=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(r){var o=[],s=$e();k(e.targetChanges,function(i,a){var u=n.queryDataByTarget[i];if(u){a.addedDocuments.forEach(function(t){s=s.add(t)}),a.modifiedDocuments.forEach(function(t){s=s.add(t)}),o.push(n.queryCache.removeMatchingKeys(r,a.removedDocuments,i).next(function(){return n.queryCache.addMatchingKeys(r,a.addedDocuments,i)}));var c=a.resumeToken;if(c.length>0){var h=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[i]=u,t.shouldPersistQueryData(h,u,a)&&o.push(n.queryCache.updateQueryData(r,u))}}});var a=Pe(),u=$e();e.documentUpdates.forEach(function(t,e){u=u.add(t)}),o.push(i.getEntries(r,u).next(function(t){e.documentUpdates.forEach(function(u,c){var h=t.get(u);null==h||c.version.isEqual(ce.MIN)||s.has(c.key)&&!h.hasPendingWrites||c.version.compareTo(h.version)>=0?(i.addEntry(c),a=a.insert(u,c)):p(Mr,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))})}));var c=e.snapshotVersion;if(!c.isEqual(ce.MIN)){var h=n.queryCache.getLastRemoteSnapshotVersion(r).next(function(t){return g(c.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+c+" < "+t),n.queryCache.setTargetsMetadata(r,r.currentSequenceNumber,c)});o.push(h)}return $n.waitFor(o).next(function(){return i.apply(r)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(r,a)})})},t.shouldPersistQueryData=function(t,e,n){if(0===e.resumeToken.length)return!1;if(0===t.resumeToken.length)return!0;var i=e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds();if(i>=this.RESUME_TOKEN_MAX_AGE_MICROS)return!0;var r=n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size;return r>0},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return $n.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),$n.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=Fn),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var i;return e.queryCache.getQueryData(n,t).next(function(r){return r?(i=r,$n.resolve()):e.queryCache.allocateTargetId(n).next(function(r){return i=new le(t,r,Yt.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,i)})}).next(function(){return g(!e.queryDataByTarget[i.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[i.targetId]=i,i})})},t.prototype.releaseQuery=function(t,e){var n=this,i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",i,function(i){return n.queryCache.getQueryData(i,t).next(function(r){g(null!=r,"Tried to release nonexistent query: "+t);var o=r.targetId,s=n.queryDataByTarget[o],a=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?$n.resolve():$n.forEach(a,function(t){return n.persistence.referenceDelegate.removeReference(i,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(i,s)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var i=this,r=e.batch,o=r.keys(),s=$n.resolve();return o.forEach(function(i){s=s.next(function(){return n.getEntry(t,i)}).next(function(t){var o=t,s=e.docVersions.get(i);g(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&(o=r.applyToRemoteDocument(i,o,e),o?n.addEntry(o):g(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))})}),s.next(function(){return i.mutationQueue.removeMutationBatch(t,r)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Lr=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new de(Or.compareByKey)}return t.prototype.checkEmpty=function(t){return $n.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var i=e.batchId,r=this.indexOfExistingBatchId(i,"acknowledged");g(0===r,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[r];return g(i===o.batchId,"Queue ordering failure: expected batch "+i+", got batch "+o.batchId),this.lastStreamToken=n,$n.resolve()},t.prototype.getLastStreamToken=function(t){return $n.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,$n.resolve()},t.prototype.addMutationBatch=function(t,e,n){g(0!==n.length,"Mutation batches should not be empty");var i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){var r=this.mutationQueue[this.mutationQueue.length-1];g(r.batchId<i,"Mutation batchIDs must be monotonically increasing order")}var o=new qn(i,e,n);this.mutationQueue.push(o);for(var s=0,a=n;s<a.length;s++){var u=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Or(u.key,i))}return $n.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return $n.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return g(null!=n,"Failed to find local mutation batch."),$n.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,i=this.indexOfBatchId(n),r=i<0?0:i;return $n.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getAllMutationBatches=function(t){return $n.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,i=new Or(e,0),r=new Or(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([i,r],function(t){g(e.isEqual(t.key),"Should only iterate over a single key's batches");var i=n.findMutationBatch(t.targetOrBatchId);g(null!==i,"Batches in the index must exist in the main table"),o.push(i)}),$n.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,i=new de(Z);return e.forEach(function(t){var e=new Or(t,0),r=new Or(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,r],function(e){g(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),i=i.add(e.targetOrBatchId)})}),$n.resolve(this.findMutationBatches(i))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,i=n.length+1,r=n;bt.isDocumentKey(r)||(r=r.child(""));var o=new Or(new bt(r),0),s=new de(Z);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(s=s.add(t.targetOrBatchId)),!0)},o),$n.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var i=e.findMutationBatch(t);null!==i&&n.push(i)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this,i=this.indexOfExistingBatchId(e.batchId,"removed");g(0===i,"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return $n.forEach(e.mutations,function(i){var o=new Or(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Or(e,0),i=this.batchesByDocumentKey.firstAfterOrEqual(n);return $n.resolve(e.isEqual(i&&i.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&g(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),$n.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return g(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){if(0===this.mutationQueue.length)return 0;var e=this.mutationQueue[0].batchId;return t-e},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return g(n.batchId===t,"If found batch must match"),n},t}(),Nr=function(){function t(t){this.persistence=t,this.queries=new ni(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=ce.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Ar,this.targetCount=0,this.targetIdGenerator=Un.forQueryCache()}return t.prototype.getTargetCount=function(t){return $n.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),$n.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return $n.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return $n.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,$n.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),$n.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return g(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,$n.resolve()},t.prototype.updateQueryData=function(t,e){return g(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),$n.resolve()},t.prototype.removeQueryData=function(t,e){return g(this.targetCount>0,"Removing a target from an empty cache"),g(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,$n.resolve()},t.prototype.removeTargets=function(t,e,n){var i=this,r=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=e&&!n[a.targetId]&&(i.queries.delete(s),o.push(i.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),$n.waitFor(o).next(function(){return r})},t.prototype.getQueryCount=function(t){return $n.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return $n.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return y("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(function(e){r.push(i.addReference(t,e))}),$n.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(function(e){r.push(i.removeReference(t,e))}),$n.waitFor(r)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),$n.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return $n.resolve(n)},t.prototype.containsKey=function(t,e){return $n.resolve(this.references.containsKey(e))},t}();function Rr(){return new Tt(bt.comparator)}var Pr,Br=function(){function t(t){this.sizer=t,this.docs=Rr(),this.newDocumentChanges=$e(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var i=0,r=e;i<r.length;i++){var o=r[i],s=o.maybeDocument.key;this.docs=this.docs.insert(s,o),this.newDocumentChanges=this.newDocumentChanges.add(s)}return this.size+=n,$n.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,$n.resolve(n.size)):$n.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return $n.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return $n.resolve(this.docs.get(e))},t.prototype.getEntries=function(t,e){var n=this,i=Be();return e.forEach(function(t){var e=n.docs.get(t);i=i.insert(t,e?e.maybeDocument:null)}),$n.resolve(i)},t.prototype.getSizedEntries=function(t,e){var n=this,i=Be(),r=new Tt(bt.comparator);return e.forEach(function(t){var e=n.docs.get(t);i=i.insert(t,e?e.maybeDocument:null),r=r.insert(t,e?e.size:0)}),$n.resolve({maybeDocuments:i,sizeMap:r})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=qe(),i=new bt(e.path.child("")),r=this.docs.getIteratorFrom(i);while(r.hasNext()){var o=r.getNext(),s=o.key,a=o.value.maybeDocument;if(!e.path.isPrefixOf(s.path))break;a instanceof wt&&e.matches(a)&&(n=n.insert(a.key,a))}return $n.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return $n.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=Pe();return this.newDocumentChanges.forEach(function(t){var i=e.docs.get(t),r=i?i.maybeDocument:new Et(t,ce.forDeletedDoc());n=n.insert(t,r)}),this.newDocumentChanges=$e(),$n.resolve(n)},t.prototype.newChangeBuffer=function(){return new Fr(this.sizer,this)},t.prototype.getSize=function(t){return $n.resolve(this.size)},t}(),Fr=function(t){function e(e,n){var i=t.call(this)||this;return i.sizer=e,i.documentCache=n,i}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=this.assertChanges(),i=0,r=[];return n.forEach(function(t,n){var o=e.documentSizes.get(t);g(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var s=e.sizer(n);i+=s-o,r.push({maybeDocument:n,size:s})}),this.documentCache.addEntries(t,r,i)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getSizedEntries(t,e)},e}(ii),qr="MemoryPersistence",jr=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new Sn(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Nr(this);var i=function(t){return n.referenceDelegate.documentSize(t)};this.remoteDocumentCache=new Br(i)}return t.createLruPersistence=function(e,n,i){var r=function(t){return new $r(t,new Zi(n),i)};return new t(e,r)},t.createEagerPersistence=function(e){var n=function(t){return new Ur(t)};return new t(e,n)},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Lr(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var i=this;p(qr,"Starting transaction:",t);var r=new Vr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(r).next(function(t){return i.referenceDelegate.onTransactionCommitted(r).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return $n.or(I(this.mutationQueues).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Vr=function(){function t(t){this.currentSequenceNumber=t}return t}(),Ur=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),$n.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),$n.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),$n.resolve()},t.prototype.removeTarget=function(t,e){var n=this,i=this.persistence.getQueryCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return i.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return $n.forEach(this.orphanedDocuments,function(i){return e.isReferenced(t,i).next(function(e){return e?$n.resolve():n.removeEntry(t,i).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return $n.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return $n.resolve(n.inMemoryPins.containsKey(e))}])},t}(),$r=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new ni(function(t){return Ln(t.path)}),this.garbageCollector=new ur(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return $n.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t),n=this.persistence.getQueryCache().getTargetCount(t);return n.next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return $n.forEach(this.orphanedSequenceNumbers,function(i,r){return n.isPinned(t,i,r).next(function(t){return t?$n.resolve():e(r)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,i=0,r=this.persistence.getRemoteDocumentCache(),o=r.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?$n.resolve():(i++,r.removeEntry(t,o).next())})});return o.next(function(){return i})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),$n.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),$n.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),$n.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),$n.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw y("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var i=this;return $n.or([function(){return i.persistence.mutationQueuesContainKey(t,e)},function(){return $n.resolve(i.inMemoryPins.containsKey(e))},function(){return i.persistence.getQueryCache().containsKey(t,e)},function(){var t=i.orphanedSequenceNumbers.get(e);return $n.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),Wr="ExponentialBackoff",Hr=function(){function t(t,e,n,i,r){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=i,this.maxDelayMs=r,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),i=Math.max(0,Date.now()-this.lastAttemptTime),r=Math.max(0,n-i);this.currentBaseMs>0&&p(Wr,"Backing off for "+r+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,r,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),Qr="PersistentStream";(function(t){t[t["Initial"]=0]="Initial",t[t["Starting"]=1]="Starting",t[t["Open"]=2]="Open",t[t["Error"]=3]="Error",t[t["Backoff"]=4]="Backoff"})(Pr||(Pr={}));var Kr,zr,Gr=1e3,Xr=6e4,Yr=1.5,Jr=6e4,Zr=function(){function t(t,e,n,i,r,o){this.queue=t,this.idleTimerId=n,this.connection=i,this.credentialsProvider=r,this.listener=o,this.state=Pr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Hr(t,e,Gr,Yr,Xr)}return t.prototype.isStarted=function(){return this.state===Pr.Starting||this.state===Pr.Open||this.state===Pr.Backoff},t.prototype.isOpen=function(){return this.state===Pr.Open},t.prototype.start=function(){this.state!==Pr.Error?(g(this.state===Pr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Pr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){g(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Pr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,Jr,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.isOpen()?[2,this.close(Pr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return g(this.isStarted(),"Only started streams should be closed."),g(t===Pr.Error||Gt(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==Pr.Error?this.backoff.reset():e&&e.code===w.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===w.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;g(this.state===Pr.Initial,"Must be in initial state to auth"),this.state=Pr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new E(w.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;g(this.state===Pr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return g(e.state===Pr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Pr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;g(this.state===Pr.Error,"Should only perform backoff when in Error state"),this.state=Pr.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return g(this.state===Pr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Pr.Initial,this.start(),g(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return g(this.isStarted(),"Can't handle server close on non-started stream"),p(Qr,"close with error: "+t),this.stream=null,this.close(Pr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(p(Qr,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),to=function(t){function e(e,n,i,r,o){var s=t.call(this,e,Tn.ListenStreamConnectionBackoff,Tn.ListenStreamIdle,n,i,o)||this;return s.serializer=r,s}return a.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Zr),eo=function(t){function e(e,n,i,r,o){var s=t.call(this,e,Tn.WriteStreamConnectionBackoff,Tn.WriteStreamIdle,n,i,o)||this;return s.serializer=r,s.handshakeComplete_=!1,s}return a.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return g(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){g(this.isOpen(),"Writing handshake requires an opened stream"),g(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;g(this.isOpen(),"Writing mutations requires an opened stream"),g(this.handshakeComplete_,"Handshake must be complete before writing mutations"),g(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Zr),no=function(){function t(t,e,n,i){this.queue=t,this.connection=e,this.credentials=n,this.serializer=i}return t.prototype.newPersistentWriteStream=function(t){return new eo(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new to(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var i=Pe();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);i=i.insert(n.key,n)});var r=[];return t.forEach(function(t){var e=i.get(t);g(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(i){return n.connection.invokeRPC(t,e,i)}).catch(function(t){throw t.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(i){return n.connection.invokeStreamingRPC(t,e,i)}).catch(function(t){throw t.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),io=function(){function t(t){this.datastore=t,this.readVersions=Ve(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof wt)e=t.version;else{if(!(t instanceof Et))throw y("Document in a transaction was a "+t.constructor.name);e=ce.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new E(w.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof Et||t instanceof wt?e.recordVersion(t):y("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new E(w.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ye.updateTime(e):ye.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(ce.forDeletedDoc()))throw new E(w.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ye.updateTime(e):ye.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new Ee(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,ce.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();(function(t){t[t["Unknown"]=0]="Unknown",t[t["Online"]=1]="Online",t[t["Offline"]=2]="Offline"})(Kr||(Kr={})),function(t){t[t["RemoteStore"]=0]="RemoteStore",t[t["SharedClientState"]=1]="SharedClientState"}(zr||(zr={}));var ro="OnlineStateTracker",oo=1,so=1e4,ao=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=Kr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Kr.Unknown),g(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Tn.OnlineStateTimeout,so,function(){return t.onlineStateTimer=null,g(t.state===Kr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within "+so/1e3+" seconds."),t.setAndBroadcast(Kr.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===Kr.Online?(this.setAndBroadcast(Kr.Unknown),g(0===this.watchStreamFailures,"watchStreamFailures must be 0"),g(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=oo&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed "+oo+" times. Most recent error: "+t.toString()),this.setAndBroadcast(Kr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===Kr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(v(e),this.shouldWarnClientIsOffline=!1):p(ro,e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),uo="RemoteStore",co=10,ho=function(){function t(t,e,n,i){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new ao(n,i),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Kr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Kr.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(p(uo,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return p(uo,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Kr.Unknown),[2]}})})},t.prototype.listen=function(t){g(!T(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){g(T(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),A(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Kr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){g(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new on(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!A(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){return k(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return void 0===t&&g(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Kr.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(i){switch(i.label){case 0:return this.onlineStateTracker.set(Kr.Online),t instanceof nn&&t.state===Ge.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof tn?this.watchChangeAggregator.handleDocumentChange(t):t instanceof en?this.watchChangeAggregator.handleExistenceFilter(t):(g(t instanceof nn,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(ce.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=i.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;g(!t.isEqual(ce.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return k(n.targetChanges,function(n,i){if(i.resumeToken.length>0){var r=e.listenTargets[n];r&&(e.listenTargets[n]=r.copy({resumeToken:i.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:_()}),e.sendUnwatchRequest(t);var i=new le(n.query,t,Yt.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(i)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;g(!!t.cause,"Handling target error without a cause");var n=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(t){i=i.then(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return T(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),i},t.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var t,e;return a.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:Fn,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return e=n.sent(),null!==e?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<co},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){g(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){g(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var i=n[e];t.writeStream.writeMutations(i.mutations)}}).catch(wr)},t.prototype.onMutationResult=function(t,e){var n=this;g(this.writePipeline.length>0,"Got result for empty write pipeline");var i=this.writePipeline.shift(),r=jn.from(i,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(r).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(i){return void 0===t&&g(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(e=void 0,e=this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t),[2,e.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return Ae(t.code)?(p(uo,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(wr)]):[2]})})},t.prototype.handleWriteError=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(i){return Oe(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new io(this.datastore)},t.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(uo,"RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(Kr.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Kr.Unknown),e.label=4;case 4:return[2]}})})},t}(),lo=function(){function t(){this.listeners=[]}return t}(),fo=function(){function t(t){this.syncEngine=t,this.queries=new ni(function(t){return t.canonicalId()}),this.onlineState=Kr.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,i=this.queries.get(e);return i||(n=!0,i=new lo,this.queries.set(e,i)),i.listeners.push(t),t.applyOnlineStateChange(this.onlineState),i.viewSnap&&t.onViewSnapshot(i.viewSnap),n?this.syncEngine.listen(e).then(function(t){return i.targetId=t,t}):Promise.resolve(i.targetId)},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,i,r;return a.__generator(this,function(o){return e=t.query,n=!1,i=this.queries.get(e),i&&(r=i.listeners.indexOf(t),r>=0&&(i.listeners.splice(r,1),n=0===i.listeners.length)),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=i.query,o=this.queries.get(r);if(o){for(var s=0,a=o.listeners;s<a.length;s++){var u=a[s];u.onViewSnapshot(i)}o.viewSnap=i}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var i=0,r=n.listeners;i<r.length;i++){var o=r[i];o.onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var i=0,r=n.listeners;i<r.length;i++){var o=r[i];o.applyOnlineStateChange(t)}})},t}(),po=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=Kr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(g(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,i=t.docChanges;n<i.length;n++){var r=i[n];r.type!==Qe.Metadata&&e.push(r)}t=new Ye(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(g(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==Kr.Offline;return this.options.waitForSyncWhenOnline&&n?(g(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===Kr.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){g(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Ye.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),vo=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var i=$e(),r=$e(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Qe.Added:i=i.add(a.doc.key);break;case Qe.Removed:r=r.add(a.doc.key);break;default:}}return new t(e,i,r)},t}(),mo=function(){function t(t){this.key=t}return t}(),yo=function(){function t(t){this.key=t}return t}(),go=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=$e(),this.mutatedKeys=$e(),this.documentSet=new ze(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,i=e?e.changeSet:new Xe,r=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,u=this.query.hasLimit()&&r.size===this.query.limit?r.last():null;if(t.inorderTraversal(function(t,e){var c=r.get(t),h=e instanceof wt?e:null;h&&(g(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var l=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),f=!1;if(c&&h){var p=c.data.isEqual(h.data);p?l!==d&&(i.track({type:Qe.Metadata,doc:h}),f=!0):n.shouldWaitForSyncedDocument(c,h)||(i.track({type:Qe.Modified,doc:h}),f=!0,u&&n.query.docComparator(h,u)>0&&(a=!0))}else!c&&h?(i.track({type:Qe.Added,doc:h}),f=!0):c&&!h&&(i.track({type:Qe.Removed,doc:c}),f=!0,u&&(a=!0));f&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.hasLimit())while(s.size>this.query.limit){var c=s.last();s=s.delete(c.key),o=o.delete(c.key),i.track({type:Qe.Removed,doc:c})}return g(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:i,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var i=this;g(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return bo(t.type,e.type)||i.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current,u=a?Ke.Synced:Ke.Local,c=u!==this.syncState;if(this.syncState=u,0!==o.length||c){var h=new Ye(this.query,t.documentSet,r,o,t.mutatedKeys,u===Ke.Local,c,!1);return{snapshot:h,limboChanges:s}}return{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===Kr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Xe,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return g(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=$e(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new yo(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new mo(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=$e();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Ye.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ke.Local)},t}();function bo(t,e){var n=function(t){switch(t){case Qe.Added:return 1;case Qe.Modified:return 2;case Qe.Metadata:return 2;case Qe.Removed:return 0;default:return y("Unknown ChangeType: "+t)}};return n(t)-n(e)}var _o="SyncEngine",wo=function(){function t(t,e,n){this.query=t,this.targetId=e,this.view=n}return t}(),Eo=function(){function t(t){this.key=t}return t}(),Co=function(){function t(t,e,n,i){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=i,this.syncEngineListener=null,this.queryViewsByQuery=new ni(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Tt(bt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Ar,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Un.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Kr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){g(null!==t,"SyncEngine listener cannot be null"),g(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,i,r,o;return a.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("listen()"),i=this.queryViewsByQuery.get(t),i?(e=i.targetId,this.sharedClientState.addLocalQueryTarget(e),n=i.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return r=s.sent(),o=this.sharedClientState.addLocalQueryTarget(r.targetId),e=r.targetId,[4,this.initializeViewAndComputeSnapshot(r,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(r),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,i=t.query;return this.localStore.executeQuery(i).then(function(r){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var s=new go(i,o),a=s.computeDocChanges(r),u=Ze.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==Kr.Offline),c=s.applyChanges(a,!0===n.isPrimary,u);g(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),g(!!c.snapshot,"applyChanges for new view should always return a snapshot");var h=new wo(i,t.targetId,s);return n.queryViewsByQuery.set(i,h),n.queryViewsByTarget[t.targetId]=h,c.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(i){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(r){return e=t.view.synchronizeWithPersistedState(n,i),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,i=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),e=this.queryViewsByQuery.get(t),g(!!e,"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),n=this.sharedClientState.isActiveQueryTarget(e.targetId),n?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){i.sharedClientState.clearQueryState(e.targetId),i.remoteStore.unlisten(e.targetId),i.removeAndCleanupQuery(e)}).catch(wr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),g(e>=0,"Got negative number of retries for transaction.");var i=this.remoteStore.createTransaction(),r=function(){try{var e=t(i);return!Gt(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(r){return Promise.reject(n.wrapUpdateFunctionError(r))}};return r().then(function(r){return i.commit().then(function(){return r}).catch(function(i){return 0===e?Promise.reject(i):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return D(t.targetChanges,function(t,n){var i=e.limboResolutionsByTarget[t];i&&(g(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?i.receivedDocument=!0:n.modifiedDocuments.size>0?g(i.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(g(i.receivedDocument,"Received remove for limbo target document without add."),i.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(wr)},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===zr.RemoteStore||!this.isPrimary&&e===zr.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,i){var r=i.view.applyOnlineStateChange(t);g(0===r.limboChanges.length,"OnlineState should not affect limbo documents."),r.snapshot&&n.push(r.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,i,r,o,s,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],i=n&&n.key,i?(this.limboTargetsByKey=this.limboTargetsByKey.remove(i),delete this.limboResolutionsByTarget[t],r=new Tt(bt.comparator),r=r.insert(i,new Et(i,ce.forDeletedDoc())),o=$e().add(i),s=new Je(ce.MIN,{},new de(Z),r,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return u=this.queryViewsByTarget[t],g(!!u,"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(wr)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,e),a.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var i;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return i=r.sent(),null===i?(p(_o,"Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):y("Unknown batchState: "+e),r.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(i)];case 5:return r.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(wr)},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(i){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(i)}).catch(wr)},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Tt(Z)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var i=n.get(t);i&&(g(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?i.reject(e):i.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){var n=e.limboDocumentRefs.containsKey(t);n||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r instanceof mo)this.limboDocumentRefs.addReference(r.key,t),this.trackLimboChange(r);else if(r instanceof yo){p(_o,"Document no longer in limbo: "+r.key),this.limboDocumentRefs.removeReference(r.key,t);var o=this.limboDocumentRefs.containsKey(r.key);o||this.removeLimboTarget(r.key)}else y("Unknown limbo change: "+JSON.stringify(r))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){p(_o,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),i=Jt.atPath(e.path);this.limboResolutionsByTarget[n]=new Eo(e),this.remoteStore.listen(new le(i,n,Yt.LimboResolution,Sn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,i,r,o=this;return a.__generator(this,function(s){switch(s.label){case 0:return n=[],i=[],r=[],this.queryViewsByQuery.forEach(function(s,a){r.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var r=e&&e.targetChanges[a.targetId],s=a.view.applyChanges(t,!0===o.isPrimary,r);if(o.updateTrackedLimbos(a.targetId,s.limboChanges),s.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=vo.fromSnapshot(a.targetId,s.snapshot);i.push(u)}}))}),[4,Promise.all(r)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(i)];case 2:return s.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){g(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n;return a.__generator(this,function(i){switch(i.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=i.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:i.sent(),i.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return i.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,i,r,o,s,u,c=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),i=0,r=n;i<r.length;i++)o=r[i],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],u=Promise.resolve(),k(this.queryViewsByTarget,function(t,e){c.sharedClientState.isLocalQueryTarget(t)?s.push(t):u=u.then(function(){return c.unlisten(e.query)}),c.remoteStore.unlisten(e.targetId)}),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;k(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Tt(bt.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),i=[],r=[],o=function(t){n=n.then(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,o,s;return a.__generator(this,function(a){switch(a.label){case 0:return n=this.queryViewsByTarget[t],n?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return o=a.sent(),o.snapshot&&r.push(o.snapshot),[3,8];case 4:return g(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return s=a.sent(),g(!!s,"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(s)];case 6:return e=a.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:a.sent(),a.label=8;case 8:return i.push(e),[2]}})})})},s=0,u=t;s<u.length;s++){var c=u[s];o(c)}return n.then(function(){return e.syncEngineListener.onWatchChange(r),i})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var i,r,o=this;return a.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return p(_o,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(i=e,i){case"current":return[3,1];case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return a.__awaiter(o,void 0,void 0,function(){var i;return a.__generator(this,function(r){switch(r.label){case 0:return i=Je.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,i)];case 1:return r.sent(),[2]}})})},function(t){return a.__awaiter(o,void 0,void 0,function(){var e;return a.__generator(this,function(n){switch(n.label){case 0:return ui(t)?(e=[],k(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return r=this.queryViewsByTarget[t],this.removeAndCleanupQuery(r),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return s.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:y("Unexpected target state: "+e),s.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,i,r,o,s,u,c,h,l,d=this;return a.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,i=t,f.label=1;case 1:return n<i.length?(l=i[n],g(!this.queryViewsByTarget[l],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(l)]):[3,6];case 2:return r=f.sent(),g(!!r,"Query data for active target "+l+" not found"),[4,this.localStore.allocateQuery(r)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return a.__generator(this,function(n){switch(n.label){case 0:return e=u.queryViewsByTarget[t],e?[4,u.localStore.releaseQuery(e.query,!1).then(function(){d.remoteStore.unlisten(t),d.removeAndCleanupQuery(e)}).catch(wr)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,h=e,f.label=7;case 7:return c<h.length?(l=h[c],[5,s(l)]):[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?$e().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:$e()},t}(),To=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),So="SharedClientState",ko="firestore_clients",Io="firestore_mutations",Do="firestore_targets",Ao="firestore_online_state",Oo="firestore_sequence_number",Mo=function(){function t(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i,g(void 0!==i===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,i){var r=JSON.parse(i),o="object"===typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),s=void 0;return o&&r.error&&(o="string"===typeof r.error.message&&"string"===typeof r.error.code,o&&(s=new E(r.error.code,r.error.message))),o?new t(e,n,r.state,s):(v(So,"Failed to parse mutation state for ID '"+n+"': "+i),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,g(void 0!==n===("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var i=JSON.parse(n),r="object"===typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),o=void 0;return r&&i.error&&(r="string"===typeof i.error.message&&"string"===typeof i.error.code,r&&(o=new E(i.error.code,i.error.message))),r?new t(e,i.state,o):(v(So,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var i=JSON.parse(n),r="object"===typeof i&&i.activeTargetIds instanceof Array,o=He(),s=0;r&&s<i.activeTargetIds.length;++s)r=Xt(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(v(So,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),No=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e),i="object"===typeof n&&void 0!==Kr[n.onlineState]&&"string"===typeof n.clientId;return i?new t(n.clientId,Kr[n.onlineState]):(v(So,"Failed to parse online state: "+e),null)},t}(),Ro=function(){function t(){this.activeTargetIds=He()}return t.prototype.addQueryTarget=function(t){g(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Po=function(){function t(e,n,i,r,o){if(this.queue=e,this.platform=n,this.persistenceKey=i,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new E(w.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Oo+"_"+i,this.activeClients[this.localClientId]=new Ro,this.clientStateKeyRe=new RegExp("^"+ko+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Io+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Do+"_"+s+"_(\\d+)$"),this.onlineStateKey=Ao+"_"+i,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var t,e,n,i,r,o,s,u,c,h,l,d=this;return a.__generator(this,function(a){switch(a.label){case 0:return g(!this.started,"WebStorageSharedClientState already started"),g(null!==this.syncEngine,"syncEngine property must be set before calling start()"),g(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)i=n[e],i!==this.localClientId&&(r=this.getItem(this.toWebStorageClientStateKey(i)),r&&(o=Lo.fromWebStorageEntry(i,r),o&&(this.activeClients[o.clientId]=o)));for(this.persistClientState(),s=this.storage.getItem(this.onlineStateKey),s&&(u=this.fromWebStorageOnlineState(s),u&&this.handleOnlineStateEvent(u)),c=0,h=this.earlyEvents;c<h.length;c++)l=h[c],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return d.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=He();return D(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var i=xo.fromWebStorageEntry(t,n);i&&(e=i.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var i=this;e.forEach(function(t){i.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){i.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p(So,"READ",t,e),e},t.prototype.setItem=function(t,e){p(So,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p(So,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(p(So,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,i,r,o,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue),e)return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageMutationMetadata(t.key,t.newValue),i))return[2,this.handleMutationBatchEvent(i)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue),r))return[2,this.handleQueryTargetEvent(r)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue),o))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(g(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),s=Bo(t.newValue),s!==Sn.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var i=new Mo(this.currentUser,t,e,n),r=this.toWebStorageMutationBatchKey(t);this.setItem(r,i.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:Kr[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var i=this.toWebStorageQueryTargetMetadataKey(t),r=new xo(t,e,n);this.setItem(i,r.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return g(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),ko+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Do+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Io+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return g(null!==n,"Cannot parse client state key '"+t+"'"),Lo.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);g(null!==n,"Cannot parse mutation batch key '"+t+"'");var i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return Mo.fromWebStorageEntry(new To(r),i,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);g(null!==n,"Cannot parse query target key '"+t+"'");var i=Number(n[1]);return xo.fromWebStorageEntry(i,e)},t.prototype.fromWebStorageOnlineState=function(t){return No.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(p(So,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,i=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var r=this.getAllActiveQueryTargets(),o=[],s=[];return r.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return i.has(t)||o.push(t),[2]})})}),i.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return r.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();function Bo(t){var e=Sn.INVALID;if(null!=t)try{var n=JSON.parse(t);g("number"===typeof n,"Found non-numeric sequence number"),e=n}catch(i){v(So,"Failed to read sequence number from WebStorage",i)}return e}var Fo=function(){function t(){this.localState=new Ro,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Ro,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),qo="FirestoreClient",jo=20,Vo=22,Uo=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return rr.withCacheSize(this.cacheSizeBytes)},t}(),$o=function(){function t(){}return t}(),Wo=function(){function t(t,e,n,i){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=i,this.clientId=J.newId()}return t.prototype.start=function(t){var e=this,n=new kn,i=new kn,r=!1;return this.credentials.setChangeListener(function(o){r?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(r=!0,e.initializePersistence(t,i,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var i=this;return t instanceof Uo?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!i.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),i.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof E?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&t instanceof DOMException)||(t.code===Vo||t.code===jo)},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,i=br.buildStoragePrefix(this.databaseInfo),r=new fn(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,o;return a.__generator(this,function(s){switch(s.label){case 0:if(e.experimentalTabSynchronization&&!Po.isAvailable(this.platform))throw new E(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.experimentalTabSynchronization?(this.sharedClientState=new Po(this.asyncQueue,this.platform,i,this.clientId,t),[4,br.createMultiClientIndexedDbPersistence(i,this.clientId,this.platform,this.asyncQueue,r,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return this.sharedClientState=new Fo,[4,br.createIndexedDbPersistence(i,this.clientId,this.platform,this.asyncQueue,r,o)];case 3:n=s.sent(),s.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=jr.createEagerPersistence(this.clientId),this.sharedClientState=new Fo,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return p(qo,"Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(i){return a.__awaiter(n,void 0,void 0,function(){var n,r,o,s,u=this;return a.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new xr(this.persistence,t),e&&(this.lruScheduler=new ar(e,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),r=new no(this.asyncQueue,i,this.credentials,n),o=function(t){return u.syncEngine.applyOnlineStateChange(t,zr.RemoteStore)},s=function(t){return u.syncEngine.applyOnlineStateChange(t,zr.SharedClientState)},this.remoteStore=new ho(this.localStore,r,this.asyncQueue,o),this.syncEngine=new Co(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new fo(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),p(qo,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var i=this,r=new po(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return i.eventMgr.listen(r)}),r},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof wt)return t;if(t instanceof Et)return null;throw new E(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=$e(),i=new go(t,n),r=i.computeDocChanges(e);return i.applyChanges(r,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new kn;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Ho=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Qo=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];N("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(R("FieldPath","string",n,t[n]),0===t[n].length)throw new E(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(gt.keyField().canonicalString()),t}(),Ko=new RegExp("[~\\*/\\[\\]]");function zo(t){var e=t.search(Ko);if(e>=0)throw new E(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Qo.bind.apply(Qo,[void 0].concat(t.split("."))))}catch(n){throw new E(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}var Go=function(){function t(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}return t}(),Xo=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){g(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(To.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){g(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Yo=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;g(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new E(w.ABORTED,"getToken aborted due to token change.");return n?(g("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Go(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){g(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){g(null!=this.tokenListener,"removeChangeListener() called twice"),g(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return g(null===t||"string"===typeof t,"Received invalid UID: "+t),new To(t)},t}(),Jo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=To.FIRST_PARTY,g(this.gapi&&this.gapi["auth"]&&this.gapi["auth"]["getAuthHeaderValueForFirstParty"],"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi["auth"]["getAuthHeaderValueForFirstParty"]([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),Zo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,g(this.gapi&&this.gapi["auth"]&&this.gapi["auth"]["getAuthHeaderValueForFirstParty"],"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new Jo(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(To.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ts(t){if(!t)return new Xo;switch(t.type){case"gapi":return new Zo(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new E(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function es(t){return ns(t,["next","error","complete"])}function ns(t,e){if("object"!==typeof t||null===t)return!1;for(var n=t,i=0,r=e;i<r.length;i++){var o=r[i];if(o in n&&"function"===typeof n[o])return!0}return!1}var is,rs=function(){function t(t){this._methodName=t}return t.delete=function(){return os.instance},t.serverTimestamp=function(){return ss.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x("FieldValue.arrayUnion",arguments,1),new as(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x("FieldValue.arrayRemove",arguments,1),new us(t)},t.prototype.isEqual=function(t){return this===t},t}(),os=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a.__extends(e,t),e.instance=new e,e}(rs),ss=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(e,t),e.instance=new e,e}(rs),as=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return a.__extends(e,t),e}(rs),us=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return a.__extends(e,t),e}(rs),cs=C(rs,"Use FieldValue.<field>() instead."),hs=/^__.*__$/,ls=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new _e(t,this.data,this.fieldMask,e)):n.push(new be(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}(),ds=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new _e(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}();function fs(t){switch(t){case is.Set:case is.MergeSet:case is.Update:return!0;case is.Argument:return!1;default:throw y("Unexpected case for UserDataSource: "+t)}}(function(t){t[t["Set"]=0]="Set",t[t["Update"]=1]="Update",t[t["MergeSet"]=2]="MergeSet",t[t["Argument"]=3]="Argument"})(is||(is={}));var ps=function(){function t(t,e,n,i,r,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=i,void 0===r&&this.validatePath(),this.arrayElement=void 0!==i&&i,this.fieldTransforms=r||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),i=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return i.validatePathSegment(e),i},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),i=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return i.validatePath(),i},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new E(w.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(fs(this.dataSource)&&hs.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),vs=function(){function t(t,e){this.databaseId=t,this.key=e}return t}(),ms=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new ps(is.Set,t,gt.EMPTY_PATH);gs("Data must be an object, but it was:",n,e);var i=this.parseData(e,n);return new ls(i,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var i=new ps(is.MergeSet,t,gt.EMPTY_PATH);gs("Data must be an object, but it was:",i,e);var r,o,s=this.parseData(e,i);if(n){for(var a=new de(gt.comparator),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof Qo)l=h._internalPath;else{if("string"!==typeof h)throw y("Expected stringOrFieldPath to be a string or a FieldPath");l=_s(t,h)}if(!i.contains(l))throw new E(w.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}r=pe.fromSet(a),o=i.fieldTransforms.filter(function(t){return r.covers(t.field)})}else r=pe.fromArray(i.fieldMask),o=i.fieldTransforms;return new ls(s,r,o)},t.prototype.parseUpdateData=function(t,e){var n=this,i=new ps(is.Update,t,gt.EMPTY_PATH);gs("Data must be an object, but it was:",i,e);var r=new de(gt.comparator),o=$t.EMPTY;D(e,function(e,s){var a=_s(t,e),u=i.childContextForFieldPath(a);if(s=n.runPreConverter(s,u),s instanceof os)r=r.add(a);else{var c=n.parseData(s,u);null!=c&&(r=r.add(a),o=o.set(a,c))}});var s=pe.fromSet(r);return new ds(o,s,i.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,i){var r=new ps(is.Update,t,gt.EMPTY_PATH),o=[bs(t,e)],s=[n];if(i.length%2!==0)throw new E(w.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<i.length;a+=2)o.push(bs(t,i[a])),s.push(i[a+1]);var u=new de(gt.comparator),c=$t.EMPTY;for(a=0;a<o.length;++a){var h=o[a],l=r.childContextForFieldPath(h),d=this.runPreConverter(s[a],l);if(d instanceof os)u=u.add(h);else{var f=this.parseData(d,l);null!=f&&(u=u.add(h),c=c.set(h,f))}}var p=pe.fromSet(u);return new ds(c,p,r.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new ps(is.Argument,t,gt.EMPTY_PATH),i=this.parseData(e,n);return g(null!=i,"Parsed data should not be null."),g(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(i){var n=ws(i);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(t=this.runPreConverter(t,e),ys(t))return gs("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof rs)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,i=new Tt(Z);return A(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):D(t,function(t,r){var o=n.parseData(r,e.childContextForField(t));null!=o&&(i=i.insert(t,o))}),new $t(i)},t.prototype.parseArray=function(t,e){for(var n=[],i=0,r=0,o=t;r<o.length;r++){var s=o[r],a=this.parseData(s,e.childContextForArray(i));null==a&&(a=Ot.INSTANCE),n.push(a),i++}return new Wt(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!fs(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof os){if(e.dataSource!==is.MergeSet)throw e.dataSource===is.Update?(g(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ss)e.fieldTransforms.push(new ve(e.path,Ce.instance));else if(t instanceof as){var n=this.parseArrayTransformElements(t._methodName,t._elements),i=new Te(n);e.fieldTransforms.push(new ve(e.path,i))}else if(t instanceof us){n=this.parseArrayTransformElements(t._methodName,t._elements);var r=new Se(n);e.fieldTransforms.push(new ve(e.path,r))}else y("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Ot.INSTANCE;if("number"===typeof t)return Xt(t)?new Rt(t):new Pt(t);if("boolean"===typeof t)return Mt.of(t);if("string"===typeof t)return new Bt(t);if(t instanceof Date)return new Ft(ht.fromDate(t));if(t instanceof ht)return new Ft(new ht(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof ct)return new Ut(t);if(t instanceof at)return new jt(t);if(t instanceof vs)return new Vt(t.databaseId,t.key);throw e.createError("Unsupported field value: "+H(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,i){var r=new ps(is.Argument,t,gt.EMPTY_PATH);return n.parseData(e,r.childContextForArray(i))})},t}();function ys(t){return"object"===typeof t&&null!==t&&!(t instanceof Array)&&!(t instanceof Date)&&!(t instanceof ht)&&!(t instanceof ct)&&!(t instanceof at)&&!(t instanceof vs)&&!(t instanceof rs)}function gs(t,e,n){if(!ys(n)||!W(n)){var i=H(n);throw"an object"===i?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function bs(t,e){if(e instanceof Qo)return e._internalPath;if("string"===typeof e)return _s(t,e);var n="Field path arguments must be of type string or FieldPath.";throw new E(w.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}function _s(t,e){try{return zo(e)._internalPath}catch(i){var n=ws(i);throw new E(w.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function ws(t){return t instanceof Error?t.message:t.toString()}var Es="firestore.googleapis.com",Cs=!0,Ts=!0,Ss=rr.COLLECTION_DISABLED,ks=!1,Is=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new E(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Es,this.ssl=Cs}else B("settings","non-empty string","host",t.host),this.host=t.host,F("settings","boolean","ssl",t.ssl),this.ssl=S(t.ssl,Cs);if(z("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),F("settings","object","credentials",t.credentials),this.credentials=t.credentials,F("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?v("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&v("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=S(t.timestampsInSnapshots,Ts),F("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=rr.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Ss&&t.cacheSizeBytes<rr.MINIMUM_CACHE_SIZE_BYTES)throw new E(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+rr.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),Ds=function(){function t(){}return t}(),As=function(){function t(e){var n=this;this._queue=new Dn,this.INTERNAL={delete:function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var i=new Ds;if("object"===typeof e.options){var r=e;i.firebaseApp=r,i.databaseId=t.databaseIdFromApp(r),i.persistenceKey=i.firebaseApp.name,i.credentials=new Yo(r)}else{var o=e;if(!o.projectId)throw new E(w.INVALID_ARGUMENT,"Must provide projectId");i.databaseId=new ft(o.projectId,o.database),i.persistenceKey="[DEFAULT]",i.credentials=new Xo}i.settings=new Is({}),this._config=i,this._databaseId=i.databaseId}return t.prototype.settings=function(t){if(M("Firestore.settings",arguments,1),R("Firestore.settings","object",1,t),T(t,"persistence"))throw new E(w.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Is(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new E(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=ts(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new E(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Uo(this._config.settings.cacheSizeBytes,void 0!==t&&S(t.experimentalTabSynchronization,ks)))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new $o),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;g(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),g(!this._firestoreClient,"configureClient() called multiple times");var n=new lt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl),i=function(t){if(t instanceof xs){var n=e._config.databaseId,i=t.firestore._config.databaseId;if(!i.isEqual(n))throw new E(w.INVALID_ARGUMENT,"Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return new vs(e._config.databaseId,t._key)}return t};return this._dataConverter=new ms(i),this._firestoreClient=new Wo(b.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!T(e,"projectId"))throw new E(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e["projectId"];if(!n||"string"!==typeof n)throw new E(w.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ft(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new E(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(M("Firestore.collection",arguments,1),R("Firestore.collection","non-empty string",1,t),!t)throw new E(w.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new js(mt.fromString(t),this)},t.prototype.doc=function(t){if(M("Firestore.doc",arguments,1),R("Firestore.doc","non-empty string",1,t),!t)throw new E(w.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),xs.forPath(mt.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return M("Firestore.runTransaction",arguments,1),R("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Os(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Ms(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case r.DEBUG:return"debug";case r.ERROR:return"error";case r.SILENT:return"silent";default:return y("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(M("Firestore.setLogLevel",arguments,1),R("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(r.DEBUG);break;case"error":f(r.ERROR);break;case"silent":f(r.SILENT);break;default:throw new E(w.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),Os=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;M("Transaction.get",arguments,1);var n=Ws("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return y("Mismatch in docs returned from document lookup.");var i=t[0];if(i instanceof Et)return new Ns(e._firestore,n._key,null,!1,!1);if(i instanceof wt)return new Ns(e._firestore,n._key,i,!1,!1);throw y("BatchGetDocumentsRequest returned unexpected document type: "+i.constructor.name)})},t.prototype.set=function(t,e,n){L("Transaction.set",arguments,2,3);var i=Ws("Transaction.set",t,this._firestore);n=Vs("Transaction.set",n);var r=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(i._key,r),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"===typeof e||e instanceof Qo?(x("Transaction.update",arguments,3),i=Ws("Transaction.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(M("Transaction.update",arguments,2),i=Ws("Transaction.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(i._key,r),this},t.prototype.delete=function(t){M("Transaction.delete",arguments,1);var e=Ws("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Ms=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){L("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var i=Ws("WriteBatch.set",t,this._firestore);n=Vs("WriteBatch.set",n);var r=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(r.toMutations(i._key,ye.NONE)),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"===typeof e||e instanceof Qo?(x("WriteBatch.update",arguments,3),i=Ws("WriteBatch.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(M("WriteBatch.update",arguments,2),i=Ws("WriteBatch.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(r.toMutations(i._key,ye.exists(!0))),this},t.prototype.delete=function(t){M("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Ws("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Ee(e._key,ye.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new E(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),xs=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!==0)throw new E(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new bt(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new js(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(M("DocumentReference.collection",arguments,1),R("DocumentReference.collection","non-empty string",1,t),!t)throw new E(w.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=mt.fromString(t);return new js(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){L("DocumentReference.set",arguments,1,2),e=Vs("DocumentReference.set",e);var n=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ye.NONE))},t.prototype.update=function(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return"string"===typeof t||t instanceof Qo?(x("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,i)):(M("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ye.exists(!0)))},t.prototype.delete=function(){return M("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Ee(this._key,ye.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];L("DocumentReference.onSnapshot",arguments,1,4);var n,i={includeMetadataChanges:!1},r=0;"object"!==typeof t[r]||es(t[r])||(i=t[r],z("DocumentReference.onSnapshot",i,["includeMetadataChanges"]),F("DocumentReference.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++);var o={includeMetadataChanges:i.includeMetadataChanges};return es(t[r])?n=t[r]:(R("DocumentReference.onSnapshot","function",r,t[r]),P("DocumentReference.onSnapshot","function",r+1,t[r+1]),P("DocumentReference.onSnapshot","function",r+2,t[r+2]),n={next:t[r],error:t[r+1],complete:t[r+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,i=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(i=e.error.bind(e));var r=new Ho({next:function(t){if(e.next){g(t.docs.size<=1,"Too many documents returned on a document query");var i=t.docs.get(n._key);e.next(new Ns(n.firestore,n._key,i,t.fromCache,t.hasPendingWrites))}},error:i}),o=this._firestoreClient.listen(Jt.atPath(this._key.path),r,t);return function(){r.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return L("DocumentReference.get",arguments,0,1),$s("DocumentReference.get",t),new Promise(function(n,i){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Ns(e.firestore,e._key,t,!0,t instanceof wt&&t.hasLocalMutations))},i):e.getViaSnapshotListener(n,i,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){i(),!r.exists&&r.metadata.fromCache?e(new E(w.UNAVAILABLE,"Failed to get document because the client is offline.")):r.exists&&r.metadata.fromCache&&n&&"server"===n.source?e(new E(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(r)},error:e})},t}(),Ls=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ns=function(){function t(t,e,n,i,r){this._firestore=t,this._key=e,this._document=n,this._fromCache=i,this._hasPendingWrites=r}return t.prototype.data=function(t){return L("DocumentSnapshot.data",arguments,0,1),t=Us("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,Dt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(L("DocumentSnapshot.get",arguments,1,2),e=Us("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(bs("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,Dt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xs(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ls(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,i={};return t.forEach(function(t,r){i[t]=n.convertValue(r,e)}),i},t.prototype.convertValue=function(t,e){if(t instanceof $t)return this.convertObject(t,e);if(t instanceof Wt)return this.convertArray(t,e);if(t instanceof Vt){var n=t.value(e),i=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(i)||v("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+i.projectId+"/"+i.database+") instead."),new xs(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Rs=function(t){function e(e,n,i,r,o){return t.call(this,e,n,i,r,o)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return g("object"===typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Ns),Ps=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,i){var r;M("Query.where",arguments,3),R("Query.where","non-empty string",2,n),K("Query.where",3,i);var o=bs("Query.where",e),s=te.fromString(n);if(o.isKeyField()){if(s===te.ARRAY_CONTAINS)throw new E(w.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"===typeof i){if(-1!==i.indexOf("/"))throw new E(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===i)throw new E(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new mt([i]));g(a.length%2===0,"Path should be a document key"),r=new Vt(this.firestore._databaseId,new bt(a))}else{if(!(i instanceof xs))throw new E(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+H(i)+".");var u=i;r=new Vt(this.firestore._databaseId,u._key)}}else r=this.firestore._dataConverter.parseQueryValue("Query.where",i);var c=Zt.create(o,s,r);return this.validateNewFilter(c),new t(this._query.addFilter(c),this.firestore)},t.prototype.orderBy=function(e,n){var i;if(L("Query.orderBy",arguments,1,2),P("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)i=re.ASCENDING;else{if("desc"!==n)throw new E(w.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");i=re.DESCENDING}if(null!==this._query.startAt)throw new E(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new E(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=bs("Query.orderBy",e),o=new se(r,i);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(M("Query.limit",arguments,1),R("Query.limit","number",1,e),e<=0)throw new E(w.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];x("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(r),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];x("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(r),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];x("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(r),this.firestore)},t.prototype.endAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];x("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(r),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,i){if(K(t,1,e),e instanceof Ns){if(n.length>0)throw new E(w.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var r=e;if(!r.exists)throw new E(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,r._document,i)}var o=[e].concat(n);return this.boundFromFields(t,o,i)},t.prototype.boundFromDocument=function(t,e,n){for(var i=[],r=0,o=this._query.orderBy;r<o.length;r++){var s=o[r];if(s.field.isKeyField())i.push(new Vt(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(void 0===a){var u=s.field.canonicalString();throw new E(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}i.push(a)}}return new oe(i,n)},t.prototype.boundFromFields=function(t,e,n){var i=this._query.explicitOrderBy;if(e.length>i.length)throw new E(w.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],o=0;o<e.length;o++){var s=e[o],a=i[o];if(a.field.isKeyField()){if("string"!==typeof s)throw new E(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new E(w.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+t+"()");var u=new bt(this._query.path.child(s));r.push(new Vt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,s);r.push(c)}}return new oe(r,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];L("Query.onSnapshot",arguments,1,4);var n,i={},r=0;return"object"!==typeof t[r]||es(t[r])||(i=t[r],z("Query.onSnapshot",i,["includeMetadataChanges"]),F("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++),es(t[r])?n=t[r]:(R("Query.onSnapshot","function",r,t[r]),P("Query.onSnapshot","function",r+1,t[r+1]),P("Query.onSnapshot","function",r+2,t[r+2]),n={next:t[r],error:t[r+1],complete:t[r+2]}),this.onSnapshotInternal(i,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,i=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(i=e.error.bind(e));var r=new Ho({next:function(t){e.next&&e.next(new Bs(n.firestore,n._query,t))},error:i}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,r,t);return function(){r.mute(),o.unlisten(s)}},t.prototype.get=function(t){var e=this;return L("Query.get",arguments,0,1),$s("Query.get",t),new Promise(function(n,i){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Bs(e.firestore,e._query,t))},i):e.getViaSnapshotListener(n,i,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){i(),r.metadata.fromCache&&n&&"server"===n.source?e(new E(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(r)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof ee)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new E(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===te.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new E(w.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new E(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Bs=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ls(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;L("QuerySnapshot.forEach",arguments,1,2),R("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(i){t.call(e,n.convertToDocumentImpl(i))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Ps(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(z("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),F("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new E(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=Hs(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Rs(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();function Fs(){throw new E(w.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}var qs=["length","forEach","map"].concat("undefined"!==typeof Symbol?[Symbol.iterator]:[]);qs.forEach(function(t){try{Object.defineProperty(Bs.prototype.docChanges,t,{get:function(){return Fs()}})}catch(e){}});var js=function(t){function e(e,n){var i=t.call(this,Jt.atPath(e),n)||this;if(e.length%2!==1)throw new E(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return i}return a.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new xs(new bt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(L("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=J.newId()),R("CollectionReference.doc","non-empty string",1,t),""===t)throw new E(w.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=mt.fromString(t);return xs.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){M("CollectionReference.add",arguments,1),R("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Ps);function Vs(t,e){if(void 0===e)return{merge:!1};if(z(t,e,["merge","mergeFields"]),F(t,"boolean","merge",e.merge),j(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"===typeof t||t instanceof Qo}),void 0!==e.mergeFields&&void 0!==e.merge)throw new E(w.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Us(t,e){return void 0===e?{}:(z(t,e,["serverTimestamps"]),U(t,"options","serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function $s(t,e){P(t,"object",1,e),e&&(z(t,e,["source"]),U(t,"options","source",e.source,["default","server","cache"]))}function Ws(t,e,n){if(e instanceof xs){if(e.firestore!==n)throw new E(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw G(t,"DocumentReference",1,e)}function Hs(t,e,n){if(n.oldDocs.isEmpty()){var i,r=0;return n.docChanges.map(function(e){var o=new Rs(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return g(e.type===Qe.Added,"Invalid event type for first snapshot"),g(!i||n.query.docComparator(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Qe.Metadata}).map(function(e){var i=new Rs(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),r=-1,s=-1;return e.type!==Qe.Added&&(r=o.indexOf(e.doc.key),g(r>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Qe.Removed&&(o=o.add(e.doc),s=o.indexOf(e.doc.key)),{type:Qs(e.type),doc:i,oldIndex:r,newIndex:s}})}function Qs(t){switch(t){case Qe.Added:return"added";case Qe.Modified:case Qe.Metadata:return"modified";case Qe.Removed:return"removed";default:return y("Unknown change type: "+t)}}var Ks=C(As,"Use firebase.firestore() instead."),zs=C(Os,"Use firebase.firestore().runTransaction() instead."),Gs=C(Ms,"Use firebase.firestore().batch() instead."),Xs=C(xs,"Use firebase.firestore().doc() instead."),Ys=C(Ns),Js=C(Rs),Zs=C(Ps),ta=C(Bs),ea=C(js,"Use firebase.firestore().collection() instead."),na={Firestore:Ks,GeoPoint:ct,Timestamp:ht,Blob:ut,Transaction:zs,WriteBatch:Gs,DocumentReference:Xs,DocumentSnapshot:Ys,Query:Zs,QueryDocumentSnapshot:Js,QuerySnapshot:ta,CollectionReference:ea,FieldPath:Qo,FieldValue:cs,setLogLevel:As.setLogLevel,CACHE_SIZE_UNLIMITED:Ss};function ia(t){t.INTERNAL.registerService("firestore",function(t){return new As(t)},O(na))}function ra(t){ia(t)}ra(o),e.registerFirestore=ra},e9df:function(t,e,n){"use strict";var i=n("235a"),r=n("998f")(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("74d1")(o)},eb5a:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},ebd6:function(t,e,n){var i=n("cb7c"),r=n("d8e8"),o=n("2b4c")("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},ef81:function(t,e,n){"use strict";var i=n("f40b"),r=n("96ff"),o=n("50e6"),s=n("8ffe"),a=n("1f50"),u=Object.assign;t.exports=!u||n("eb5a")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){var n=s(t),u=arguments.length,c=1,h=r.f,l=o.f;while(u>c){var d,f=a(arguments[c++]),p=h?i(f).concat(h(f)):i(f),v=p.length,m=0;while(v>m)l.call(f,d=p[m++])&&(n[d]=f[d])}return n}:u},f0be:function(t,e){t.exports=!1},f22d:function(t,e,n){"use strict";var i=n("aad8"),r=n("8343"),o=n("948a"),s=n("235a"),a=n("4c35"),u=n("3b2a").KEY,c=n("eb5a"),h=n("7b3a"),l=n("03ed"),d=n("53ff"),f=n("8d98"),p=n("78a3"),v=n("bb4d"),m=n("1928"),y=n("a313"),g=n("5051"),b=n("669d"),_=n("ad20"),w=n("2223"),E=n("c46b"),C=n("c6b0"),T=n("e1fb"),S=n("6ca5"),k=n("cad0"),I=n("f40b"),D=S.f,A=k.f,O=T.f,M=i.Symbol,x=i.JSON,L=x&&x.stringify,N="prototype",R=f("_hidden"),P=f("toPrimitive"),B={}.propertyIsEnumerable,F=h("symbol-registry"),q=h("symbols"),j=h("op-symbols"),V=Object[N],U="function"==typeof M,$=i.QObject,W=!$||!$[N]||!$[N].findChild,H=o&&c(function(){return 7!=C(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=D(V,e);i&&delete V[e],A(t,e,n),i&&t!==V&&A(V,e,i)}:A,Q=function(t){var e=q[t]=C(M[N]);return e._k=t,e},K=U&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},z=function(t,e,n){return t===V&&z(j,e,n),g(t),e=w(e,!0),g(n),r(q,e)?(n.enumerable?(r(t,R)&&t[R][e]&&(t[R][e]=!1),n=C(n,{enumerable:E(0,!1)})):(r(t,R)||A(t,R,E(1,{})),t[R][e]=!0),H(t,e,n)):A(t,e,n)},G=function(t,e){g(t);var n,i=m(e=_(e)),r=0,o=i.length;while(o>r)z(t,n=i[r++],e[n]);return t},X=function(t,e){return void 0===e?C(t):G(C(t),e)},Y=function(t){var e=B.call(this,t=w(t,!0));return!(this===V&&r(q,t)&&!r(j,t))&&(!(e||!r(this,t)||!r(q,t)||r(this,R)&&this[R][t])||e)},J=function(t,e){if(t=_(t),e=w(e,!0),t!==V||!r(q,e)||r(j,e)){var n=D(t,e);return!n||!r(q,e)||r(t,R)&&t[R][e]||(n.enumerable=!0),n}},Z=function(t){var e,n=O(_(t)),i=[],o=0;while(n.length>o)r(q,e=n[o++])||e==R||e==u||i.push(e);return i},tt=function(t){var e,n=t===V,i=O(n?j:_(t)),o=[],s=0;while(i.length>s)!r(q,e=i[s++])||n&&!r(V,e)||o.push(q[e]);return o};U||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(j,n),r(this,R)&&r(this[R],t)&&(this[R][t]=!1),H(this,t,E(1,n))};return o&&W&&H(V,t,{configurable:!0,set:e}),Q(t)},a(M[N],"toString",function(){return this._k}),S.f=J,k.f=z,n("18cc").f=T.f=Z,n("50e6").f=Y,n("96ff").f=tt,o&&!n("f0be")&&a(V,"propertyIsEnumerable",Y,!0),p.f=function(t){return Q(f(t))}),s(s.G+s.W+s.F*!U,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var it=I(f.store),rt=0;it.length>rt;)v(it[rt++]);s(s.S+s.F*!U,"Symbol",{for:function(t){return r(F,t+="")?F[t]:F[t]=M(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!U,"Object",{create:X,defineProperty:z,defineProperties:G,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),x&&s(s.S+s.F*(!U||c(function(){var t=M();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){var e,n,i=[t],r=1;while(arguments.length>r)i.push(arguments[r++]);if(n=e=i[1],(b(e)||void 0!==t)&&!K(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),i[1]=e,L.apply(x,i)}}),M[N][P]||n("1982")(M[N],P,M[N].valueOf),l(M,"Symbol"),l(Math,"Math",!0),l(i.JSON,"JSON",!0)},f28b:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},f40b:function(t,e,n){var i=n("232e"),r=n("9129");t.exports=Object.keys||function(t){return i(t,r)}},f605:function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},f751:function(t,e,n){var i=n("5ca1");i(i.S+i.F,"Object",{assign:n("7333")})},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,n){var i=n("7726").document;t.exports=i&&i.documentElement},fbb0:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return r}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return v}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return y}),n.d(e,"__asyncDelegator",function(){return g}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function s(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n}function a(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,i){e(n,i,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(e){o(e)}}function a(t){try{u(i["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})}function l(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(i=o.next()).done)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){r[t]&&(i[t]=function(e){return new Promise(function(n,i){o.push([t,e,n,i])>1||a(t,e)})})}function a(t,e){try{u(r[t](e))}catch(n){l(o[0][3],n)}}function u(t){t.value instanceof m?Promise.resolve(t.value.v).then(c,h):l(o[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function g(t){var e,n;return e={},i("next"),i("throw",function(t){throw t}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){t[i]&&(e[i]=function(e){return(n=!n)?{value:m(t[i](e)),done:"return"===i}:r?r(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"===typeof f?f(t):t[Symbol.iterator]()}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}}}]);
//# sourceMappingURL=chunk-vendors.6cb7c9b0.js.map